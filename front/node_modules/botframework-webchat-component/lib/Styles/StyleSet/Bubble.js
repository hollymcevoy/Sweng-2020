"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createBubbleStyle;

var _mirrorStyle = _interopRequireDefault(require("../mirrorStyle"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function createBubbleStyle(_ref) {
  var bubbleBackground = _ref.bubbleBackground,
      bubbleBorderColor = _ref.bubbleBorderColor,
      bubbleBorderRadius = _ref.bubbleBorderRadius,
      bubbleBorderStyle = _ref.bubbleBorderStyle,
      bubbleBorderWidth = _ref.bubbleBorderWidth,
      bubbleFromUserBackground = _ref.bubbleFromUserBackground,
      bubbleFromUserBorderColor = _ref.bubbleFromUserBorderColor,
      bubbleFromUserBorderRadius = _ref.bubbleFromUserBorderRadius,
      bubbleFromUserBorderStyle = _ref.bubbleFromUserBorderStyle,
      bubbleFromUserBorderWidth = _ref.bubbleFromUserBorderWidth,
      bubbleFromUserNubOffset = _ref.bubbleFromUserNubOffset,
      bubbleFromUserNubSize = _ref.bubbleFromUserNubSize,
      bubbleFromUserTextColor = _ref.bubbleFromUserTextColor,
      bubbleMinHeight = _ref.bubbleMinHeight,
      bubbleNubOffset = _ref.bubbleNubOffset,
      bubbleNubSize = _ref.bubbleNubSize,
      bubbleTextColor = _ref.bubbleTextColor,
      messageActivityWordBreak = _ref.messageActivityWordBreak,
      paddingRegular = _ref.paddingRegular,
      transitionDuration = _ref.transitionDuration;
  var botNubCornerRadius = typeof bubbleNubOffset === 'number' ? Math.min(bubbleBorderRadius, Math.abs(bubbleNubOffset)) : bubbleBorderRadius;
  var userNubCornerRadius = typeof bubbleFromUserNubOffset === 'number' ? Math.min(bubbleFromUserBorderRadius, Math.abs(bubbleFromUserNubOffset)) : bubbleFromUserBorderRadius;
  return {
    '&.webchat__bubble': _objectSpread({
      '& .webchat__bubble__content': {
        marginLeft: 0,
        marginRight: 0,
        transitionDuration: transitionDuration,
        transitionProperty: 'margin-left, margin-right',
        wordBreak: messageActivityWordBreak
      },
      '& .webchat__bubble__nub': {
        overflow: 'hidden',
        // This style is for IE11 because it doesn't respect SVG viewport
        position: 'absolute'
      },
      '& .webchat__bubble__nub-pad': {
        transitionDuration: transitionDuration,
        transitionProperty: 'width',
        width: 0
      },
      '&.webchat__bubble--hide-nub, &.webchat__bubble--show-nub': {
        '& .webchat__bubble__nub-pad': {
          width: paddingRegular
        }
      },
      '&.webchat__bubble--rtl .webchat__bubble__nub': {
        transform: 'scale(-1, 1)'
      },
      '&:not(.webchat__bubble--from-user)': _objectSpread(_objectSpread({
        '& .webchat__bubble__content': {
          background: bubbleBackground,
          borderColor: bubbleBorderColor,
          borderRadius: bubbleBorderRadius,
          borderStyle: bubbleBorderStyle,
          borderWidth: bubbleBorderWidth,
          color: bubbleTextColor,
          minHeight: bubbleMinHeight - bubbleBorderWidth * 2
        }
      }, typeof bubbleNubSize === 'number' ? {
        '& .webchat__bubble__nub': {
          height: bubbleNubSize,
          width: bubbleNubSize
        }
      } : {}), {}, {
        '&:not(.webchat__bubble--nub-on-top) .webchat__bubble__nub': {
          bottom: -bubbleNubOffset
        },
        '&.webchat__bubble--nub-on-top .webchat__bubble__nub': {
          top: bubbleNubOffset
        },
        '& .webchat__bubble__nub-outline': {
          fill: bubbleBackground,
          stroke: bubbleBorderColor,
          strokeWidth: bubbleBorderWidth
        }
      }),
      '&.webchat__bubble--from-user': _objectSpread(_objectSpread({
        flexDirection: 'row-reverse',
        '& .webchat__bubble__content': {
          background: bubbleFromUserBackground,
          borderColor: bubbleFromUserBorderColor,
          borderRadius: bubbleFromUserBorderRadius,
          borderStyle: bubbleFromUserBorderStyle,
          borderWidth: bubbleFromUserBorderWidth,
          color: bubbleFromUserTextColor,
          minHeight: bubbleMinHeight - bubbleFromUserBorderWidth * 2
        }
      }, typeof bubbleFromUserNubSize === 'number' ? {
        '& .webchat__bubble__nub': {
          height: bubbleFromUserNubSize,
          width: bubbleFromUserNubSize
        }
      } : {}), {}, {
        '&:not(.webchat__bubble--nub-on-top) .webchat__bubble__nub': {
          bottom: -bubbleFromUserNubOffset
        },
        '&.webchat__bubble--nub-on-top .webchat__bubble__nub': {
          top: bubbleFromUserNubOffset
        },
        '& .webchat__bubble__nub-outline': {
          fill: bubbleFromUserBackground,
          stroke: bubbleFromUserBorderColor,
          strokeWidth: bubbleFromUserBorderWidth
        }
      })
    }, (0, _mirrorStyle.default)('&.webchat__bubble--rtl', {
      '&:not(.webchat__bubble--from-user)': _objectSpread({
        '&.webchat__bubble--show-nub': {
          // Hide border radius if there is a nub on the top/bottom left corner
          '&:not(.webchat__bubble--nub-on-top) .webchat__bubble__content': {
            borderBottomLeftRadius: botNubCornerRadius
          },
          '&.webchat__bubble--nub-on-top .webchat__bubble__content': {
            borderTopLeftRadius: botNubCornerRadius
          }
        }
      }, typeof bubbleNubSize === 'number' ? {
        '& .webchat__bubble__nub': {
          left: bubbleBorderWidth - bubbleNubSize + paddingRegular
        }
      } : {}),
      '&.webchat__bubble--from-user': _objectSpread({
        '&.webchat__bubble--show-nub': {
          // Hide border radius if there is a nub on the top/bottom right corner
          '&:not(.webchat__bubble--nub-on-top) .webchat__bubble__content': {
            borderBottomRightRadius: userNubCornerRadius
          },
          '&.webchat__bubble--nub-on-top .webchat__bubble__content': {
            borderTopRightRadius: userNubCornerRadius
          }
        }
      }, typeof bubbleFromUserNubSize === 'number' ? {
        '& .webchat__bubble__nub': {
          right: bubbleFromUserBorderWidth - bubbleFromUserNubSize + paddingRegular
        }
      } : {})
    }))
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9TdHlsZXMvU3R5bGVTZXQvQnViYmxlLnRzIl0sIm5hbWVzIjpbImNyZWF0ZUJ1YmJsZVN0eWxlIiwiYnViYmxlQmFja2dyb3VuZCIsImJ1YmJsZUJvcmRlckNvbG9yIiwiYnViYmxlQm9yZGVyUmFkaXVzIiwiYnViYmxlQm9yZGVyU3R5bGUiLCJidWJibGVCb3JkZXJXaWR0aCIsImJ1YmJsZUZyb21Vc2VyQmFja2dyb3VuZCIsImJ1YmJsZUZyb21Vc2VyQm9yZGVyQ29sb3IiLCJidWJibGVGcm9tVXNlckJvcmRlclJhZGl1cyIsImJ1YmJsZUZyb21Vc2VyQm9yZGVyU3R5bGUiLCJidWJibGVGcm9tVXNlckJvcmRlcldpZHRoIiwiYnViYmxlRnJvbVVzZXJOdWJPZmZzZXQiLCJidWJibGVGcm9tVXNlck51YlNpemUiLCJidWJibGVGcm9tVXNlclRleHRDb2xvciIsImJ1YmJsZU1pbkhlaWdodCIsImJ1YmJsZU51Yk9mZnNldCIsImJ1YmJsZU51YlNpemUiLCJidWJibGVUZXh0Q29sb3IiLCJtZXNzYWdlQWN0aXZpdHlXb3JkQnJlYWsiLCJwYWRkaW5nUmVndWxhciIsInRyYW5zaXRpb25EdXJhdGlvbiIsImJvdE51YkNvcm5lclJhZGl1cyIsIk1hdGgiLCJtaW4iLCJhYnMiLCJ1c2VyTnViQ29ybmVyUmFkaXVzIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwidHJhbnNpdGlvblByb3BlcnR5Iiwid29yZEJyZWFrIiwib3ZlcmZsb3ciLCJwb3NpdGlvbiIsIndpZHRoIiwidHJhbnNmb3JtIiwiYmFja2dyb3VuZCIsImJvcmRlckNvbG9yIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyU3R5bGUiLCJib3JkZXJXaWR0aCIsImNvbG9yIiwibWluSGVpZ2h0IiwiaGVpZ2h0IiwiYm90dG9tIiwidG9wIiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwiZmxleERpcmVjdGlvbiIsImJvcmRlckJvdHRvbUxlZnRSYWRpdXMiLCJib3JkZXJUb3BMZWZ0UmFkaXVzIiwibGVmdCIsImJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzIiwiYm9yZGVyVG9wUmlnaHRSYWRpdXMiLCJyaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBOzs7Ozs7Ozs7O0FBRWUsU0FBU0EsaUJBQVQsT0FxQlE7QUFBQSxNQXBCckJDLGdCQW9CcUIsUUFwQnJCQSxnQkFvQnFCO0FBQUEsTUFuQnJCQyxpQkFtQnFCLFFBbkJyQkEsaUJBbUJxQjtBQUFBLE1BbEJyQkMsa0JBa0JxQixRQWxCckJBLGtCQWtCcUI7QUFBQSxNQWpCckJDLGlCQWlCcUIsUUFqQnJCQSxpQkFpQnFCO0FBQUEsTUFoQnJCQyxpQkFnQnFCLFFBaEJyQkEsaUJBZ0JxQjtBQUFBLE1BZnJCQyx3QkFlcUIsUUFmckJBLHdCQWVxQjtBQUFBLE1BZHJCQyx5QkFjcUIsUUFkckJBLHlCQWNxQjtBQUFBLE1BYnJCQywwQkFhcUIsUUFickJBLDBCQWFxQjtBQUFBLE1BWnJCQyx5QkFZcUIsUUFackJBLHlCQVlxQjtBQUFBLE1BWHJCQyx5QkFXcUIsUUFYckJBLHlCQVdxQjtBQUFBLE1BVnJCQyx1QkFVcUIsUUFWckJBLHVCQVVxQjtBQUFBLE1BVHJCQyxxQkFTcUIsUUFUckJBLHFCQVNxQjtBQUFBLE1BUnJCQyx1QkFRcUIsUUFSckJBLHVCQVFxQjtBQUFBLE1BUHJCQyxlQU9xQixRQVByQkEsZUFPcUI7QUFBQSxNQU5yQkMsZUFNcUIsUUFOckJBLGVBTXFCO0FBQUEsTUFMckJDLGFBS3FCLFFBTHJCQSxhQUtxQjtBQUFBLE1BSnJCQyxlQUlxQixRQUpyQkEsZUFJcUI7QUFBQSxNQUhyQkMsd0JBR3FCLFFBSHJCQSx3QkFHcUI7QUFBQSxNQUZyQkMsY0FFcUIsUUFGckJBLGNBRXFCO0FBQUEsTUFEckJDLGtCQUNxQixRQURyQkEsa0JBQ3FCO0FBQ3JCLE1BQU1DLGtCQUFrQixHQUN0QixPQUFPTixlQUFQLEtBQTJCLFFBQTNCLEdBQXNDTyxJQUFJLENBQUNDLEdBQUwsQ0FBU3BCLGtCQUFULEVBQTZCbUIs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LENBQUMvQjtBQURrRCxTQXRCL0Q7QUEwQkUsK0RBQXVEO0FBQ3JEZ0MsVUFBQUEsR0FBRyxFQUFFaEM7QUFEZ0QsU0ExQnpEO0FBOEJFLDJDQUFtQztBQUNqQ2lDLFVBQUFBLElBQUksRUFBRXRDLHdCQUQyQjtBQUVqQ3VDLFVBQUFBLE1BQU0sRUFBRXRDLHlCQUZ5QjtBQUdqQ3VDLFVBQUFBLFdBQVcsRUFBRXBDO0FBSG9CO0FBOUJyQztBQWpFRixPQXNHSywwQkFBWSx3QkFBWixFQUFzQztBQUN2QztBQUNFLHVDQUErQjtBQUM3QjtBQUNBLDJFQUFpRTtBQUMvRHNDLFlBQUFBLHNCQUFzQixFQUFFM0I7QUFEdUMsV0FGcEM7QUFNN0IscUVBQTJEO0FBQ3pENEIsWUFBQUEsbUJBQW1CLEVBQUU1QjtBQURvQztBQU45QjtBQURqQyxTQVlNLE9BQU9MLGFBQVAsS0FBeUIsUUFBekIsR0FDQTtBQUNFLG1DQUEyQjtBQUFFa0MsVUFBQUEsSUFBSSxFQUFFN0MsaUJBQWlCLEdBQUdXLGFBQXBCLEdBQW9DRztBQUE1QztBQUQ3QixPQURBLEdBSUEsRUFoQk4sQ0FEdUM7QUFvQnZDO0FBQ0UsdUNBQStCO0FBQzdCO0FBQ0EsMkVBQWlFO0FBQy9EZ0MsWUFBQUEsdUJBQXVCLEVBQUUxQjtBQURzQyxXQUZwQztBQU03QixxRUFBMkQ7QUFDekQyQixZQUFBQSxvQkFBb0IsRUFBRTNCO0FBRG1DO0FBTjlCO0FBRGpDLFNBWU0sT0FBT2IscUJBQVAsS0FBaUMsUUFBakMsR0FDQTtBQUNFLG1DQUEyQjtBQUFFeUMsVUFBQUEsS0FBSyxFQUFFM0MseUJBQXlCLEdBQUdFLHFCQUE1QixHQUFvRE87QUFBN0Q7QUFEN0IsT0FEQSxHQUlBLEVBaEJOO0FBcEJ1QyxLQUF0QyxDQXRHTDtBQURLLEdBQVA7QUFnSkQiLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFswLCAxLCAyXSB9XSAqL1xuaW1wb3J0IHsgU3RyaWN0U3R5bGVPcHRpb25zIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtYXBpJztcblxuaW1wb3J0IG1pcnJvclN0eWxlIGZyb20gJy4uL21pcnJvclN0eWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQnViYmxlU3R5bGUoe1xuICBidWJibGVCYWNrZ3JvdW5kLFxuICBidWJibGVCb3JkZXJDb2xvcixcbiAgYnViYmxlQm9yZGVyUmFkaXVzLFxuICBidWJibGVCb3JkZXJTdHlsZSxcbiAgYnViYmxlQm9yZGVyV2lkdGgsXG4gIGJ1YmJsZUZyb21Vc2VyQmFja2dyb3VuZCxcbiAgYnViYmxlRnJvbVVzZXJCb3JkZXJDb2xvcixcbiAgYnViYmxlRnJvbVVzZXJCb3JkZXJSYWRpdXMsXG4gIGJ1YmJsZUZyb21Vc2VyQm9yZGVyU3R5bGUsXG4gIGJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGgsXG4gIGJ1YmJsZUZyb21Vc2VyTnViT2Zmc2V0LFxuICBidWJibGVGcm9tVXNlck51YlNpemUsXG4gIGJ1YmJsZUZyb21Vc2VyVGV4dENvbG9yLFxuICBidWJibGVNaW5IZWlnaHQsXG4gIGJ1YmJsZU51Yk9mZnNldCxcbiAgYnViYmxlTnViU2l6ZSxcbiAgYnViYmxlVGV4dENvbG9yLFxuICBtZXNzYWdlQWN0aXZpdHlXb3JkQnJlYWssXG4gIHBhZGRpbmdSZWd1bGFyLFxuICB0cmFuc2l0aW9uRHVyYXRpb25cbn06IFN0cmljdFN0eWxlT3B0aW9ucykge1xuICBjb25zdCBib3ROdWJDb3JuZXJSYWRpdXMgPVxuICAgIHR5cGVvZiBidWJibGVOdWJPZmZzZXQgPT09ICdudW1iZXInID8gTWF0aC5taW4oYnViYmxlQm9yZGVyUmFkaXVzLCBNYXRoLmFicyhidWJibGVOdWJPZmZzZXQpKSA6IGJ1YmJsZUJvcmRlclJhZGl1cztcbiAgY29uc3QgdXNlck51YkNvcm5lclJhZGl1cyA9XG4gICAgdHlwZW9mIGJ1YmJsZUZyb21Vc2VyTnViT2Zmc2V0ID09PSAnbnVtYmVyJ1xuICAgICAgPyBNYXRoLm1pbihidWJibGVGcm9tVXNlckJvcmRlclJhZGl1cywgTWF0aC5hYnMoYnViYmxlRnJvbVVzZXJOdWJPZmZzZXQpKVxuICAgICAgOiBidWJibGVGcm9tVXNlckJvcmRlclJhZGl1cztcblxuICByZXR1cm4ge1xuICAgICcmLndlYmNoYXRfX2J1YmJsZSc6IHtcbiAgICAgICcmIC53ZWJjaGF0X19idWJibGVfX2NvbnRlbnQnOiB7XG4gICAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgICAgIG1hcmdpblJpZ2h0OiAwLFxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24sXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ21hcmdpbi1sZWZ0LCBtYXJnaW4tcmlnaHQnLFxuICAgICAgICB3b3JkQnJlYWs6IG1lc3NhZ2VBY3Rpdml0eVdvcmRCcmVha1xuICAgICAgfSxcblxuICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fbnViJzoge1xuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsIC8vIFRoaXMgc3R5bGUgaXMgZm9yIElFMTEgYmVjYXVzZSBpdCBkb2Vzbid0IHJlc3BlY3QgU1ZHIHZpZXdwb3J0XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgICB9LFxuXG4gICAgICAnJiAud2ViY2hhdF9fYnViYmxlX19udWItcGFkJzoge1xuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24sXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ3dpZHRoJyxcbiAgICAgICAgd2lkdGg6IDBcbiAgICAgIH0sXG5cbiAgICAgICcmLndlYmNoYXRfX2J1YmJsZS0taGlkZS1udWIsICYud2ViY2hhdF9fYnViYmxlLS1zaG93LW51Yic6IHtcbiAgICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fbnViLXBhZCc6IHtcbiAgICAgICAgICB3aWR0aDogcGFkZGluZ1JlZ3VsYXJcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1ydGwgLndlYmNoYXRfX2J1YmJsZV9fbnViJzoge1xuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgtMSwgMSknXG4gICAgICB9LFxuXG4gICAgICAnJjpub3QoLndlYmNoYXRfX2J1YmJsZS0tZnJvbS11c2VyKSc6IHtcbiAgICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fY29udGVudCc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBidWJibGVCYWNrZ3JvdW5kLFxuICAgICAgICAgIGJvcmRlckNvbG9yOiBidWJibGVCb3JkZXJDb2xvcixcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IGJ1YmJsZUJvcmRlclJhZGl1cyxcbiAgICAgICAgICBib3JkZXJTdHlsZTogYnViYmxlQm9yZGVyU3R5bGUsXG4gICAgICAgICAgYm9yZGVyV2lkdGg6IGJ1YmJsZUJvcmRlcldpZHRoLFxuICAgICAgICAgIGNvbG9yOiBidWJibGVUZXh0Q29sb3IsXG4gICAgICAgICAgbWluSGVpZ2h0OiBidWJibGVNaW5IZWlnaHQgLSBidWJibGVCb3JkZXJXaWR0aCAqIDJcbiAgICAgICAgfSxcblxuICAgICAgICAuLi4odHlwZW9mIGJ1YmJsZU51YlNpemUgPT09ICdudW1iZXInXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICcmIC53ZWJjaGF0X19idWJibGVfX251Yic6IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGJ1YmJsZU51YlNpemUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGJ1YmJsZU51YlNpemVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge30pLFxuXG4gICAgICAgICcmOm5vdCgud2ViY2hhdF9fYnViYmxlLS1udWItb24tdG9wKSAud2ViY2hhdF9fYnViYmxlX19udWInOiB7XG4gICAgICAgICAgYm90dG9tOiAtYnViYmxlTnViT2Zmc2V0XG4gICAgICAgIH0sXG5cbiAgICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1udWItb24tdG9wIC53ZWJjaGF0X19idWJibGVfX251Yic6IHtcbiAgICAgICAgICB0b3A6IGJ1YmJsZU51Yk9mZnNldFxuICAgICAgICB9LFxuXG4gICAgICAgICcmIC53ZWJjaGF0X19idWJibGVfX251Yi1vdXRsaW5lJzoge1xuICAgICAgICAgIGZpbGw6IGJ1YmJsZUJhY2tncm91bmQsXG4gICAgICAgICAgc3Ryb2tlOiBidWJibGVCb3JkZXJDb2xvcixcbiAgICAgICAgICBzdHJva2VXaWR0aDogYnViYmxlQm9yZGVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1mcm9tLXVzZXInOiB7XG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3ctcmV2ZXJzZScsXG5cbiAgICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fY29udGVudCc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBidWJibGVGcm9tVXNlckJhY2tncm91bmQsXG4gICAgICAgICAgYm9yZGVyQ29sb3I6IGJ1YmJsZUZyb21Vc2VyQm9yZGVyQ29sb3IsXG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiBidWJibGVGcm9tVXNlckJvcmRlclJhZGl1cyxcbiAgICAgICAgICBib3JkZXJTdHlsZTogYnViYmxlRnJvbVVzZXJCb3JkZXJTdHlsZSxcbiAgICAgICAgICBib3JkZXJXaWR0aDogYnViYmxlRnJvbVVzZXJCb3JkZXJXaWR0aCxcbiAgICAgICAgICBjb2xvcjogYnViYmxlRnJvbVVzZXJUZXh0Q29sb3IsXG4gICAgICAgICAgbWluSGVpZ2h0OiBidWJibGVNaW5IZWlnaHQgLSBidWJibGVGcm9tVXNlckJvcmRlcldpZHRoICogMlxuICAgICAgICB9LFxuXG4gICAgICAgIC4uLih0eXBlb2YgYnViYmxlRnJvbVVzZXJOdWJTaXplID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAnJiAud2ViY2hhdF9fYnViYmxlX19udWInOiB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBidWJibGVGcm9tVXNlck51YlNpemUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGJ1YmJsZUZyb21Vc2VyTnViU2l6ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7fSksXG5cbiAgICAgICAgJyY6bm90KC53ZWJjaGF0X19idWJibGUtLW51Yi1vbi10b3ApIC53ZWJjaGF0X19idWJibGVfX251Yic6IHtcbiAgICAgICAgICBib3R0b206IC1idWJibGVGcm9tVXNlck51Yk9mZnNldFxuICAgICAgICB9LFxuXG4gICAgICAgICcmLndlYmNoYXRfX2J1YmJsZS0tbnViLW9uLXRvcCAud2ViY2hhdF9fYnViYmxlX19udWInOiB7XG4gICAgICAgICAgdG9wOiBidWJibGVGcm9tVXNlck51Yk9mZnNldFxuICAgICAgICB9LFxuXG4gICAgICAgICcmIC53ZWJjaGF0X19idWJibGVfX251Yi1vdXRsaW5lJzoge1xuICAgICAgICAgIGZpbGw6IGJ1YmJsZUZyb21Vc2VyQmFja2dyb3VuZCxcbiAgICAgICAgICBzdHJva2U6IGJ1YmJsZUZyb21Vc2VyQm9yZGVyQ29sb3IsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IGJ1YmJsZUZyb21Vc2VyQm9yZGVyV2lkdGhcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLi4ubWlycm9yU3R5bGUoJyYud2ViY2hhdF9fYnViYmxlLS1ydGwnLCB7XG4gICAgICAgICcmOm5vdCgud2ViY2hhdF9fYnViYmxlLS1mcm9tLXVzZXIpJzoge1xuICAgICAgICAgICcmLndlYmNoYXRfX2J1YmJsZS0tc2hvdy1udWInOiB7XG4gICAgICAgICAgICAvLyBIaWRlIGJvcmRlciByYWRpdXMgaWYgdGhlcmUgaXMgYSBudWIgb24gdGhlIHRvcC9ib3R0b20gbGVmdCBjb3JuZXJcbiAgICAgICAgICAgICcmOm5vdCgud2ViY2hhdF9fYnViYmxlLS1udWItb24tdG9wKSAud2ViY2hhdF9fYnViYmxlX19jb250ZW50Jzoge1xuICAgICAgICAgICAgICBib3JkZXJCb3R0b21MZWZ0UmFkaXVzOiBib3ROdWJDb3JuZXJSYWRpdXNcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICcmLndlYmNoYXRfX2J1YmJsZS0tbnViLW9uLXRvcCAud2ViY2hhdF9fYnViYmxlX19jb250ZW50Jzoge1xuICAgICAgICAgICAgICBib3JkZXJUb3BMZWZ0UmFkaXVzOiBib3ROdWJDb3JuZXJSYWRpdXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgLi4uKHR5cGVvZiBidWJibGVOdWJTaXplID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fbnViJzogeyBsZWZ0OiBidWJibGVCb3JkZXJXaWR0aCAtIGJ1YmJsZU51YlNpemUgKyBwYWRkaW5nUmVndWxhciB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge30pXG4gICAgICAgIH0sXG5cbiAgICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1mcm9tLXVzZXInOiB7XG4gICAgICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1zaG93LW51Yic6IHtcbiAgICAgICAgICAgIC8vIEhpZGUgYm9yZGVyIHJhZGl1cyBpZiB0aGVyZSBpcyBhIG51YiBvbiB0aGUgdG9wL2JvdHRvbSByaWdodCBjb3JuZXJcbiAgICAgICAgICAgICcmOm5vdCgud2ViY2hhdF9fYnViYmxlLS1udWItb24tdG9wKSAud2ViY2hhdF9fYnViYmxlX19jb250ZW50Jzoge1xuICAgICAgICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1czogdXNlck51YkNvcm5lclJhZGl1c1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgJyYud2ViY2hhdF9fYnViYmxlLS1udWItb24tdG9wIC53ZWJjaGF0X19idWJibGVfX2NvbnRlbnQnOiB7XG4gICAgICAgICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzOiB1c2VyTnViQ29ybmVyUmFkaXVzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIC4uLih0eXBlb2YgYnViYmxlRnJvbVVzZXJOdWJTaXplID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgJyYgLndlYmNoYXRfX2J1YmJsZV9fbnViJzogeyByaWdodDogYnViYmxlRnJvbVVzZXJCb3JkZXJXaWR0aCAtIGJ1YmJsZUZyb21Vc2VyTnViU2l6ZSArIHBhZGRpbmdSZWd1bGFyIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH07XG59XG4iXX0=