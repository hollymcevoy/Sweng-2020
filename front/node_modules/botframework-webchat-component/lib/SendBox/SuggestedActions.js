"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.connectSuggestedActions = void 0;

var _botframeworkWebchatApi = require("botframework-webchat-api");

var _reactFilm = _interopRequireWildcard(require("react-film"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _ScreenReaderText = _interopRequireDefault(require("../ScreenReaderText"));

var _SuggestedAction = _interopRequireDefault(require("./SuggestedAction"));

var _useLocalizeAccessKey = _interopRequireDefault(require("../hooks/internal/useLocalizeAccessKey"));

var _useNonce3 = _interopRequireDefault(require("../hooks/internal/useNonce"));

var _useStyleSet7 = _interopRequireDefault(require("../hooks/useStyleSet"));

var _useStyleToEmotionObject = _interopRequireDefault(require("../hooks/internal/useStyleToEmotionObject"));

var _useSuggestedActionsAccessKey = _interopRequireDefault(require("../hooks/internal/useSuggestedActionsAccessKey"));

var _useUniqueId = _interopRequireDefault(require("../hooks/internal/useUniqueId"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

var useDirection = _botframeworkWebchatApi.hooks.useDirection,
    useLocalizer = _botframeworkWebchatApi.hooks.useLocalizer,
    useStyleOptions = _botframeworkWebchatApi.hooks.useStyleOptions;
var ROOT_STYLE = {
  '&.webchat__suggested-actions': {
    '&.webchat__suggested-actions--flow-layout .webchat__suggested-actions__flow-box': {
      display: 'flex',
      flexWrap: 'wrap'
    },
    '&.webchat__suggested-actions--stack-layout .webchat__suggested-actions__stack': {
      display: 'flex',
      flexDirection: 'column'
    }
  }
};

function suggestedActionText(_ref) {
  var displayText = _ref.displayText,
      title = _ref.title,
      type = _ref.type,
      value = _ref.value;

  if (type === 'messageBack') {
    return title || displayText;
  } else if (title) {
    return title;
  } else if (typeof value === 'string') {
    return value;
  }

  return JSON.stringify(value);
}

var connectSuggestedActions = function connectSuggestedActions() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(void 0, [function (_ref2) {
    var language = _ref2.language,
        suggestedActions = _ref2.suggestedActions;
    return {
      language: language,
      suggestedActions: suggestedActions
    };
  }].concat(selectors));
};

exports.connectSuggestedActions = connectSuggestedActions;

var SuggestedActionCarouselContainer = function SuggestedActionCarouselContainer(_ref3) {
  var children = _ref3.children,
      className = _ref3.className,
      screenReaderText = _ref3.screenReaderText;

  var _useStyleOptions = useStyleOptions(),
      _useStyleOptions2 = _slicedToArray(_useStyleOptions, 1),
      _useStyleOptions2$ = _useStyleOptions2[0],
      suggestedActionsCarouselFlipperBoxWidth = _useStyleOptions2$.suggestedActionsCarouselFlipperBoxWidth,
      suggestedActionsCarouselFlipperCursor = _useStyleOptions2$.suggestedActionsCarouselFlipperCursor,
      suggestedActionsCarouselFlipperSize = _useStyleOptions2$.suggestedActionsCarouselFlipperSize;

  var _useStyleSet = (0, _useStyleSet7.default)(),
      _useStyleSet2 = _slicedToArray(_useStyleSet, 1),
      suggestedActionsStyleSet = _useStyleSet2[0].suggestedActions;

  var _useDirection = useDirection(),
      _useDirection2 = _slicedToArray(_useDirection, 1),
      direction = _useDirection2[0];

  var _useNonce = (0, _useNonce3.default)(),
      _useNonce2 = _slicedToArray(_useNonce, 1),
      nonce = _useNonce2[0];

  var ariaLabelId = (0, _useUniqueId.default)('webchat__suggested-actions');
  var rootClassName = (0, _useStyleToEmotionObject.default)()(ROOT_STYLE) + '';
  var filmStyleSet = (0, _react.useMemo)(function () {
    return (0, _reactFilm.createBasicStyleSet)({
      autoHide: false,
      cursor: suggestedActionsCarouselFlipperCursor,
      flipperBoxWidth: suggestedActionsCarouselFlipperBoxWidth,
      flipperSize: suggestedActionsCarouselFlipperSize
    });
  }, [suggestedActionsCarouselFlipperBoxWidth, suggestedActionsCarouselFlipperCursor, suggestedActionsCarouselFlipperSize]);
  return (
    /*#__PURE__*/
    // TODO: The content of suggested actions should be the labelled by the activity.
    //       That means, when the user focus into the suggested actions, it should read similar to "Bot said, what's your preference of today? Suggested actions has items: apple button, orange button, banana button."
    _react.default.createElement("div", {
      "aria-labelledby": ariaLabelId,
      "aria-live": "polite",
      className: (0, _classnames.default)('webchat__suggested-actions', 'webchat__suggested-actions--carousel-layout', {
        'webchat__suggested-actions--rtl': direction === 'rtl'
      }, rootClassName, suggestedActionsStyleSet + '', (className || '') + ''),
      role: "status"
    }, /*#__PURE__*/_react.default.createElement(_ScreenReaderText.default, {
      id: ariaLabelId,
      text: screenReaderText
    }), !!children && !!_react.default.Children.count(children) && /*#__PURE__*/_react.default.createElement(_reactFilm.default, {
      autoCenter: false,
      className: "webchat__suggested-actions__carousel",
      dir: direction,
      flipperBlurFocusOnClick: true,
      nonce: nonce,
      showDots: false,
      showScrollBar: false,
      styleSet: filmStyleSet
    }, children))
  );
};

SuggestedActionCarouselContainer.defaultProps = {
  children: undefined,
  className: undefined
};
SuggestedActionCarouselContainer.propTypes = {
  children: _propTypes.default.any,
  className: _propTypes.default.string,
  screenReaderText: _propTypes.default.string.isRequired
};

var SuggestedActionFlowContainer = function SuggestedActionFlowContainer(_ref4) {
  var children = _ref4.children,
      className = _ref4.className,
      screenReaderText = _ref4.screenReaderText;

  var _useStyleSet3 = (0, _useStyleSet7.default)(),
      _useStyleSet4 = _slicedToArray(_useStyleSet3, 1),
      suggestedActionsStyleSet = _useStyleSet4[0].suggestedActions;

  var ariaLabelId = (0, _useUniqueId.default)('webchat__suggested-actions');
  var rootClassName = (0, _useStyleToEmotionObject.default)()(ROOT_STYLE) + '';
  return /*#__PURE__*/_react.default.createElement("div", {
    "aria-labelledby": ariaLabelId,
    "aria-live": "polite",
    className: (0, _classnames.default)('webchat__suggested-actions', 'webchat__suggested-actions--flow-layout', rootClassName, suggestedActionsStyleSet + '', (className || '') + ''),
    role: "status"
  }, /*#__PURE__*/_react.default.createElement(_ScreenReaderText.default, {
    id: ariaLabelId,
    text: screenReaderText
  }), !!children && !!_react.default.Children.count(children) && /*#__PURE__*/_react.default.createElement("div", {
    className: "webchat__suggested-actions__flow-box"
  }, _react.default.Children.map(children, function (child) {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "webchat__suggested-actions__flow-item-box"
    }, child);
  })));
};

SuggestedActionFlowContainer.defaultProps = {
  children: undefined,
  className: undefined
};
SuggestedActionFlowContainer.propTypes = {
  children: _propTypes.default.any,
  className: _propTypes.default.string,
  screenReaderText: _propTypes.default.string.isRequired
};

var SuggestedActionStackedContainer = function SuggestedActionStackedContainer(_ref5) {
  var children = _ref5.children,
      className = _ref5.className,
      screenReaderText = _ref5.screenReaderText;

  var _useStyleSet5 = (0, _useStyleSet7.default)(),
      _useStyleSet6 = _slicedToArray(_useStyleSet5, 1),
      suggestedActionsStyleSet = _useStyleSet6[0].suggestedActions;

  var ariaLabelId = (0, _useUniqueId.default)('webchat__suggested-actions');
  var rootClassName = (0, _useStyleToEmotionObject.default)()(ROOT_STYLE) + '';
  return /*#__PURE__*/_react.default.createElement("div", {
    "aria-labelledby": ariaLabelId,
    "aria-live": "polite",
    className: (0, _classnames.default)('webchat__suggested-actions', 'webchat__suggested-actions--stacked-layout', rootClassName, suggestedActionsStyleSet + '', (className || '') + ''),
    role: "status"
  }, /*#__PURE__*/_react.default.createElement(_ScreenReaderText.default, {
    id: ariaLabelId,
    text: screenReaderText
  }), !!children && !!_react.default.Children.count(children) && /*#__PURE__*/_react.default.createElement("div", {
    className: "webchat__suggested-actions__stack"
  }, children));
};

SuggestedActionStackedContainer.defaultProps = {
  children: undefined,
  className: undefined
};
SuggestedActionStackedContainer.propTypes = {
  children: _propTypes.default.any,
  className: _propTypes.default.string,
  screenReaderText: _propTypes.default.string.isRequired
};

var SuggestedActions = function SuggestedActions(_ref6) {
  var className = _ref6.className,
      _ref6$suggestedAction = _ref6.suggestedActions,
      suggestedActions = _ref6$suggestedAction === void 0 ? [] : _ref6$suggestedAction;

  var _useStyleOptions3 = useStyleOptions(),
      _useStyleOptions4 = _slicedToArray(_useStyleOptions3, 1),
      _useStyleOptions4$ = _useStyleOptions4[0],
      suggestedActionLayout = _useStyleOptions4$.suggestedActionLayout,
      suggestedActionsStackedLayoutButtonTextWrap = _useStyleOptions4$.suggestedActionsStackedLayoutButtonTextWrap;

  var _useSuggestedActionsA = (0, _useSuggestedActionsAccessKey.default)(),
      _useSuggestedActionsA2 = _slicedToArray(_useSuggestedActionsA, 1),
      accessKey = _useSuggestedActionsA2[0];

  var hideEmptyRef = (0, _react.useRef)(true);
  var localize = useLocalizer();
  var localizeAccessKey = (0, _useLocalizeAccessKey.default)();
  var screenReaderText = localize('SUGGESTED_ACTIONS_ALT', suggestedActions.length ? accessKey ? localize('SUGGESTED_ACTIONS_ALT_HAS_CONTENT_AND_ACCESS_KEY', localizeAccessKey(accessKey)) : localize('SUGGESTED_ACTIONS_ALT_HAS_CONTENT') : localize('SUGGESTED_ACTIONS_ALT_NO_CONTENT'));
  var children = suggestedActions.map(function (cardAction, index) {
    var _ref7 = cardAction,
        displayText = _ref7.displayText,
        image = _ref7.image,
        imageAltText = _ref7.imageAltText,
        text = _ref7.text,
        title = _ref7.title,
        type = _ref7.type,
        value = _ref7.value;
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "webchat__suggested-actions__item-box",
      key: index
    }, /*#__PURE__*/_react.default.createElement(_SuggestedAction.default, {
      buttonText: suggestedActionText({
        displayText: displayText,
        title: title,
        type: type,
        value: value
      }),
      className: "webchat__suggested-actions__button",
      displayText: displayText,
      image: image,
      imageAlt: imageAltText,
      text: text,
      textClassName: suggestedActionLayout === 'stacked' && suggestedActionsStackedLayoutButtonTextWrap ? 'webchat__suggested-actions__button-text-stacked-text-wrap' : 'webchat__suggested-actions__button-text',
      type: type,
      value: value
    }));
  }); // (Related to #4021)
  //
  // To improve accessibility UX, if there are no suggested actions, and this container was never shown.
  // Then, avoid rendering the alt-text "Suggested Actions Container: Is empty".
  //
  // This is to reduce the narration of "Is empty".
  //
  // After any suggested actions were shown during the lifetime of this container, then we will
  // continue to start showing "Suggested Actions Container: Is empty" when the container is empty.

  if (!children.length && hideEmptyRef.current) {
    return null;
  } // Otherwise, if we have rendered once, we will continue to render "Is empty".


  hideEmptyRef.current = false;

  if (suggestedActionLayout === 'flow') {
    return /*#__PURE__*/_react.default.createElement(SuggestedActionFlowContainer, {
      className: className,
      screenReaderText: screenReaderText
    }, children);
  } else if (suggestedActionLayout === 'stacked') {
    return /*#__PURE__*/_react.default.createElement(SuggestedActionStackedContainer, {
      className: className,
      screenReaderText: screenReaderText
    }, children);
  }

  return /*#__PURE__*/_react.default.createElement(SuggestedActionCarouselContainer, {
    className: className,
    screenReaderText: screenReaderText
  }, children);
};

SuggestedActions.defaultProps = {
  className: ''
};
SuggestedActions.propTypes = {
  className: _propTypes.default.string,
  // TypeScript class is not mappable to PropTypes.func
  // @ts-ignore
  suggestedActions: _propTypes.default.arrayOf(_propTypes.default.shape({
    displayText: _propTypes.default.string,
    image: _propTypes.default.string,
    imageAltText: _propTypes.default.string,
    text: _propTypes.default.string,
    title: _propTypes.default.string,
    type: _propTypes.default.string.isRequired,
    value: _propTypes.default.any
  })).isRequired
};

var _default = connectSuggestedActions()(SuggestedActions);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L1N1Z2dlc3RlZEFjdGlvbnMudHN4Il0sIm5hbWVzIjpbInVzZURpcmVjdGlvbiIsImhvb2tzIiwidXNlTG9jYWxpemVyIiwidXNlU3R5bGVPcHRpb25zIiwiUk9PVF9TVFlMRSIsImRpc3BsYXkiLCJmbGV4V3JhcCIsImZsZXhEaXJlY3Rpb24iLCJzdWdnZXN0ZWRBY3Rpb25UZXh0IiwiZGlzcGxheVRleHQiLCJ0aXRsZSIsInR5cGUiLCJ2YWx1ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25uZWN0U3VnZ2VzdGVkQWN0aW9ucyIsInNlbGVjdG9ycyIsImNvbm5lY3RUb1dlYkNoYXQiLCJsYW5ndWFnZSIsInN1Z2dlc3RlZEFjdGlvbnMiLCJTdWdnZXN0ZWRBY3Rpb25DYXJvdXNlbENvbnRhaW5lciIsImNoaWxkcmVuIiwiY2xhc3NOYW1lIiwic2NyZWVuUmVhZGVyVGV4dCIsInN1Z2dlc3RlZEFjdGlvbnNDYXJvdXNlbEZsaXBwZXJCb3hXaWR0aCIsInN1Z2dlc3RlZEFjdGlvbnNDYXJvdXNlbEZsaXBwZXJDdXJzb3IiLCJzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyU2l6ZSIsInN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCIsImRpcmVjdGlvbiIsIm5vbmNlIiwiYXJpYUxhYmVsSWQiLCJyb290Q2xhc3NOYW1lIiwiZmlsbVN0eWxlU2V0IiwiYXV0b0hpZGUiLCJjdXJzb3IiLCJmbGlwcGVyQm94V2lkdGgiLCJmbGlwcGVyU2l6ZSIsIlJlYWN0IiwiQ2hpbGRyZW4iLCJjb3VudCIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImFueSIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJTdWdnZXN0ZWRBY3Rpb25GbG93Q29udGFpbmVyIiwibWFwIiwiY2hpbGQiLCJTdWdnZXN0ZWRBY3Rpb25TdGFja2VkQ29udGFpbmVyIiwiU3VnZ2VzdGVkQWN0aW9ucyIsInN1Z2dlc3RlZEFjdGlvbkxheW91dCIsInN1Z2dlc3RlZEFjdGlvbnNTdGFja2VkTGF5b3V0QnV0dG9uVGV4dFdyYXAiLCJhY2Nlc3NLZXkiLCJoaWRlRW1wdHlSZWYiLCJsb2NhbGl6ZSIsImxvY2FsaXplQWNjZXNzS2V5IiwibGVuZ3RoIiwiY2FyZEFjdGlvbiIsImluZGV4IiwiaW1hZ2UiLCJpbWFnZUFsdFRleHQiLCJ0ZXh0IiwiY3VycmVudCIsImFycmF5T2YiLCJzaGFwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsSUFBUUEsWUFBUixHQUF3REMsNkJBQXhELENBQVFELFlBQVI7QUFBQSxJQUFzQkUsWUFBdEIsR0FBd0RELDZCQUF4RCxDQUFzQkMsWUFBdEI7QUFBQSxJQUFvQ0MsZUFBcEMsR0FBd0RGLDZCQUF4RCxDQUFvQ0UsZUFBcEM7QUFFQSxJQUFNQyxVQUFVLEdBQUc7QUFDakIsa0NBQWdDO0FBQzlCLHVGQUFtRjtBQUNqRkMsTUFBQUEsT0FBTyxFQUFFLE1BRHdFO0FBRWpGQyxNQUFBQSxRQUFRLEVBQUU7QUFGdUUsS0FEckQ7QUFNOUIscUZBQWlGO0FBQy9FRCxNQUFBQSxPQUFPLEVBQUUsTUFEc0U7QUFFL0VFLE1BQUFBLGFBQWEsRUFBRTtBQUZnRTtBQU5uRDtBQURmLENBQW5COztBQWNBLFNBQVNDLG1CQUFULE9BQWtFO0FBQUEsTUFBbkNDLFdBQW1DLFFBQW5DQSxXQUFtQztBQUFBLE1BQXRCQyxLQUFzQixRQUF0QkEsS0FBc0I7QUFBQSxNQUFmQyxJQUFlLFFBQWZBLElBQWU7QUFBQSxNQUFUQyxLQUFTLFFBQVRBLEtBQVM7O0FBQ2hFLE1BQUlELElBQUksS0FBSyxhQUFiLEVBQTRCO0FBQzFCLFdBQU9ELEtBQUssSUFBSUQsV0FBaEI7QUFDRCxHQUZELE1BRU8sSUFBSUMsS0FBSixFQUFXO0FBQ2hC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QUczQjtBQUNBO0FBQ0ExQixFQUFBQSxnQkFBZ0IsRUFBRXdCLG1CQUFVc0IsT0FBVixDQUNoQnRCLG1CQUFVdUIsS0FBVixDQUFnQjtBQUNkekQsSUFBQUEsV0FBVyxFQUFFa0MsbUJBQVVFLE1BRFQ7QUFFZGdCLElBQUFBLEtBQUssRUFBRWxCLG1CQUFVRSxNQUZIO0FBR2RpQixJQUFBQSxZQUFZLEVBQUVuQixtQkFBVUUsTUFIVjtBQUlka0IsSUFBQUEsSUFBSSxFQUFFcEIsbUJBQVVFLE1BSkY7QUFLZG5DLElBQUFBLEtBQUssRUFBRWlDLG1CQUFVRSxNQUxIO0FBTWRsQyxJQUFBQSxJQUFJLEVBQUVnQyxtQkFBVUUsTUFBVixDQUFpQkMsVUFOVDtBQU9kbEMsSUFBQUEsS0FBSyxFQUFFK0IsbUJBQVVDO0FBUEgsR0FBaEIsQ0FEZ0IsRUFVaEJFO0FBZnlCLENBQTdCOztlQWtCZS9CLHVCQUF1QixHQUFHb0MsZ0JBQUgsQyIsInNvdXJjZVJvb3QiOiJjb21wb25lbnQ6Ly8vIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IHJlYWN0L25vLWFycmF5LWluZGV4LWtleTogXCJvZmZcIiAqL1xuXG5pbXBvcnQgeyBEaXJlY3RMaW5lQ2FyZEFjdGlvbiB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvcmUnO1xuaW1wb3J0IHsgaG9va3MgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1hcGknO1xuaW1wb3J0IEJhc2ljRmlsbSwgeyBjcmVhdGVCYXNpY1N0eWxlU2V0IGFzIGNyZWF0ZUJhc2ljU3R5bGVTZXRGb3JSZWFjdEZpbG0gfSBmcm9tICdyZWFjdC1maWxtJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgY29ubmVjdFRvV2ViQ2hhdCBmcm9tICcuLi9jb25uZWN0VG9XZWJDaGF0JztcbmltcG9ydCBTY3JlZW5SZWFkZXJUZXh0IGZyb20gJy4uL1NjcmVlblJlYWRlclRleHQnO1xuaW1wb3J0IFN1Z2dlc3RlZEFjdGlvbiBmcm9tICcuL1N1Z2dlc3RlZEFjdGlvbic7XG5pbXBvcnQgdXNlTG9jYWxpemVBY2Nlc3NLZXkgZnJvbSAnLi4vaG9va3MvaW50ZXJuYWwvdXNlTG9jYWxpemVBY2Nlc3NLZXknO1xuaW1wb3J0IHVzZU5vbmNlIGZyb20gJy4uL2hvb2tzL2ludGVybmFsL3VzZU5vbmNlJztcbmltcG9ydCB1c2VTdHlsZVNldCBmcm9tICcuLi9ob29rcy91c2VTdHlsZVNldCc7XG5pbXBvcnQgdXNlU3R5bGVUb0Vtb3Rpb25PYmplY3QgZnJvbSAnLi4vaG9va3MvaW50ZXJuYWwvdXNlU3R5bGVUb0Vtb3Rpb25PYmplY3QnO1xuaW1wb3J0IHVzZVN1Z2dlc3RlZEFjdGlvbnNBY2Nlc3NLZXkgZnJvbSAnLi4vaG9va3MvaW50ZXJuYWwvdXNlU3VnZ2VzdGVkQWN0aW9uc0FjY2Vzc0tleSc7XG5pbXBvcnQgdXNlVW5pcXVlSWQgZnJvbSAnLi4vaG9va3MvaW50ZXJuYWwvdXNlVW5pcXVlSWQnO1xuXG5jb25zdCB7IHVzZURpcmVjdGlvbiwgdXNlTG9jYWxpemVyLCB1c2VTdHlsZU9wdGlvbnMgfSA9IGhvb2tzO1xuXG5jb25zdCBST09UX1NUWUxFID0ge1xuICAnJi53ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9ucyc6IHtcbiAgICAnJi53ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9ucy0tZmxvdy1sYXlvdXQgLndlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zX19mbG93LWJveCc6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhXcmFwOiAnd3JhcCdcbiAgICB9LFxuXG4gICAgJyYud2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnMtLXN0YWNrLWxheW91dCAud2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnNfX3N0YWNrJzoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbidcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHN1Z2dlc3RlZEFjdGlvblRleHQoeyBkaXNwbGF5VGV4dCwgdGl0bGUsIHR5cGUsIHZhbHVlIH0pIHtcbiAgaWYgKHR5cGUgPT09ICdtZXNzYWdlQmFjaycpIHtcbiAgICByZXR1cm4gdGl0bGUgfHwgZGlzcGxheVRleHQ7XG4gIH0gZWxzZSBpZiAodGl0bGUpIHtcbiAgICByZXR1cm4gdGl0bGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG59XG5cbmNvbnN0IGNvbm5lY3RTdWdnZXN0ZWRBY3Rpb25zID0gKC4uLnNlbGVjdG9ycykgPT5cbiAgY29ubmVjdFRvV2ViQ2hhdChcbiAgICAoeyBsYW5ndWFnZSwgc3VnZ2VzdGVkQWN0aW9ucyB9KSA9PiAoe1xuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zXG4gICAgfSksXG4gICAgLi4uc2VsZWN0b3JzXG4gICk7XG5cbmNvbnN0IFN1Z2dlc3RlZEFjdGlvbkNhcm91c2VsQ29udGFpbmVyID0gKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgc2NyZWVuUmVhZGVyVGV4dCB9KSA9PiB7XG4gIGNvbnN0IFtcbiAgICB7XG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyQm94V2lkdGgsXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyQ3Vyc29yLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uc0Nhcm91c2VsRmxpcHBlclNpemVcbiAgICB9XG4gIF0gPSB1c2VTdHlsZU9wdGlvbnMoKTtcbiAgY29uc3QgW3sgc3VnZ2VzdGVkQWN0aW9uczogc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IH1dID0gdXNlU3R5bGVTZXQoKTtcbiAgY29uc3QgW2RpcmVjdGlvbl0gPSB1c2VEaXJlY3Rpb24oKTtcbiAgY29uc3QgW25vbmNlXSA9IHVzZU5vbmNlKCk7XG4gIGNvbnN0IGFyaWFMYWJlbElkID0gdXNlVW5pcXVlSWQoJ3dlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zJyk7XG4gIGNvbnN0IHJvb3RDbGFzc05hbWUgPSB1c2VTdHlsZVRvRW1vdGlvbk9iamVjdCgpKFJPT1RfU1RZTEUpICsgJyc7XG5cbiAgY29uc3QgZmlsbVN0eWxlU2V0ID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgY3JlYXRlQmFzaWNTdHlsZVNldEZvclJlYWN0RmlsbSh7XG4gICAgICAgIGF1dG9IaWRlOiBmYWxzZSxcbiAgICAgICAgY3Vyc29yOiBzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyQ3Vyc29yLFxuICAgICAgICBmbGlwcGVyQm94V2lkdGg6IHN1Z2dlc3RlZEFjdGlvbnNDYXJvdXNlbEZsaXBwZXJCb3hXaWR0aCxcbiAgICAgICAgZmxpcHBlclNpemU6IHN1Z2dlc3RlZEFjdGlvbnNDYXJvdXNlbEZsaXBwZXJTaXplXG4gICAgICB9KSxcbiAgICBbXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyQm94V2lkdGgsXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zQ2Fyb3VzZWxGbGlwcGVyQ3Vyc29yLFxuICAgICAgc3VnZ2VzdGVkQWN0aW9uc0Nhcm91c2VsRmxpcHBlclNpemVcbiAgICBdXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICAvLyBUT0RPOiBUaGUgY29udGVudCBvZiBzdWdnZXN0ZWQgYWN0aW9ucyBzaG91bGQgYmUgdGhlIGxhYmVsbGVkIGJ5IHRoZSBhY3Rpdml0eS5cbiAgICAvLyAgICAgICBUaGF0IG1lYW5zLCB3aGVuIHRoZSB1c2VyIGZvY3VzIGludG8gdGhlIHN1Z2dlc3RlZCBhY3Rpb25zLCBpdCBzaG91bGQgcmVhZCBzaW1pbGFyIHRvIFwiQm90IHNhaWQsIHdoYXQncyB5b3VyIHByZWZlcmVuY2Ugb2YgdG9kYXk/IFN1Z2dlc3RlZCBhY3Rpb25zIGhhcyBpdGVtczogYXBwbGUgYnV0dG9uLCBvcmFuZ2UgYnV0dG9uLCBiYW5hbmEgYnV0dG9uLlwiXG4gICAgPGRpdlxuICAgICAgYXJpYS1sYWJlbGxlZGJ5PXthcmlhTGFiZWxJZH1cbiAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICd3ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9ucycsXG4gICAgICAgICd3ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9ucy0tY2Fyb3VzZWwtbGF5b3V0JyxcbiAgICAgICAgeyAnd2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnMtLXJ0bCc6IGRpcmVjdGlvbiA9PT0gJ3J0bCcgfSxcbiAgICAgICAgcm9vdENsYXNzTmFtZSxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0ICsgJycsXG4gICAgICAgIChjbGFzc05hbWUgfHwgJycpICsgJydcbiAgICAgICl9XG4gICAgICByb2xlPVwic3RhdHVzXCJcbiAgICA+XG4gICAgICA8U2NyZWVuUmVhZGVyVGV4dCBpZD17YXJpYUxhYmVsSWR9IHRleHQ9e3NjcmVlblJlYWRlclRleHR9IC8+XG4gICAgICB7ISFjaGlsZHJlbiAmJiAhIVJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSAmJiAoXG4gICAgICAgIDxCYXNpY0ZpbG1cbiAgICAgICAgICBhdXRvQ2VudGVyPXtmYWxzZX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9uc19fY2Fyb3VzZWxcIlxuICAgICAgICAgIGRpcj17ZGlyZWN0aW9ufVxuICAgICAgICAgIGZsaXBwZXJCbHVyRm9jdXNPbkNsaWNrPXt0cnVlfVxuICAgICAgICAgIG5vbmNlPXtub25jZX1cbiAgICAgICAgICBzaG93RG90cz17ZmFsc2V9XG4gICAgICAgICAgc2hvd1Njcm9sbEJhcj17ZmFsc2V9XG4gICAgICAgICAgc3R5bGVTZXQ9e2ZpbG1TdHlsZVNldH1cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9CYXNpY0ZpbG0+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuU3VnZ2VzdGVkQWN0aW9uQ2Fyb3VzZWxDb250YWluZXIuZGVmYXVsdFByb3BzID0ge1xuICBjaGlsZHJlbjogdW5kZWZpbmVkLFxuICBjbGFzc05hbWU6IHVuZGVmaW5lZFxufTtcblxuU3VnZ2VzdGVkQWN0aW9uQ2Fyb3VzZWxDb250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzY3JlZW5SZWFkZXJUZXh0OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbmNvbnN0IFN1Z2dlc3RlZEFjdGlvbkZsb3dDb250YWluZXIgPSAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lLCBzY3JlZW5SZWFkZXJUZXh0IH0pID0+IHtcbiAgY29uc3QgW3sgc3VnZ2VzdGVkQWN0aW9uczogc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0IH1dID0gdXNlU3R5bGVTZXQoKTtcbiAgY29uc3QgYXJpYUxhYmVsSWQgPSB1c2VVbmlxdWVJZCgnd2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnMnKTtcbiAgY29uc3Qgcm9vdENsYXNzTmFtZSA9IHVzZVN0eWxlVG9FbW90aW9uT2JqZWN0KCkoUk9PVF9TVFlMRSkgKyAnJztcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGFyaWEtbGFiZWxsZWRieT17YXJpYUxhYmVsSWR9XG4gICAgICBhcmlhLWxpdmU9XCJwb2xpdGVcIlxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAnd2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnMnLFxuICAgICAgICAnd2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnMtLWZsb3ctbGF5b3V0JyxcbiAgICAgICAgcm9vdENsYXNzTmFtZSxcbiAgICAgICAgc3VnZ2VzdGVkQWN0aW9uc1N0eWxlU2V0ICsgJycsXG4gICAgICAgIChjbGFzc05hbWUgfHwgJycpICsgJydcbiAgICAgICl9XG4gICAgICByb2xlPVwic3RhdHVzXCJcbiAgICA+XG4gICAgICA8U2NyZWVuUmVhZGVyVGV4dCBpZD17YXJpYUxhYmVsSWR9IHRleHQ9e3NjcmVlblJlYWRlclRleHR9IC8+XG4gICAgICB7ISFjaGlsZHJlbiAmJiAhIVJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnNfX2Zsb3ctYm94XCI+XG4gICAgICAgICAge1JlYWN0LkNoaWxkcmVuLm1hcChjaGlsZHJlbiwgY2hpbGQgPT4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3ZWJjaGF0X19zdWdnZXN0ZWQtYWN0aW9uc19fZmxvdy1pdGVtLWJveFwiPntjaGlsZH08L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuU3VnZ2VzdGVkQWN0aW9uRmxvd0NvbnRhaW5lci5kZWZhdWx0UHJvcHMgPSB7XG4gIGNoaWxkcmVuOiB1bmRlZmluZWQsXG4gIGNsYXNzTmFtZTogdW5kZWZpbmVkXG59O1xuXG5TdWdnZXN0ZWRBY3Rpb25GbG93Q29udGFpbmVyLnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc2NyZWVuUmVhZGVyVGV4dDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG59O1xuXG5jb25zdCBTdWdnZXN0ZWRBY3Rpb25TdGFja2VkQ29udGFpbmVyID0gKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgc2NyZWVuUmVhZGVyVGV4dCB9KSA9PiB7XG4gIGNvbnN0IFt7IHN1Z2dlc3RlZEFjdGlvbnM6IHN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCB9XSA9IHVzZVN0eWxlU2V0KCk7XG4gIGNvbnN0IGFyaWFMYWJlbElkID0gdXNlVW5pcXVlSWQoJ3dlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zJyk7XG4gIGNvbnN0IHJvb3RDbGFzc05hbWUgPSB1c2VTdHlsZVRvRW1vdGlvbk9iamVjdCgpKFJPT1RfU1RZTEUpICsgJyc7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBhcmlhLWxhYmVsbGVkYnk9e2FyaWFMYWJlbElkfVxuICAgICAgYXJpYS1saXZlPVwicG9saXRlXCJcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgJ3dlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zJyxcbiAgICAgICAgJ3dlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zLS1zdGFja2VkLWxheW91dCcsXG4gICAgICAgIHJvb3RDbGFzc05hbWUsXG4gICAgICAgIHN1Z2dlc3RlZEFjdGlvbnNTdHlsZVNldCArICcnLFxuICAgICAgICAoY2xhc3NOYW1lIHx8ICcnKSArICcnXG4gICAgICApfVxuICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgPlxuICAgICAgPFNjcmVlblJlYWRlclRleHQgaWQ9e2FyaWFMYWJlbElkfSB0ZXh0PXtzY3JlZW5SZWFkZXJUZXh0fSAvPlxuICAgICAgeyEhY2hpbGRyZW4gJiYgISFSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zX19zdGFja1wiPntjaGlsZHJlbn08L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5TdWdnZXN0ZWRBY3Rpb25TdGFja2VkQ29udGFpbmVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgY2hpbGRyZW46IHVuZGVmaW5lZCxcbiAgY2xhc3NOYW1lOiB1bmRlZmluZWRcbn07XG5cblN1Z2dlc3RlZEFjdGlvblN0YWNrZWRDb250YWluZXIucHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzY3JlZW5SZWFkZXJUZXh0OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbnR5cGUgU3VnZ2VzdGVkQWN0aW9uc1Byb3BzID0ge1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHN1Z2dlc3RlZEFjdGlvbnM/OiBEaXJlY3RMaW5lQ2FyZEFjdGlvbltdO1xufTtcblxuY29uc3QgU3VnZ2VzdGVkQWN0aW9uczogRkM8U3VnZ2VzdGVkQWN0aW9uc1Byb3BzPiA9ICh7IGNsYXNzTmFtZSwgc3VnZ2VzdGVkQWN0aW9ucyA9IFtdIH0pID0+IHtcbiAgY29uc3QgW3sgc3VnZ2VzdGVkQWN0aW9uTGF5b3V0LCBzdWdnZXN0ZWRBY3Rpb25zU3RhY2tlZExheW91dEJ1dHRvblRleHRXcmFwIH1dID0gdXNlU3R5bGVPcHRpb25zKCk7XG4gIGNvbnN0IFthY2Nlc3NLZXldID0gdXNlU3VnZ2VzdGVkQWN0aW9uc0FjY2Vzc0tleSgpO1xuICBjb25zdCBoaWRlRW1wdHlSZWYgPSB1c2VSZWYodHJ1ZSk7XG4gIGNvbnN0IGxvY2FsaXplID0gdXNlTG9jYWxpemVyKCk7XG4gIGNvbnN0IGxvY2FsaXplQWNjZXNzS2V5ID0gdXNlTG9jYWxpemVBY2Nlc3NLZXkoKTtcblxuICBjb25zdCBzY3JlZW5SZWFkZXJUZXh0ID0gbG9jYWxpemUoXG4gICAgJ1NVR0dFU1RFRF9BQ1RJT05TX0FMVCcsXG4gICAgc3VnZ2VzdGVkQWN0aW9ucy5sZW5ndGhcbiAgICAgID8gYWNjZXNzS2V5XG4gICAgICAgID8gbG9jYWxpemUoJ1NVR0dFU1RFRF9BQ1RJT05TX0FMVF9IQVNfQ09OVEVOVF9BTkRfQUNDRVNTX0tFWScsIGxvY2FsaXplQWNjZXNzS2V5KGFjY2Vzc0tleSkpXG4gICAgICAgIDogbG9jYWxpemUoJ1NVR0dFU1RFRF9BQ1RJT05TX0FMVF9IQVNfQ09OVEVOVCcpXG4gICAgICA6IGxvY2FsaXplKCdTVUdHRVNURURfQUNUSU9OU19BTFRfTk9fQ09OVEVOVCcpXG4gICk7XG5cbiAgY29uc3QgY2hpbGRyZW4gPSBzdWdnZXN0ZWRBY3Rpb25zLm1hcCgoY2FyZEFjdGlvbiwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IGRpc3BsYXlUZXh0LCBpbWFnZSwgaW1hZ2VBbHRUZXh0LCB0ZXh0LCB0aXRsZSwgdHlwZSwgdmFsdWUgfSA9IGNhcmRBY3Rpb24gYXMge1xuICAgICAgZGlzcGxheVRleHQ/OiBzdHJpbmc7XG4gICAgICBpbWFnZT86IHN0cmluZztcbiAgICAgIGltYWdlQWx0VGV4dD86IHN0cmluZztcbiAgICAgIHRleHQ/OiBzdHJpbmc7XG4gICAgICB0aXRsZT86IHN0cmluZztcbiAgICAgIHR5cGU6XG4gICAgICAgIHwgJ2NhbGwnXG4gICAgICAgIHwgJ2Rvd25sb2FkRmlsZSdcbiAgICAgICAgfCAnaW1CYWNrJ1xuICAgICAgICB8ICdtZXNzYWdlQmFjaydcbiAgICAgICAgfCAnb3BlblVybCdcbiAgICAgICAgfCAncGxheUF1ZGlvJ1xuICAgICAgICB8ICdwbGF5VmlkZW8nXG4gICAgICAgIHwgJ3Bvc3RCYWNrJ1xuICAgICAgICB8ICdzaG93SW1hZ2UnXG4gICAgICAgIHwgJ3NpZ25pbic7XG4gICAgICB2YWx1ZT86IHsgW2tleTogc3RyaW5nXTogYW55IH0gfCBzdHJpbmc7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zX19pdGVtLWJveFwiIGtleT17aW5kZXh9PlxuICAgICAgICA8U3VnZ2VzdGVkQWN0aW9uXG4gICAgICAgICAgYnV0dG9uVGV4dD17c3VnZ2VzdGVkQWN0aW9uVGV4dCh7IGRpc3BsYXlUZXh0LCB0aXRsZSwgdHlwZSwgdmFsdWUgfSl9XG4gICAgICAgICAgY2xhc3NOYW1lPVwid2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnNfX2J1dHRvblwiXG4gICAgICAgICAgZGlzcGxheVRleHQ9e2Rpc3BsYXlUZXh0fVxuICAgICAgICAgIGltYWdlPXtpbWFnZX1cbiAgICAgICAgICBpbWFnZUFsdD17aW1hZ2VBbHRUZXh0fVxuICAgICAgICAgIHRleHQ9e3RleHR9XG4gICAgICAgICAgdGV4dENsYXNzTmFtZT17XG4gICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb25MYXlvdXQgPT09ICdzdGFja2VkJyAmJiBzdWdnZXN0ZWRBY3Rpb25zU3RhY2tlZExheW91dEJ1dHRvblRleHRXcmFwXG4gICAgICAgICAgICAgID8gJ3dlYmNoYXRfX3N1Z2dlc3RlZC1hY3Rpb25zX19idXR0b24tdGV4dC1zdGFja2VkLXRleHQtd3JhcCdcbiAgICAgICAgICAgICAgOiAnd2ViY2hhdF9fc3VnZ2VzdGVkLWFjdGlvbnNfX2J1dHRvbi10ZXh0J1xuICAgICAgICAgIH1cbiAgICAgICAgICB0eXBlPXt0eXBlfVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0pO1xuXG4gIC8vIChSZWxhdGVkIHRvICM0MDIxKVxuICAvL1xuICAvLyBUbyBpbXByb3ZlIGFjY2Vzc2liaWxpdHkgVVgsIGlmIHRoZXJlIGFyZSBubyBzdWdnZXN0ZWQgYWN0aW9ucywgYW5kIHRoaXMgY29udGFpbmVyIHdhcyBuZXZlciBzaG93bi5cbiAgLy8gVGhlbiwgYXZvaWQgcmVuZGVyaW5nIHRoZSBhbHQtdGV4dCBcIlN1Z2dlc3RlZCBBY3Rpb25zIENvbnRhaW5lcjogSXMgZW1wdHlcIi5cbiAgLy9cbiAgLy8gVGhpcyBpcyB0byByZWR1Y2UgdGhlIG5hcnJhdGlvbiBvZiBcIklzIGVtcHR5XCIuXG4gIC8vXG4gIC8vIEFmdGVyIGFueSBzdWdnZXN0ZWQgYWN0aW9ucyB3ZXJlIHNob3duIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhpcyBjb250YWluZXIsIHRoZW4gd2Ugd2lsbFxuICAvLyBjb250aW51ZSB0byBzdGFydCBzaG93aW5nIFwiU3VnZ2VzdGVkIEFjdGlvbnMgQ29udGFpbmVyOiBJcyBlbXB0eVwiIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBlbXB0eS5cbiAgaWYgKCFjaGlsZHJlbi5sZW5ndGggJiYgaGlkZUVtcHR5UmVmLmN1cnJlbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgaWYgd2UgaGF2ZSByZW5kZXJlZCBvbmNlLCB3ZSB3aWxsIGNvbnRpbnVlIHRvIHJlbmRlciBcIklzIGVtcHR5XCIuXG4gIGhpZGVFbXB0eVJlZi5jdXJyZW50ID0gZmFsc2U7XG5cbiAgaWYgKHN1Z2dlc3RlZEFjdGlvbkxheW91dCA9PT0gJ2Zsb3cnKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTdWdnZXN0ZWRBY3Rpb25GbG93Q29udGFpbmVyIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBzY3JlZW5SZWFkZXJUZXh0PXtzY3JlZW5SZWFkZXJUZXh0fT5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9TdWdnZXN0ZWRBY3Rpb25GbG93Q29udGFpbmVyPlxuICAgICk7XG4gIH0gZWxzZSBpZiAoc3VnZ2VzdGVkQWN0aW9uTGF5b3V0ID09PSAnc3RhY2tlZCcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFN1Z2dlc3RlZEFjdGlvblN0YWNrZWRDb250YWluZXIgY2xhc3NOYW1lPXtjbGFzc05hbWV9IHNjcmVlblJlYWRlclRleHQ9e3NjcmVlblJlYWRlclRleHR9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L1N1Z2dlc3RlZEFjdGlvblN0YWNrZWRDb250YWluZXI+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFN1Z2dlc3RlZEFjdGlvbkNhcm91c2VsQ29udGFpbmVyIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBzY3JlZW5SZWFkZXJUZXh0PXtzY3JlZW5SZWFkZXJUZXh0fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1N1Z2dlc3RlZEFjdGlvbkNhcm91c2VsQ29udGFpbmVyPlxuICApO1xufTtcblxuU3VnZ2VzdGVkQWN0aW9ucy5kZWZhdWx0UHJvcHMgPSB7XG4gIGNsYXNzTmFtZTogJydcbn07XG5cblN1Z2dlc3RlZEFjdGlvbnMucHJvcFR5cGVzID0ge1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgLy8gVHlwZVNjcmlwdCBjbGFzcyBpcyBub3QgbWFwcGFibGUgdG8gUHJvcFR5cGVzLmZ1bmNcbiAgLy8gQHRzLWlnbm9yZVxuICBzdWdnZXN0ZWRBY3Rpb25zOiBQcm9wVHlwZXMuYXJyYXlPZihcbiAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgZGlzcGxheVRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICBpbWFnZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIGltYWdlQWx0VGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIHRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgIHZhbHVlOiBQcm9wVHlwZXMuYW55XG4gICAgfSlcbiAgKS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0U3VnZ2VzdGVkQWN0aW9ucygpKFN1Z2dlc3RlZEFjdGlvbnMpO1xuXG5leHBvcnQgeyBjb25uZWN0U3VnZ2VzdGVkQWN0aW9ucyB9O1xuIl19