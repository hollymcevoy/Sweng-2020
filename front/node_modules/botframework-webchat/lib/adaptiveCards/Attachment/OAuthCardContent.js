"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _AdaptiveCardBuilder = _interopRequireDefault(require("./AdaptiveCardBuilder"));

var _AdaptiveCardRenderer = _interopRequireDefault(require("./AdaptiveCardRenderer"));

var _useAdaptiveCardsPackage = _interopRequireDefault(require("../hooks/useAdaptiveCardsPackage"));

var _useStyleOptions3 = _interopRequireDefault(require("../../hooks/useStyleOptions"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var useDirection = _botframeworkWebchatComponent.hooks.useDirection;

var OAuthCardContent = function OAuthCardContent(_ref) {
  var actionPerformedClassName = _ref.actionPerformedClassName,
      content = _ref.content,
      disabled = _ref.disabled;

  var _useAdaptiveCardsPack = (0, _useAdaptiveCardsPackage.default)(),
      _useAdaptiveCardsPack2 = (0, _slicedToArray2.default)(_useAdaptiveCardsPack, 1),
      adaptiveCardsPackage = _useAdaptiveCardsPack2[0];

  var _useDirection = useDirection(),
      _useDirection2 = (0, _slicedToArray2.default)(_useDirection, 1),
      direction = _useDirection2[0];

  var _useStyleOptions = (0, _useStyleOptions3.default)(),
      _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
      styleOptions = _useStyleOptions2[0];

  var builtCard = (0, _react.useMemo)(function () {
    if (content) {
      var builder = new _AdaptiveCardBuilder.default(adaptiveCardsPackage, styleOptions, direction);
      builder.addCommonHeaders(content);
      builder.addButtons(content.buttons, true);
      return builder.card;
    }
  }, [adaptiveCardsPackage, content, direction, styleOptions]);
  return /*#__PURE__*/_react.default.createElement(_AdaptiveCardRenderer.default, {
    actionPerformedClassName: actionPerformedClassName,
    adaptiveCard: builtCard,
    disabled: disabled
  });
};

OAuthCardContent.defaultProps = {
  actionPerformedClassName: '',
  disabled: undefined
};
OAuthCardContent.propTypes = {
  actionPerformedClassName: _propTypes.default.string,
  content: _propTypes.default.shape({
    buttons: _propTypes.default.array
  }).isRequired,
  disabled: _propTypes.default.bool
};
var _default = OAuthCardContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvT0F1dGhDYXJkQ29udGVudC50c3giXSwibmFtZXMiOlsidXNlRGlyZWN0aW9uIiwiaG9va3MiLCJPQXV0aENhcmRDb250ZW50IiwiYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lIiwiY29udGVudCIsImRpc2FibGVkIiwiYWRhcHRpdmVDYXJkc1BhY2thZ2UiLCJkaXJlY3Rpb24iLCJzdHlsZU9wdGlvbnMiLCJidWlsdENhcmQiLCJidWlsZGVyIiwiQWRhcHRpdmVDYXJkQnVpbGRlciIsImFkZENvbW1vbkhlYWRlcnMiLCJhZGRCdXR0b25zIiwiYnV0dG9ucyIsImNhcmQiLCJkZWZhdWx0UHJvcHMiLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJzaGFwZSIsImFycmF5IiwiaXNSZXF1aXJlZCIsImJvb2wiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsSUFBUUEsWUFBUixHQUF5QkMsbUNBQXpCLENBQVFELFlBQVI7O0FBUUEsSUFBTUUsZ0JBQTJDLEdBQUcsU0FBOUNBLGdCQUE4QyxPQUFxRDtBQUFBLE1BQWxEQyx3QkFBa0QsUUFBbERBLHdCQUFrRDtBQUFBLE1BQXhCQyxPQUF3QixRQUF4QkEsT0FBd0I7QUFBQSxNQUFmQyxRQUFlLFFBQWZBLFFBQWU7O0FBQ3ZHLDhCQUErQix1Q0FBL0I7QUFBQTtBQUFBLE1BQU9DLG9CQUFQOztBQUNBLHNCQUFvQk4sWUFBWSxFQUFoQztBQUFBO0FBQUEsTUFBT08sU0FBUDs7QUFDQSx5QkFBdUIsZ0NBQXZCO0FBQUE7QUFBQSxNQUFPQyxZQUFQOztBQUVBLE1BQU1DLFNBQVMsR0FBRyxvQkFBUSxZQUFNO0FBQzlCLFFBQUlMLE9BQUosRUFBYTtBQUNYLFVBQU1NLE9BQU8sR0FBRyxJQUFJQyw0QkFBSixDQUF3Qkwsb0JBQXhCLEVBQThDRSxZQUE5QyxFQUE0REQsU0FBNUQsQ0FBaEI7QUFFQUcsTUFBQUEsT0FBTyxDQUFDRSxnQkFBUixDQUF5QlIsT0FBekI7QUFDQU0sTUFBQUEsT0FBTyxDQUFDRyxVQUFSLENBQW1CVCxPQUFPLENBQUNVLE9BQTNCLEVBQW9DLElBQXBDO0FBRUEsYUFBT0osT0FBTyxDQUFDSyxJQUFmO0FBQ0Q7QUFDRixHQVRpQixFQVNmLENBQUNULG9CQUFELEVBQXVCRixPQUF2QixFQUFnQ0csU0FBaEMsRUFBMkNDLFlBQTNDLENBVGUsQ0FBbEI7QUFXQSxzQkFDRSw2QkFBQyw2QkFBRDtBQUNFLElBQUEsd0JBQXdCLEVBQUVMLHdCQUQ1QjtBQUVFLElBQUEsWUFBWSxFQUFFTSxTQUZoQjtBQUdFLElBQUEsUUFBUSxFQUFFSjtBQUhaLElBREY7QUFPRCxDQXZCRDs7QUF5QkFILGdCQUFnQixDQUFDYyxZQUFqQixHQUFnQztBQUM5QmIsRUFBQUEsd0JBQXdCLEVBQUUsRUFESTtBQUU5QkUsRUFBQUEsUUFBUSxFQUFFWTtBQUZvQixDQUFoQztBQUtBZixnQkFBZ0IsQ0FBQ2dCLFNBQWpCLEdBQTZCO0FBQzNCZixFQUFBQSx3QkFBd0IsRUFBRWdCLG1CQUFVQyxNQURUO0FBRTNCaEIsRUFBQUEsT0FBTyxFQUFFZSxtQkFBVUUsS0FBVixDQUFnQjtBQUN2QlAsSUFBQUEsT0FBTyxFQUFFSyxtQkFBVUc7QUFESSxHQUFoQixFQUVOQyxVQUp3QjtBQUszQmxCLEVBQUFBLFFBQVEsRUFBRWMsbUJBQVVLO0FBTE8sQ0FBN0I7ZUFRZXRCLGdCIiwic291cmNlUm9vdCI6ImJ1bmRsZTovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RMaW5lT0F1dGhDYXJkIH0gZnJvbSAnYm90ZnJhbWV3b3JrLXdlYmNoYXQtY29yZSc7XG5pbXBvcnQgeyBob29rcyB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvbXBvbmVudCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0LCB7IEZDLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgQWRhcHRpdmVDYXJkQnVpbGRlciBmcm9tICcuL0FkYXB0aXZlQ2FyZEJ1aWxkZXInO1xuaW1wb3J0IEFkYXB0aXZlQ2FyZFJlbmRlcmVyIGZyb20gJy4vQWRhcHRpdmVDYXJkUmVuZGVyZXInO1xuaW1wb3J0IHVzZUFkYXB0aXZlQ2FyZHNQYWNrYWdlIGZyb20gJy4uL2hvb2tzL3VzZUFkYXB0aXZlQ2FyZHNQYWNrYWdlJztcbmltcG9ydCB1c2VTdHlsZU9wdGlvbnMgZnJvbSAnLi4vLi4vaG9va3MvdXNlU3R5bGVPcHRpb25zJztcblxuY29uc3QgeyB1c2VEaXJlY3Rpb24gfSA9IGhvb2tzO1xuXG50eXBlIE9BdXRoQ2FyZENvbnRlbnRQcm9wcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lPzogc3RyaW5nO1xuICBjb250ZW50OiBEaXJlY3RMaW5lT0F1dGhDYXJkO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG59O1xuXG5jb25zdCBPQXV0aENhcmRDb250ZW50OiBGQzxPQXV0aENhcmRDb250ZW50UHJvcHM+ID0gKHsgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lLCBjb250ZW50LCBkaXNhYmxlZCB9KSA9PiB7XG4gIGNvbnN0IFthZGFwdGl2ZUNhcmRzUGFja2FnZV0gPSB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSgpO1xuICBjb25zdCBbZGlyZWN0aW9uXSA9IHVzZURpcmVjdGlvbigpO1xuICBjb25zdCBbc3R5bGVPcHRpb25zXSA9IHVzZVN0eWxlT3B0aW9ucygpO1xuXG4gIGNvbnN0IGJ1aWx0Q2FyZCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb25zdCBidWlsZGVyID0gbmV3IEFkYXB0aXZlQ2FyZEJ1aWxkZXIoYWRhcHRpdmVDYXJkc1BhY2thZ2UsIHN0eWxlT3B0aW9ucywgZGlyZWN0aW9uKTtcblxuICAgICAgYnVpbGRlci5hZGRDb21tb25IZWFkZXJzKGNvbnRlbnQpO1xuICAgICAgYnVpbGRlci5hZGRCdXR0b25zKGNvbnRlbnQuYnV0dG9ucywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkc1BhY2thZ2UsIGNvbnRlbnQsIGRpcmVjdGlvbiwgc3R5bGVPcHRpb25zXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8QWRhcHRpdmVDYXJkUmVuZGVyZXJcbiAgICAgIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZT17YWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lfVxuICAgICAgYWRhcHRpdmVDYXJkPXtidWlsdENhcmR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgLz5cbiAgKTtcbn07XG5cbk9BdXRoQ2FyZENvbnRlbnQuZGVmYXVsdFByb3BzID0ge1xuICBhY3Rpb25QZXJmb3JtZWRDbGFzc05hbWU6ICcnLFxuICBkaXNhYmxlZDogdW5kZWZpbmVkXG59O1xuXG5PQXV0aENhcmRDb250ZW50LnByb3BUeXBlcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb250ZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGJ1dHRvbnM6IFByb3BUeXBlcy5hcnJheVxuICB9KS5pc1JlcXVpcmVkLFxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2xcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE9BdXRoQ2FyZENvbnRlbnQ7XG4iXX0=