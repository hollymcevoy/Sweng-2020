"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _toArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toArray"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _AdaptiveCardBuilder = _interopRequireDefault(require("./AdaptiveCardBuilder"));

var _AdaptiveCardRenderer = _interopRequireDefault(require("./AdaptiveCardRenderer"));

var _useAdaptiveCardsPackage = _interopRequireDefault(require("../hooks/useAdaptiveCardsPackage"));

var _useStyleOptions3 = _interopRequireDefault(require("../../hooks/useStyleOptions"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/* eslint no-magic-numbers: ["error", { "ignore": [0, 1, 10, 15, 25, 50, 75] }] */
var useDirection = _botframeworkWebchatComponent.hooks.useDirection,
    useLocalizer = _botframeworkWebchatComponent.hooks.useLocalizer;

function nullOrUndefined(obj) {
  return obj === null || typeof obj === 'undefined';
}

var ReceiptCardContent = function ReceiptCardContent(_ref) {
  var actionPerformedClassName = _ref.actionPerformedClassName,
      content = _ref.content,
      disabled = _ref.disabled;

  var _useAdaptiveCardsPack = (0, _useAdaptiveCardsPackage.default)(),
      _useAdaptiveCardsPack2 = (0, _slicedToArray2.default)(_useAdaptiveCardsPack, 1),
      adaptiveCardsPackage = _useAdaptiveCardsPack2[0];

  var _useDirection = useDirection(),
      _useDirection2 = (0, _slicedToArray2.default)(_useDirection, 1),
      direction = _useDirection2[0];

  var _useStyleOptions = (0, _useStyleOptions3.default)(),
      _useStyleOptions2 = (0, _slicedToArray2.default)(_useStyleOptions, 1),
      styleOptions = _useStyleOptions2[0];

  var localize = useLocalizer();
  var taxText = localize('RECEIPT_CARD_TAX');
  var totalText = localize('RECEIPT_CARD_TOTAL');
  var vatText = localize('RECEIPT_CARD_VAT');
  var builtCard = (0, _react.useMemo)(function () {
    var builder = new _AdaptiveCardBuilder.default(adaptiveCardsPackage, styleOptions, direction);
    var HorizontalAlignment = adaptiveCardsPackage.HorizontalAlignment,
        TextSize = adaptiveCardsPackage.TextSize,
        TextWeight = adaptiveCardsPackage.TextWeight;
    var buttons = content.buttons,
        facts = content.facts,
        items = content.items,
        tax = content.tax,
        title = content.title,
        total = content.total,
        vat = content.vat;
    var richCardWrapTitle = styleOptions.richCardWrapTitle;

    if (content) {
      builder.addTextBlock(title, {
        size: TextSize.Medium,
        weight: TextWeight.Bolder,
        wrap: richCardWrapTitle
      });

      if (facts) {
        var _builder$addColumnSet = builder.addColumnSet([75, 25]),
            _builder$addColumnSet2 = (0, _slicedToArray2.default)(_builder$addColumnSet, 2),
            firstFactColumn = _builder$addColumnSet2[0],
            lastFactColumn = _builder$addColumnSet2[1];

        facts.map(function (_ref2) {
          var key = _ref2.key,
              value = _ref2.value;
          builder.addTextBlock(key, {
            size: TextSize.Medium
          }, firstFactColumn);
          builder.addTextBlock(value, {
            size: TextSize.Medium,
            horizontalAlignment: HorizontalAlignment.Right
          }, lastFactColumn);
        });
      }

      items && items.map(function (_ref3) {
        var _ref3$image = _ref3.image;
        _ref3$image = _ref3$image === void 0 ? {} : _ref3$image;
        var alt = _ref3$image.alt,
            imageTap = _ref3$image.tap,
            url = _ref3$image.url,
            price = _ref3.price,
            quantity = _ref3.quantity,
            subtitle = _ref3.subtitle,
            tap = _ref3.tap,
            text = _ref3.text,
            title = _ref3.title;
        var itemColumns;

        if (url) {
          var _builder$addColumnSet3 = builder.addColumnSet([15, 75, 10]),
              _builder$addColumnSet4 = (0, _toArray2.default)(_builder$addColumnSet3),
              itemImageColumn = _builder$addColumnSet4[0],
              columns = _builder$addColumnSet4.slice(1);

          itemColumns = columns;
          builder.addImage(url, itemImageColumn, imageTap, alt);
        } else {
          itemColumns = builder.addColumnSet([75, 25], undefined, tap && tap);
        }

        var _itemColumns = itemColumns,
            _itemColumns2 = (0, _slicedToArray2.default)(_itemColumns, 2),
            itemTitleColumn = _itemColumns2[0],
            itemPriceColumn = _itemColumns2[1];

        builder.addTextBlock(quantity ? "".concat(title, " &times; ").concat(quantity) : title, {
          size: TextSize.Medium,
          weight: TextWeight.Bolder,
          wrap: richCardWrapTitle
        }, itemTitleColumn);
        builder.addTextBlock(subtitle, {
          size: TextSize.Medium,
          wrap: richCardWrapTitle
        }, itemTitleColumn);
        builder.addTextBlock(price, {
          horizontalAlignment: HorizontalAlignment.Right
        }, itemPriceColumn);

        if (text) {
          builder.addTextBlock(text, {
            size: TextSize.Medium,
            wrap: richCardWrapTitle
          }, itemTitleColumn);
        }
      });

      if (!nullOrUndefined(vat)) {
        var vatCol = builder.addColumnSet([75, 25]);
        builder.addTextBlock(vatText, {
          size: TextSize.Medium,
          weight: TextWeight.Bolder
        }, vatCol[0]);
        builder.addTextBlock(vat, {
          horizontalAlignment: HorizontalAlignment.Right
        }, vatCol[1]);
      }

      if (!nullOrUndefined(tax)) {
        var taxCol = builder.addColumnSet([75, 25]);
        builder.addTextBlock(taxText, {
          size: TextSize.Medium,
          weight: TextWeight.Bolder
        }, taxCol[0]);
        builder.addTextBlock(tax, {
          horizontalAlignment: HorizontalAlignment.Right
        }, taxCol[1]);
      }

      if (!nullOrUndefined(total)) {
        var totalCol = builder.addColumnSet([75, 25]);
        builder.addTextBlock(totalText, {
          size: TextSize.Medium,
          weight: TextWeight.Bolder
        }, totalCol[0]);
        builder.addTextBlock(total, {
          horizontalAlignment: HorizontalAlignment.Right,
          size: TextSize.Medium,
          weight: TextWeight.Bolder
        }, totalCol[1]);
      }

      builder.addButtons(buttons);
      return builder.card;
    }
  }, [adaptiveCardsPackage, content, direction, styleOptions, taxText, totalText, vatText]);
  return /*#__PURE__*/_react.default.createElement(_AdaptiveCardRenderer.default, {
    actionPerformedClassName: actionPerformedClassName,
    adaptiveCard: builtCard,
    disabled: disabled,
    tapAction: content && content.tap
  });
};

ReceiptCardContent.defaultProps = {
  actionPerformedClassName: '',
  disabled: undefined
};
ReceiptCardContent.propTypes = {
  actionPerformedClassName: _propTypes.default.string,
  content: _propTypes.default.shape({
    buttons: _propTypes.default.array,
    facts: _propTypes.default.arrayOf(_propTypes.default.shape({
      key: _propTypes.default.string,
      value: _propTypes.default.string
    })),
    items: _propTypes.default.arrayOf(_propTypes.default.shape({
      image: _propTypes.default.shape({
        alt: _propTypes.default.string.isRequired,
        tap: _propTypes.default.any,
        url: _propTypes.default.string.isRequired
      }),
      price: _propTypes.default.string.isRequired,
      quantity: _propTypes.default.string,
      subtitle: _propTypes.default.string,
      tap: _propTypes.default.any,
      text: _propTypes.default.string,
      title: _propTypes.default.string.isRequired
    })),
    tap: _propTypes.default.any,
    tax: _propTypes.default.string,
    title: _propTypes.default.string,
    total: _propTypes.default.string,
    vat: _propTypes.default.string
  }).isRequired,
  disabled: _propTypes.default.bool
};
var _default = ReceiptCardContent;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hZGFwdGl2ZUNhcmRzL0F0dGFjaG1lbnQvUmVjZWlwdENhcmRDb250ZW50LnRzeCJdLCJuYW1lcyI6WyJ1c2VEaXJlY3Rpb24iLCJob29rcyIsInVzZUxvY2FsaXplciIsIm51bGxPclVuZGVmaW5lZCIsIm9iaiIsIlJlY2VpcHRDYXJkQ29udGVudCIsImFjdGlvblBlcmZvcm1lZENsYXNzTmFtZSIsImNvbnRlbnQiLCJkaXNhYmxlZCIsImFkYXB0aXZlQ2FyZHNQYWNrYWdlIiwiZGlyZWN0aW9uIiwic3R5bGVPcHRpb25zIiwibG9jYWxpemUiLCJ0YXhUZXh0IiwidG90YWxUZXh0IiwidmF0VGV4dCIsImJ1aWx0Q2FyZCIsImJ1aWxkZXIiLCJBZGFwdGl2ZUNhcmRCdWlsZGVyIiwiSG9yaXpvbnRhbEFsaWdubWVudCIsIlRleHRTaXplIiwiVGV4dFdlaWdodCIsImJ1dHRvbnMiLCJmYWN0cyIsIml0ZW1zIiwidGF4IiwidGl0bGUiLCJ0b3RhbCIsInZhdCIsInJpY2hDYXJkV3JhcFRpdGxlIiwiYWRkVGV4dEJsb2NrIiwic2l6ZSIsIk1lZGl1bSIsIndlaWdodCIsIkJvbGRlciIsIndyYXAiLCJhZGRDb2x1bW5TZXQiLCJmaXJzdEZhY3RDb2x1bW4iLCJsYXN0RmFjdENvbHVtbiIsIm1hcCIsImtleSIsInZhbHVlIiwiaG9yaXpvbnRhbEFsaWdubWVudCIsIlJpZ2h0IiwiaW1hZ2UiLCJhbHQiLCJpbWFnZVRhcCIsInRhcCIsInVybCIsInByaWNlIiwicXVhbnRpdHkiLCJzdWJ0aXRsZSIsInRleHQiLCJpdGVtQ29sdW1ucyIsIml0ZW1JbWFnZUNvbHVtbiIsImNvbHVtbnMiLCJhZGRJbWFnZSIsInVuZGVmaW5lZCIsIml0ZW1UaXRsZUNvbHVtbiIsIml0ZW1QcmljZUNvbHVtbiIsInZhdENvbCIsInRheENvbCIsInRvdGFsQ29sIiwiYWRkQnV0dG9ucyIsImNhcmQiLCJkZWZhdWx0UHJvcHMiLCJwcm9wVHlwZXMiLCJQcm9wVHlw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QXpCTTtBQTBCdkJ6QyxJQUFBQSxLQUFLLEVBQUV3QyxtQkFBVUMsTUExQk07QUEyQnZCeEMsSUFBQUEsR0FBRyxFQUFFdUMsbUJBQVVDO0FBM0JRLEdBQWhCLEVBNEJOSSxVQTlCMEI7QUErQjdCaEUsRUFBQUEsUUFBUSxFQUFFMkQsbUJBQVVPO0FBL0JTLENBQS9CO2VBa0NlckUsa0IiLCJzb3VyY2VSb290IjoiYnVuZGxlOi8vLyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1tYWdpYy1udW1iZXJzOiBbXCJlcnJvclwiLCB7IFwiaWdub3JlXCI6IFswLCAxLCAxMCwgMTUsIDI1LCA1MCwgNzVdIH1dICovXG5cbmltcG9ydCB7IERpcmVjdExpbmVSZWNlaXB0Q2FyZCB9IGZyb20gJ2JvdGZyYW1ld29yay13ZWJjaGF0LWNvcmUnO1xuaW1wb3J0IHsgaG9va3MgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb21wb25lbnQnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCwgeyBGQywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEFkYXB0aXZlQ2FyZEJ1aWxkZXIgZnJvbSAnLi9BZGFwdGl2ZUNhcmRCdWlsZGVyJztcbmltcG9ydCBBZGFwdGl2ZUNhcmRSZW5kZXJlciBmcm9tICcuL0FkYXB0aXZlQ2FyZFJlbmRlcmVyJztcbmltcG9ydCB1c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSBmcm9tICcuLi9ob29rcy91c2VBZGFwdGl2ZUNhcmRzUGFja2FnZSc7XG5pbXBvcnQgdXNlU3R5bGVPcHRpb25zIGZyb20gJy4uLy4uL2hvb2tzL3VzZVN0eWxlT3B0aW9ucyc7XG5cbmNvbnN0IHsgdXNlRGlyZWN0aW9uLCB1c2VMb2NhbGl6ZXIgfSA9IGhvb2tzO1xuXG5mdW5jdGlvbiBudWxsT3JVbmRlZmluZWQob2JqKSB7XG4gIHJldHVybiBvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbnR5cGUgUmVjZWlwdENhcmRDb250ZW50UHJvcHMgPSB7XG4gIGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZT86IHN0cmluZztcbiAgY29udGVudDogRGlyZWN0TGluZVJlY2VpcHRDYXJkO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG59O1xuXG5jb25zdCBSZWNlaXB0Q2FyZENvbnRlbnQ6IEZDPFJlY2VpcHRDYXJkQ29udGVudFByb3BzPiA9ICh7IGFjdGlvblBlcmZvcm1lZENsYXNzTmFtZSwgY29udGVudCwgZGlzYWJsZWQgfSkgPT4ge1xuICBjb25zdCBbYWRhcHRpdmVDYXJkc1BhY2thZ2VdID0gdXNlQWRhcHRpdmVDYXJkc1BhY2thZ2UoKTtcbiAgY29uc3QgW2RpcmVjdGlvbl0gPSB1c2VEaXJlY3Rpb24oKTtcbiAgY29uc3QgW3N0eWxlT3B0aW9uc10gPSB1c2VTdHlsZU9wdGlvbnMoKTtcbiAgY29uc3QgbG9jYWxpemUgPSB1c2VMb2NhbGl6ZXIoKTtcblxuICBjb25zdCB0YXhUZXh0ID0gbG9jYWxpemUoJ1JFQ0VJUFRfQ0FSRF9UQVgnKTtcbiAgY29uc3QgdG90YWxUZXh0ID0gbG9jYWxpemUoJ1JFQ0VJUFRfQ0FSRF9UT1RBTCcpO1xuICBjb25zdCB2YXRUZXh0ID0gbG9jYWxpemUoJ1JFQ0VJUFRfQ0FSRF9WQVQnKTtcblxuICBjb25zdCBidWlsdENhcmQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBidWlsZGVyID0gbmV3IEFkYXB0aXZlQ2FyZEJ1aWxkZXIoYWRhcHRpdmVDYXJkc1BhY2thZ2UsIHN0eWxlT3B0aW9ucywgZGlyZWN0aW9uKTtcbiAgICBjb25zdCB7IEhvcml6b250YWxBbGlnbm1lbnQsIFRleHRTaXplLCBUZXh0V2VpZ2h0IH0gPSBhZGFwdGl2ZUNhcmRzUGFja2FnZTtcbiAgICBjb25zdCB7IGJ1dHRvbnMsIGZhY3RzLCBpdGVtcywgdGF4LCB0aXRsZSwgdG90YWwsIHZhdCB9ID0gY29udGVudDtcbiAgICBjb25zdCB7IHJpY2hDYXJkV3JhcFRpdGxlIH0gPSBzdHlsZU9wdGlvbnM7XG5cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgYnVpbGRlci5hZGRUZXh0QmxvY2sodGl0bGUsIHsgc2l6ZTogVGV4dFNpemUuTWVkaXVtLCB3ZWlnaHQ6IFRleHRXZWlnaHQuQm9sZGVyLCB3cmFwOiByaWNoQ2FyZFdyYXBUaXRsZSB9KTtcblxuICAgICAgaWYgKGZhY3RzKSB7XG4gICAgICAgIGNvbnN0IFtmaXJzdEZhY3RDb2x1bW4sIGxhc3RGYWN0Q29sdW1uXSA9IGJ1aWxkZXIuYWRkQ29sdW1uU2V0KFs3NSwgMjVdKTtcblxuICAgICAgICBmYWN0cy5tYXAoKHsga2V5LCB2YWx1ZSB9KSA9PiB7XG4gICAgICAgICAgYnVpbGRlci5hZGRUZXh0QmxvY2soa2V5LCB7IHNpemU6IFRleHRTaXplLk1lZGl1bSB9LCBmaXJzdEZhY3RDb2x1bW4pO1xuICAgICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB7IHNpemU6IFRleHRTaXplLk1lZGl1bSwgaG9yaXpvbnRhbEFsaWdubWVudDogSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodCB9LFxuICAgICAgICAgICAgbGFzdEZhY3RDb2x1bW5cbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaXRlbXMgJiZcbiAgICAgICAgaXRlbXMubWFwKFxuICAgICAgICAgICh7XG4gICAgICAgICAgICBpbWFnZTogeyBhbHQsIHRhcDogaW1hZ2VUYXAsIHVybCB9ID0ge30sXG4gICAgICAgICAgICBwcmljZSxcbiAgICAgICAgICAgIHF1YW50aXR5LFxuICAgICAgICAgICAgc3VidGl0bGUsXG4gICAgICAgICAgICB0YXAsXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgdGl0bGVcbiAgICAgICAgICB9OiB7XG4gICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICBhbHQ/OiBzdHJpbmc7XG4gICAgICAgICAgICAgIHRhcD86IGFueTtcbiAgICAgICAgICAgICAgdXJsPzogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByaWNlOiBzdHJpbmc7XG4gICAgICAgICAgICBxdWFudGl0eTogc3RyaW5nO1xuICAgICAgICAgICAgc3VidGl0bGU6IHN0cmluZztcbiAgICAgICAgICAgIHRhcDogYW55O1xuICAgICAgICAgICAgdGV4dDogc3RyaW5nO1xuICAgICAgICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgICAgICB9KSA9PiB7XG4gICAgICAgICAgICBsZXQgaXRlbUNvbHVtbnM7XG5cbiAgICAgICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgICAgY29uc3QgW2l0ZW1JbWFnZUNvbHVtbiwgLi4uY29sdW1uc10gPSBidWlsZGVyLmFkZENvbHVtblNldChbMTUsIDc1LCAxMF0pO1xuXG4gICAgICAgICAgICAgIGl0ZW1Db2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgICAgYnVpbGRlci5hZGRJbWFnZSh1cmwsIGl0ZW1JbWFnZUNvbHVtbiwgaW1hZ2VUYXAsIGFsdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpdGVtQ29sdW1ucyA9IGJ1aWxkZXIuYWRkQ29sdW1uU2V0KFs3NSwgMjVdLCB1bmRlZmluZWQsIHRhcCAmJiB0YXApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBbaXRlbVRpdGxlQ29sdW1uLCBpdGVtUHJpY2VDb2x1bW5dID0gaXRlbUNvbHVtbnM7XG5cbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKFxuICAgICAgICAgICAgICBxdWFudGl0eSA/IGAke3RpdGxlfSAmdGltZXM7ICR7cXVhbnRpdHl9YCA6IHRpdGxlLFxuICAgICAgICAgICAgICB7IHNpemU6IFRleHRTaXplLk1lZGl1bSwgd2VpZ2h0OiBUZXh0V2VpZ2h0LkJvbGRlciwgd3JhcDogcmljaENhcmRXcmFwVGl0bGUgfSxcbiAgICAgICAgICAgICAgaXRlbVRpdGxlQ29sdW1uXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnVpbGRlci5hZGRUZXh0QmxvY2soc3VidGl0bGUsIHsgc2l6ZTogVGV4dFNpemUuTWVkaXVtLCB3cmFwOiByaWNoQ2FyZFdyYXBUaXRsZSB9LCBpdGVtVGl0bGVDb2x1bW4pO1xuICAgICAgICAgICAgYnVpbGRlci5hZGRUZXh0QmxvY2socHJpY2UsIHsgaG9yaXpvbnRhbEFsaWdubWVudDogSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodCB9LCBpdGVtUHJpY2VDb2x1bW4pO1xuXG4gICAgICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgICBidWlsZGVyLmFkZFRleHRCbG9jayh0ZXh0LCB7IHNpemU6IFRleHRTaXplLk1lZGl1bSwgd3JhcDogcmljaENhcmRXcmFwVGl0bGUgfSwgaXRlbVRpdGxlQ29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgIGlmICghbnVsbE9yVW5kZWZpbmVkKHZhdCkpIHtcbiAgICAgICAgY29uc3QgdmF0Q29sID0gYnVpbGRlci5hZGRDb2x1bW5TZXQoWzc1LCAyNV0pO1xuXG4gICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKHZhdFRleHQsIHsgc2l6ZTogVGV4dFNpemUuTWVkaXVtLCB3ZWlnaHQ6IFRleHRXZWlnaHQuQm9sZGVyIH0sIHZhdENvbFswXSk7XG4gICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKHZhdCwgeyBob3Jpem9udGFsQWxpZ25tZW50OiBIb3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0IH0sIHZhdENvbFsxXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbnVsbE9yVW5kZWZpbmVkKHRheCkpIHtcbiAgICAgICAgY29uc3QgdGF4Q29sID0gYnVpbGRlci5hZGRDb2x1bW5TZXQoWzc1LCAyNV0pO1xuXG4gICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKHRheFRleHQsIHsgc2l6ZTogVGV4dFNpemUuTWVkaXVtLCB3ZWlnaHQ6IFRleHRXZWlnaHQuQm9sZGVyIH0sIHRheENvbFswXSk7XG4gICAgICAgIGJ1aWxkZXIuYWRkVGV4dEJsb2NrKHRheCwgeyBob3Jpem9udGFsQWxpZ25tZW50OiBIb3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0IH0sIHRheENvbFsxXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbnVsbE9yVW5kZWZpbmVkKHRvdGFsKSkge1xuICAgICAgICBjb25zdCB0b3RhbENvbCA9IGJ1aWxkZXIuYWRkQ29sdW1uU2V0KFs3NSwgMjVdKTtcblxuICAgICAgICBidWlsZGVyLmFkZFRleHRCbG9jayh0b3RhbFRleHQsIHsgc2l6ZTogVGV4dFNpemUuTWVkaXVtLCB3ZWlnaHQ6IFRleHRXZWlnaHQuQm9sZGVyIH0sIHRvdGFsQ29sWzBdKTtcbiAgICAgICAgYnVpbGRlci5hZGRUZXh0QmxvY2soXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgeyBob3Jpem9udGFsQWxpZ25tZW50OiBIb3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0LCBzaXplOiBUZXh0U2l6ZS5NZWRpdW0sIHdlaWdodDogVGV4dFdlaWdodC5Cb2xkZXIgfSxcbiAgICAgICAgICB0b3RhbENvbFsxXVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBidWlsZGVyLmFkZEJ1dHRvbnMoYnV0dG9ucyk7XG5cbiAgICAgIHJldHVybiBidWlsZGVyLmNhcmQ7XG4gICAgfVxuICB9LCBbYWRhcHRpdmVDYXJkc1BhY2thZ2UsIGNvbnRlbnQsIGRpcmVjdGlvbiwgc3R5bGVPcHRpb25zLCB0YXhUZXh0LCB0b3RhbFRleHQsIHZhdFRleHRdKTtcblxuICByZXR1cm4gKFxuICAgIDxBZGFwdGl2ZUNhcmRSZW5kZXJlclxuICAgICAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lPXthY3Rpb25QZXJmb3JtZWRDbGFzc05hbWV9XG4gICAgICBhZGFwdGl2ZUNhcmQ9e2J1aWx0Q2FyZH1cbiAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgIHRhcEFjdGlvbj17Y29udGVudCAmJiBjb250ZW50LnRhcH1cbiAgICAvPlxuICApO1xufTtcblxuUmVjZWlwdENhcmRDb250ZW50LmRlZmF1bHRQcm9wcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiAnJyxcbiAgZGlzYWJsZWQ6IHVuZGVmaW5lZFxufTtcblxuUmVjZWlwdENhcmRDb250ZW50LnByb3BUeXBlcyA9IHtcbiAgYWN0aW9uUGVyZm9ybWVkQ2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb250ZW50OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGJ1dHRvbnM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBmYWN0czogUHJvcFR5cGVzLmFycmF5T2YoXG4gICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICBrZXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nXG4gICAgICB9KVxuICAgICksXG4gICAgaXRlbXM6IFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgaW1hZ2U6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgYWx0OiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgICAgdGFwOiBQcm9wVHlwZXMuYW55LFxuICAgICAgICAgIHVybDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgICAgIH0pLFxuICAgICAgICBwcmljZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBxdWFudGl0eTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgc3VidGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHRhcDogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgdGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgICAgfSlcbiAgICApLFxuICAgIHRhcDogUHJvcFR5cGVzLmFueSxcbiAgICB0YXg6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdG90YWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdmF0OiBQcm9wVHlwZXMuc3RyaW5nXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuZXhwb3J0IGRlZmF1bHQgUmVjZWlwdENhcmRDb250ZW50O1xuIl19