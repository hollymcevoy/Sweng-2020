"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createDirectLine;

var _botframeworkDirectlinejs = require("botframework-directlinejs");

function createDirectLine(_ref) {
  var botAgent = _ref.botAgent,
      conversationId = _ref.conversationId,
      conversationStartProperties = _ref.conversationStartProperties,
      domain = _ref.domain,
      fetch = _ref.fetch,
      pollingInterval = _ref.pollingInterval,
      secret = _ref.secret,
      streamUrl = _ref.streamUrl,
      token = _ref.token,
      watermark = _ref.watermark,
      webSocket = _ref.webSocket;
  // TODO: [P3] Checks if DLJS supports ponyfilling fetch.
  return new _botframeworkDirectlinejs.DirectLine({
    botAgent: botAgent,
    conversationId: conversationId,
    conversationStartProperties: conversationStartProperties,
    domain: domain,
    fetch: fetch,
    pollingInterval: pollingInterval,
    secret: secret,
    streamUrl: streamUrl,
    token: token,
    watermark: watermark,
    webSocket: webSocket,
    createFormData: function createFormData(attachments) {
      var formData = new FormData();
      attachments.forEach(function (_ref2) {
        var contentType = _ref2.contentType,
            data = _ref2.data,
            filename = _ref2.filename,
            name = _ref2.name;
        formData.append(name, new Blob(data, {
          type: contentType
        }), filename);
      });
      return formData;
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVEaXJlY3RMaW5lLnRzIl0sIm5hbWVzIjpbImNyZWF0ZURpcmVjdExpbmUiLCJib3RBZ2VudCIsImNvbnZlcnNhdGlvbklkIiwiY29udmVyc2F0aW9uU3RhcnRQcm9wZXJ0aWVzIiwiZG9tYWluIiwiZmV0Y2giLCJwb2xsaW5nSW50ZXJ2YWwiLCJzZWNyZXQiLCJzdHJlYW1VcmwiLCJ0b2tlbiIsIndhdGVybWFyayIsIndlYlNvY2tldCIsIkRpcmVjdExpbmUiLCJjcmVhdGVGb3JtRGF0YSIsImF0dGFjaG1lbnRzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImZvckVhY2giLCJjb250ZW50VHlwZSIsImRhdGEiLCJmaWxlbmFtZSIsIm5hbWUiLCJhcHBlbmQiLCJCbG9iIiwidHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQWdCZSxTQUFTQSxnQkFBVCxPQVlhO0FBQUEsTUFYMUJDLFFBVzBCLFFBWDFCQSxRQVcwQjtBQUFBLE1BVjFCQyxjQVUwQixRQVYxQkEsY0FVMEI7QUFBQSxNQVQxQkMsMkJBUzBCLFFBVDFCQSwyQkFTMEI7QUFBQSxNQVIxQkMsTUFRMEIsUUFSMUJBLE1BUTBCO0FBQUEsTUFQMUJDLEtBTzBCLFFBUDFCQSxLQU8wQjtBQUFBLE1BTjFCQyxlQU0wQixRQU4xQkEsZUFNMEI7QUFBQSxNQUwxQkMsTUFLMEIsUUFMMUJBLE1BSzBCO0FBQUEsTUFKMUJDLFNBSTBCLFFBSjFCQSxTQUkwQjtBQUFBLE1BSDFCQyxLQUcwQixRQUgxQkEsS0FHMEI7QUFBQSxNQUYxQkMsU0FFMEIsUUFGMUJBLFNBRTBCO0FBQUEsTUFEMUJDLFNBQzBCLFFBRDFCQSxTQUMwQjtBQUMxQjtBQUNBLFNBQU8sSUFBSUMsb0NBQUosQ0FBZTtBQUNwQlgsSUFBQUEsUUFBUSxFQUFSQSxRQURvQjtBQUVwQkMsSUFBQUEsY0FBYyxFQUFkQSxjQUZvQjtBQUdwQkMsSUFBQUEsMkJBQTJCLEVBQTNCQSwyQkFIb0I7QUFJcEJDLElBQUFBLE1BQU0sRUFBTkEsTUFKb0I7QUFLcEJDLElBQUFBLEtBQUssRUFBTEEsS0FMb0I7QUFNcEJDLElBQUFBLGVBQWUsRUFBZkEsZUFOb0I7QUFPcEJDLElBQUFBLE1BQU0sRUFBTkEsTUFQb0I7QUFRcEJDLElBQUFBLFNBQVMsRUFBVEEsU0FSb0I7QUFTcEJDLElBQUFBLEtBQUssRUFBTEEsS0FUb0I7QUFVcEJDLElBQUFBLFNBQVMsRUFBVEEsU0FWb0I7QUFXcEJDLElBQUFBLFNBQVMsRUFBVEEsU0FYb0I7QUFZcEJFLElBQUFBLGNBQWMsRUFBRSx3QkFBQUMsV0FBVyxFQUFJO0FBQzdCLFVBQU1DLFFBQVEsR0FBRyxJQUFJQyxRQUFKLEVBQWpCO0FBRUFGLE1BQUFBLFdBQVcsQ0FBQ0csT0FBWixDQUNFLGlCQVVNO0FBQUEsWUFUSkMsV0FTSSxTQVRKQSxXQVNJO0FBQUEsWUFSSkMsSUFRSSxTQVJKQSxJQVFJO0FBQUEsWUFQSkMsUUFPSSxTQVBKQSxRQU9JO0FBQUEsWUFOSkMsSUFNSSxTQU5KQSxJQU1JO0FBQ0pOLFFBQUFBLFFBQVEsQ0FBQ08sTUFBVCxDQUFnQkQsSUFBaEIsRUFBc0IsSUFBSUUsSUFBSixDQUFTSixJQUFULEVBQWU7QUFBRUssVUFBQUEsSUFBSSxFQUFFTjtBQUFSLFNBQWYsQ0FBdEIsRUFBNkRFLFFBQTdEO0FBQ0QsT0FiSDtBQWdCQSxhQUFPTCxRQUFQO0FBQ0Q7QUFoQ21CLEdBQWYsQ0FBUDtBQWtDRCIsInNvdXJjZVJvb3QiOiJidW5kbGU6Ly8vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0TGluZSB9IGZyb20gJ2JvdGZyYW1ld29yay1kaXJlY3RsaW5lanMnO1xuXG50eXBlIENyZWF0ZURpcmVjdExpbmVPcHRpb25zID0ge1xuICBib3RBZ2VudD86IHN0cmluZztcbiAgY29udmVyc2F0aW9uSWQ/OiBzdHJpbmc7XG4gIGNvbnZlcnNhdGlvblN0YXJ0UHJvcGVydGllcz86IGFueTtcbiAgZG9tYWluPzogc3RyaW5nO1xuICBmZXRjaD86IHR5cGVvZiB3aW5kb3cuZmV0Y2g7XG4gIHBvbGxpbmdJbnRlcnZhbD86IG51bWJlcjtcbiAgc2VjcmV0Pzogc3RyaW5nO1xuICBzdHJlYW1Vcmw/OiBzdHJpbmc7XG4gIHRva2VuPzogc3RyaW5nO1xuICB3YXRlcm1hcms/OiBzdHJpbmc7XG4gIHdlYlNvY2tldD86IHR5cGVvZiBXZWJTb2NrZXQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVEaXJlY3RMaW5lKHtcbiAgYm90QWdlbnQsXG4gIGNvbnZlcnNhdGlvbklkLFxuICBjb252ZXJzYXRpb25TdGFydFByb3BlcnRpZXMsXG4gIGRvbWFpbixcbiAgZmV0Y2gsXG4gIHBvbGxpbmdJbnRlcnZhbCxcbiAgc2VjcmV0LFxuICBzdHJlYW1VcmwsXG4gIHRva2VuLFxuICB3YXRlcm1hcmssXG4gIHdlYlNvY2tldFxufTogQ3JlYXRlRGlyZWN0TGluZU9wdGlvbnMpIHtcbiAgLy8gVE9ETzogW1AzXSBDaGVja3MgaWYgRExKUyBzdXBwb3J0cyBwb255ZmlsbGluZyBmZXRjaC5cbiAgcmV0dXJuIG5ldyBEaXJlY3RMaW5lKHtcbiAgICBib3RBZ2VudCxcbiAgICBjb252ZXJzYXRpb25JZCxcbiAgICBjb252ZXJzYXRpb25TdGFydFByb3BlcnRpZXMsXG4gICAgZG9tYWluLFxuICAgIGZldGNoLFxuICAgIHBvbGxpbmdJbnRlcnZhbCxcbiAgICBzZWNyZXQsXG4gICAgc3RyZWFtVXJsLFxuICAgIHRva2VuLFxuICAgIHdhdGVybWFyayxcbiAgICB3ZWJTb2NrZXQsXG4gICAgY3JlYXRlRm9ybURhdGE6IGF0dGFjaG1lbnRzID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgIGF0dGFjaG1lbnRzLmZvckVhY2goXG4gICAgICAgICh7XG4gICAgICAgICAgY29udGVudFR5cGUsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICBuYW1lXG4gICAgICAgIH06IHtcbiAgICAgICAgICBjb250ZW50VHlwZT86IHN0cmluZztcbiAgICAgICAgICBkYXRhOiBCbG9iUGFydFtdO1xuICAgICAgICAgIGZpbGVuYW1lPzogc3RyaW5nO1xuICAgICAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIH0pID0+IHtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQobmFtZSwgbmV3IEJsb2IoZGF0YSwgeyB0eXBlOiBjb250ZW50VHlwZSB9KSwgZmlsZW5hbWUpO1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gZm9ybURhdGE7XG4gICAgfVxuICB9IGFzIGFueSk7XG59XG4iXX0=