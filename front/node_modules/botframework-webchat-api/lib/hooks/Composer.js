"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _reactRedux = require("react-redux");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _simpleUpdateIn = _interopRequireDefault(require("simple-update-in"));

var _botframeworkWebchatCore = require("botframework-webchat-core");

var _WebChatAPIContext = _interopRequireDefault(require("./internal/WebChatAPIContext"));

var _ActivityAcknowledgementComposer = _interopRequireDefault(require("../providers/ActivityAcknowledgement/ActivityAcknowledgementComposer"));

var _ActivityKeyerComposer = _interopRequireDefault(require("../providers/ActivityKeyer/ActivityKeyerComposer"));

var _createCustomEvent = _interopRequireDefault(require("../utils/createCustomEvent"));

var _createDefaultCardActionMiddleware = _interopRequireDefault(require("./middleware/createDefaultCardActionMiddleware"));

var _createDefaultGroupActivitiesMiddleware = _interopRequireDefault(require("./middleware/createDefaultGroupActivitiesMiddleware"));

var _defaultSelectVoice = _interopRequireDefault(require("./internal/defaultSelectVoice"));

var _ErrorBoundary = _interopRequireDefault(require("./utils/ErrorBoundary"));

var _getAllLocalizedStrings = _interopRequireDefault(require("../localization/getAllLocalizedStrings"));

var _isObject = _interopRequireDefault(require("../utils/isObject"));

var _mapMap = _interopRequireDefault(require("../utils/mapMap"));

var _normalizeLanguage = _interopRequireDefault(require("../utils/normalizeLanguage"));

var _normalizeStyleOptions = _interopRequireDefault(require("../normalizeStyleOptions"));

var _observableToPromise = _interopRequireDefault(require("./utils/observableToPromise"));

var _patchStyleOptionsFromDeprecatedProps = _interopRequireDefault(require("../patchStyleOptionsFromDeprecatedProps"));

var _Tracker = _interopRequireDefault(require("./internal/Tracker"));

var _useMarkAllAsAcknowledged = _interopRequireDefault(require("./useMarkAllAsAcknowledged"));

var _WebChatReduxContext = _interopRequireWildcard(require("./internal/WebChatReduxContext"));

var _applyMiddleware = _interopRequireWildcard(require("./middleware/applyMiddleware"));

var _PrecompiledGlobalize = _interopRequireDefault(require("../external/PrecompiledGlobalize"));

var _excluded = ["internalRenderErrorBox", "onTelemetry", "store"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

// List of Redux actions factory we are hoisting as Web Chat functions
var DISPATCHERS = {
  clearSuggestedActions: _botframeworkWebchatCore.clearSuggestedActions,
  dismissNotification: _botframeworkWebchatCore.dismissNotification,
  emitTypingIndicator: _botframeworkWebchatCore.emitTypingIndicator,
  markActivity: _botframeworkWebchatCore.markActivity,
  postActivity: _botframeworkWebchatCore.postActivity,
  sendEvent: _botframeworkWebchatCore.sendEvent,
  sendFiles: _botframeworkWebchatCore.sendFiles,
  sendMessage: _botframeworkWebchatCore.sendMessage,
  sendMessageBack: _botframeworkWebchatCore.sendMessageBack,
  sendPostBack: _botframeworkWebchatCore.sendPostBack,
  setDictateInterims: _botframeworkWebchatCore.setDictateInterims,
  setDictateState: _botframeworkWebchatCore.setDictateState,
  setNotification: _botframeworkWebchatCore.setNotification,
  setSendBox: _botframeworkWebchatCore.setSendBox,
  setSendTimeout: _botframeworkWebchatCore.setSendTimeout,
  startDictate: _botframeworkWebchatCore.startDictate,
  startSpeakingActivity: _botframeworkWebchatCore.startSpeakingActivity,
  stopDictate: _botframeworkWebchatCore.stopDictate,
  stopSpeakingActivity: _botframeworkWebchatCore.stopSpeakingActivity,
  submitSendBox: _botframeworkWebchatCore.submitSendBox
};

function createCardActionContext(_ref) {
  var cardActionMiddleware = _ref.cardActionMiddleware,
      directLine = _ref.directLine,
      dispatch = _ref.dispatch,
      markAllAsAcknowledged = _ref.markAllAsAcknowledged;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['card action'].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(cardActionMiddleware)), [(0, _createDefaultCardActionMiddleware.default)()]))({
    dispatch: dispatch
  });

  return {
    onCardAction: function onCardAction(cardAction) {
      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          target = _ref2.target;

      markAllAsAcknowledged();
      return runMiddleware({
        cardAction: cardAction,
        getSignInUrl: cardAction.type === 'signin' ? function () {
          var value = cardAction.value;

          if (directLine.getSessionId) {
            /**
             * @todo TODO: [P3] We should change this one to async/await.
             *       This is the first place in this project to use async.
             *       Thus, we need to add @babel/plugin-transform-runtime and @babel/runtime.
             */
            return (0, _observableToPromise.default)(directLine.getSessionId()).then(function (sessionId) {
              return "".concat(value).concat(encodeURIComponent("&code_challenge=".concat(sessionId)));
            });
          }

          console.warn('botframework-webchat: OAuth is not supported on this Direct Line adapter.');
          return value;
        } : null,
        target: target
      });
    }
  };
}

function createGroupActivitiesContext(_ref3) {
  var groupActivitiesMiddleware = _ref3.groupActivitiesMiddleware,
      groupTimestamp = _ref3.groupTimestamp;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['group activities'].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(groupActivitiesMiddleware)), [(0, _createDefaultGroupActivitiesMiddleware.default)({
    groupTimestamp: groupTimestamp
  })]));

  return {
    groupActivities: runMiddleware({})
  };
}

function mergeStringsOverrides(localizedStrings, language, overrideLocalizedStrings) {
  if (!overrideLocalizedStrings) {
    return localizedStrings;
  } else if (typeof overrideLocalizedStrings === 'function') {
    var merged = overrideLocalizedStrings(localizedStrings, language);

    if (!(0, _isObject.default)(merged)) {
      throw new Error('botframework-webchat: overrideLocalizedStrings function must return an object.');
    }

    return merged;
  }

  if (!(0, _isObject.default)(overrideLocalizedStrings)) {
    throw new Error('botframework-webchat: overrideLocalizedStrings must be either a function, an object, or falsy.');
  }

  return _objectSpread(_objectSpread({}, localizedStrings), overrideLocalizedStrings);
} // It seems "react/require-default-props" did not pick up `ComposerCore.defaultProps`.
// And it falsely complaint `optional?: string` must have a corresponding `ComposerCore.defaultProps.optional = undefined`, even we already set it below.
// Since we set both TypeScript `Props` class and `ComposerCore.propTypes`, this check will be done there as well.
// Ignoring it in TypeScript version should be safe, as we have `propTypes` version to protect us.

/* eslint-disable react/require-default-props */


/* eslint-enable react/require-default-props */
var ComposerCore = function ComposerCore(_ref4) {
  var activityMiddleware = _ref4.activityMiddleware,
      activityRenderer = _ref4.activityRenderer,
      activityStatusMiddleware = _ref4.activityStatusMiddleware,
      activityStatusRenderer = _ref4.activityStatusRenderer,
      attachmentMiddleware = _ref4.attachmentMiddleware,
      attachmentForScreenReaderMiddleware = _ref4.attachmentForScreenReaderMiddleware,
      attachmentRenderer = _ref4.attachmentRenderer,
      avatarMiddleware = _ref4.avatarMiddleware,
      avatarRenderer = _ref4.avatarRenderer,
      cardActionMiddleware = _ref4.cardActionMiddleware,
      children = _ref4.children,
      dir = _ref4.dir,
      directLine = _ref4.directLine,
      disabled = _ref4.disabled,
      downscaleImageToDataURL = _ref4.downscaleImageToDataURL,
      grammars = _ref4.grammars,
      groupActivitiesMiddleware = _ref4.groupActivitiesMiddleware,
      groupTimestamp = _ref4.groupTimestamp,
      internalErrorBoxClass = _ref4.internalErrorBoxClass,
      locale = _ref4.locale,
      onTelemetry = _ref4.onTelemetry,
      overrideLocalizedStrings = _ref4.overrideLocalizedStrings,
      renderMarkdown = _ref4.renderMarkdown,
      scrollToEndButtonMiddleware = _ref4.scrollToEndButtonMiddleware,
      selectVoice = _ref4.selectVoice,
      sendTimeout = _ref4.sendTimeout,
      sendTypingIndicator = _ref4.sendTypingIndicator,
      styleOptions = _ref4.styleOptions,
      toastMiddleware = _ref4.toastMiddleware,
      toastRenderer = _ref4.toastRenderer,
      typingIndicatorMiddleware = _ref4.typingIndicatorMiddleware,
      typingIndicatorRenderer = _ref4.typingIndicatorRenderer,
      userID = _ref4.userID,
      username = _ref4.username;
  var dispatch = (0, _WebChatReduxContext.useDispatch)();
  var telemetryDimensionsRef = (0, _react.useRef)({});
  var patchedDir = (0, _react.useMemo)(function () {
    return dir === 'ltr' || dir === 'rtl' ? dir : 'auto';
  }, [dir]);
  var patchedGrammars = (0, _react.useMemo)(function () {
    return grammars || [];
  }, [grammars]);
  var patchedStyleOptions = (0, _react.useMemo)(function () {
    return (0, _normalizeStyleOptions.default)((0, _patchStyleOptionsFromDeprecatedProps.default)(styleOptions, {
      groupTimestamp: groupTimestamp,
      sendTimeout: sendTimeout
    }));
  }, [groupTimestamp, sendTimeout, styleOptions]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setLanguage)(locale));
  }, [dispatch, locale]);
  (0, _react.useEffect)(function () {
    typeof sendTimeout === 'number' && dispatch((0, _botframeworkWebchatCore.setSendTimeout)(sendTimeout));
  }, [dispatch, sendTimeout]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setSendTypingIndicator)(!!sendTypingIndicator));
  }, [dispatch, sendTypingIndicator]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.connect)({
      directLine: directLine,
      userID: userID,
      username: username
    }));
    return function () {
      /**
       * @todo TODO: [P3] disconnect() is an async call (pending -> fulfilled), we need to wait, or change it to reconnect()
       */
      dispatch((0, _botframeworkWebchatCore.disconnect)());
    };
  }, [dispatch, directLine, userID, username]);
  var markAllAsAcknowledged = (0, _useMarkAllAsAcknowledged.default)();
  var cardActionContext = (0, _react.useMemo)(function () {
    return createCardActionContext({
      cardActionMiddleware: cardActionMiddleware,
      directLine: directLine,
      dispatch: dispatch,
      markAllAsAcknowledged: markAllAsAcknowledged
    });
  }, [cardActionMiddleware, directLine, dispatch, markAllAsAcknowledged]);
  var patchedSelectVoice = (0, _react.useMemo)(function () {
    return selectVoice || _defaultSelectVoice.default.bind(null, {
      language: locale
    });
  }, [locale, selectVoice]);
  var groupActivitiesContext = (0, _react.useMemo)(function () {
    return createGroupActivitiesContext({
      groupActivitiesMiddleware: groupActivitiesMiddleware,
      groupTimestamp: patchedStyleOptions.groupTimestamp
    });
  }, [groupActivitiesMiddleware, patchedStyleOptions.groupTimestamp]);
  var hoistedDispatchers = (0, _react.useMemo)(function () {
    return (0, _mapMap.default)(DISPATCHERS, function (dispatcher) {
      return function () {
        return dispatch(dispatcher.apply(void 0, arguments));
      };
    });
  }, [dispatch]);
  var patchedLocalizedStrings = (0, _react.useMemo)(function () {
    return mergeStringsOverrides((0, _getAllLocalizedStrings.default)()[(0, _normalizeLanguage.default)(locale)], locale, overrideLocalizedStrings);
  }, [locale, overrideLocalizedStrings]);
  var localizedGlobalize = (0, _react.useMemo)(function () {
    var _ref5 = patchedLocalizedStrings || {},
        GLOBALIZE = _ref5.GLOBALIZE,
        GLOBALIZE_LANGUAGE = _ref5.GLOBALIZE_LANGUAGE;

    return GLOBALIZE || GLOBALIZE_LANGUAGE && (0, _PrecompiledGlobalize.default)(GLOBALIZE_LANGUAGE) || (0, _PrecompiledGlobalize.default)('en');
  }, [patchedLocalizedStrings]);
  var trackDimension = (0, _react.useCallback)(function (name, data) {
    if (!name || typeof name !== 'string') {
      return console.warn('botframework-webchat: Telemetry dimension name must be a string.');
    }

    var type = _typeof(data);

    if (type !== 'string' && type !== 'undefined') {
      return console.warn('botframework-webchat: Telemetry dimension data must be a string or undefined.');
    }

    telemetryDimensionsRef.current = (0, _simpleUpdateIn.default)(telemetryDimensionsRef.current, [name], type === 'undefined' ? data : function () {
      return data;
    });
  }, [telemetryDimensionsRef]);
  var patchedActivityRenderer = (0, _react.useMemo)(function () {
    activityRenderer && console.warn('Web Chat: "activityRenderer" is deprecated and will be removed on 2022-06-15, please use "activityMiddleware" instead.');
    return activityRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity', {
      strict: false
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(activityMiddleware)), [function () {
      return function () {
        return function (_ref6) {
          var activity = _ref6.activity;

          if (activity) {
            throw new Error("No renderer for activity of type \"".concat(activity.type, "\""));
          } else {
            throw new Error('No activity to render');
          }
        };
      };
    }]))({});
  }, [activityMiddleware, activityRenderer]);
  var patchedActivityStatusRenderer = (0, _react.useMemo)(function () {
    activityStatusRenderer && console.warn('Web Chat: "activityStatusRenderer" is deprecated and will be removed on 2022-06-15, please use "activityStatusMiddleware" instead.');
    return activityStatusRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity status', {
      strict: false
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(activityStatusMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [activityStatusMiddleware, activityStatusRenderer]);
  var patchedAttachmentForScreenReaderRenderer = (0, _react.useMemo)(function () {
    return _applyMiddleware.forRenderer.apply(void 0, ['attachment for screen reader', {
      strict: true
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(attachmentForScreenReaderMiddleware)), [function () {
      return function () {
        return function (_ref7) {
          var attachment = _ref7.attachment;

          if (attachment) {
            console.warn("No renderer for attachment for screen reader of type \"".concat(attachment.contentType, "\""));
            return false;
          }

          return function () {
            /**
             * @todo TODO: [P4] Might be able to throw without returning a function -- investigate and possibly fix
             */
            throw new Error('No attachment to render');
          };
        };
      };
    }]))({});
  }, [attachmentForScreenReaderMiddleware]);
  var patchedAttachmentRenderer = (0, _react.useMemo)(function () {
    if (attachmentRenderer) {
      console.warn('Web Chat: "attachmentRenderer" is deprecated and will be removed on 2022-06-15, please use "attachmentMiddleware" instead.');
      return attachmentRenderer;
    } // Attachment renderer


    return _applyMiddleware.forLegacyRenderer.apply(void 0, ['attachment'].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(attachmentMiddleware)), [function () {
      return function () {
        return function (_ref8) {
          var attachment = _ref8.attachment;

          if (attachment) {
            throw new Error("No renderer for attachment of type \"".concat(attachment.contentType, "\""));
          } else {
            throw new Error('No attachment to render');
          }
        };
      };
    }]))({});
  }, [attachmentMiddleware, attachmentRenderer]);
  var patchedAvatarRenderer = (0, _react.useMemo)(function () {
    avatarRenderer && console.warn('Web Chat: "avatarRenderer" is deprecated and will be removed on 2022-06-15, please use "avatarMiddleware" instead.');
    return avatarRenderer || _applyMiddleware.forRenderer.apply(void 0, ['avatar', {
      strict: false
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(avatarMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [avatarMiddleware, avatarRenderer]);
  var patchedToastRenderer = (0, _react.useMemo)(function () {
    toastRenderer && console.warn('Web Chat: "toastRenderer" is deprecated and will be removed on 2022-06-15, please use "toastMiddleware" instead.');
    return toastRenderer || _applyMiddleware.forRenderer.apply(void 0, ['toast', {
      strict: false
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(toastMiddleware)), [function () {
      return function () {
        return function (_ref9) {
          var notification = _ref9.notification;

          if (notification) {
            throw new Error("No renderer for notification of type \"".concat(notification.contentType, "\""));
          } else {
            throw new Error('No notification to render');
          }
        };
      };
    }]))({});
  }, [toastMiddleware, toastRenderer]);
  var patchedTypingIndicatorRenderer = (0, _react.useMemo)(function () {
    typingIndicatorRenderer && console.warn('Web Chat: "typingIndicatorRenderer" is deprecated and will be removed on 2022-06-15, please use "typingIndicatorMiddleware" instead.');
    return typingIndicatorRenderer || _applyMiddleware.forRenderer.apply(void 0, ['typing indicator', {
      strict: false
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(typingIndicatorMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [typingIndicatorMiddleware, typingIndicatorRenderer]);
  var scrollToEndButtonRenderer = (0, _react.useMemo)(function () {
    return _applyMiddleware.forRenderer.apply(void 0, ['scroll to end button', {
      strict: true
    }].concat(_toConsumableArray((0, _botframeworkWebchatCore.singleToArray)(scrollToEndButtonMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))();
  }, [scrollToEndButtonMiddleware]);
  /**
   * This is a heavy function, and it is expected to be only called when there is a need to recreate business logic, e.g.
   * - User ID changed, causing all send* functions to be updated
   * - send
   * @todo TODO: [P3] We should think about if we allow the user to change onSendBoxValueChanged/sendBoxValue, e.g.
   * 1. Turns text into UPPERCASE
   * 2. Filter out profanity
   * @todo TODO: [P4] Revisit all members of context
   *       This context should consist of members that are not in the Redux store
   *       i.e. members that are not interested in other types of UIs
   */

  var context = (0, _react.useMemo)(function () {
    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, cardActionContext), groupActivitiesContext), hoistedDispatchers), {}, {
      activityRenderer: patchedActivityRenderer,
      activityStatusRenderer: patchedActivityStatusRenderer,
      attachmentForScreenReaderRenderer: patchedAttachmentForScreenReaderRenderer,
      attachmentRenderer: patchedAttachmentRenderer,
      avatarRenderer: patchedAvatarRenderer,
      dir: patchedDir,
      directLine: directLine,
      disabled: disabled,
      downscaleImageToDataURL: downscaleImageToDataURL,
      grammars: patchedGrammars,
      internalErrorBoxClass: internalErrorBoxClass,
      language: locale,
      localizedGlobalizeState: [localizedGlobalize],
      localizedStrings: patchedLocalizedStrings,
      onTelemetry: onTelemetry,
      renderMarkdown: renderMarkdown,
      scrollToEndButtonRenderer: scrollToEndButtonRenderer,
      selectVoice: patchedSelectVoice,
      sendTypingIndicator: sendTypingIndicator,
      styleOptions: patchedStyleOptions,
      telemetryDimensionsRef: telemetryDimensionsRef,
      toastRenderer: patchedToastRenderer,
      trackDimension: trackDimension,
      typingIndicatorRenderer: patchedTypingIndicatorRenderer,
      userID: userID,
      username: username
    });
  }, [cardActionContext, directLine, disabled, downscaleImageToDataURL, groupActivitiesContext, hoistedDispatchers, internalErrorBoxClass, locale, localizedGlobalize, onTelemetry, patchedActivityRenderer, patchedActivityStatusRenderer, patchedAttachmentForScreenReaderRenderer, patchedAttachmentRenderer, patchedAvatarRenderer, patchedDir, patchedGrammars, patchedLocalizedStrings, patchedSelectVoice, patchedStyleOptions, patchedToastRenderer, patchedTypingIndicatorRenderer, renderMarkdown, scrollToEndButtonRenderer, sendTypingIndicator, telemetryDimensionsRef, trackDimension, userID, username]);
  return /*#__PURE__*/_react.default.createElement(_WebChatAPIContext.default.Provider, {
    value: context
  }, typeof children === 'function' ? children(context) : children, onTelemetry && /*#__PURE__*/_react.default.createElement(_Tracker.default, null));
};
/**
 * @todo TODO: [P3] We should consider moving some data from Redux store to props
 *       Although we use `connectToWebChat` to hide the details of accessor of Redux store,
 *       we should clean up the responsibility between Context and Redux store
 *       We should decide which data is needed for React but not in other environment such as CLI/VSCode
 */


ComposerCore.defaultProps = {
  activityMiddleware: undefined,
  activityRenderer: undefined,
  activityStatusMiddleware: undefined,
  activityStatusRenderer: undefined,
  attachmentForScreenReaderMiddleware: undefined,
  attachmentMiddleware: undefined,
  attachmentRenderer: undefined,
  avatarMiddleware: undefined,
  avatarRenderer: undefined,
  cardActionMiddleware: undefined,
  children: undefined,
  dir: 'auto',
  disabled: false,
  downscaleImageToDataURL: undefined,
  grammars: [],
  groupActivitiesMiddleware: undefined,
  groupTimestamp: undefined,
  internalErrorBoxClass: undefined,
  locale: window.navigator.language || 'en-US',
  onTelemetry: undefined,
  overrideLocalizedStrings: undefined,
  renderMarkdown: undefined,
  scrollToEndButtonMiddleware: undefined,
  selectVoice: undefined,
  sendTimeout: undefined,
  sendTypingIndicator: false,
  styleOptions: {},
  toastMiddleware: undefined,
  toastRenderer: undefined,
  typingIndicatorMiddleware: undefined,
  typingIndicatorRenderer: undefined,
  userID: '',
  username: ''
};
ComposerCore.propTypes = {
  activityMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityRenderer: _propTypes.default.func,
  activityStatusMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityStatusRenderer: _propTypes.default.func,
  attachmentForScreenReaderMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentRenderer: _propTypes.default.func,
  avatarMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  avatarRenderer: _propTypes.default.func,
  cardActionMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  children: _propTypes.default.any,
  dir: _propTypes.default.oneOf(['auto', 'ltr', 'rtl']),
  directLine: _propTypes.default.shape({
    activity$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    connectionStatus$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    end: _propTypes.default.func,
    getSessionId: _propTypes.default.func,
    postActivity: _propTypes.default.func.isRequired,
    referenceGrammarID: _propTypes.default.string,
    token: _propTypes.default.string
  }).isRequired,
  disabled: _propTypes.default.bool,
  downscaleImageToDataURL: _propTypes.default.func,
  grammars: _propTypes.default.arrayOf(_propTypes.default.string),
  groupActivitiesMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  groupTimestamp: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.number]),
  internalErrorBoxClass: _propTypes.default.func,
  // This is for internal use only. We don't allow customization of error box.
  locale: _propTypes.default.string,
  onTelemetry: _propTypes.default.func,
  overrideLocalizedStrings: _propTypes.default.oneOfType([_propTypes.default.any, _propTypes.default.func]),
  renderMarkdown: _propTypes.default.func,
  scrollToEndButtonMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  selectVoice: _propTypes.default.func,
  sendTimeout: _propTypes.default.number,
  sendTypingIndicator: _propTypes.default.bool,
  styleOptions: _propTypes.default.any,
  toastMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  toastRenderer: _propTypes.default.func,
  typingIndicatorMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  typingIndicatorRenderer: _propTypes.default.func,
  userID: _propTypes.default.string,
  username: _propTypes.default.string
};

// We will create a Redux store if it was not passed in
var Composer = function Composer(_ref10) {
  var internalRenderErrorBox = _ref10.internalRenderErrorBox,
      onTelemetry = _ref10.onTelemetry,
      store = _ref10.store,
      props = _objectWithoutProperties(_ref10, _excluded);

  var _useState = (0, _react.useState)(),
      _useState2 = _slicedToArray(_useState, 2),
      error = _useState2[0],
      setError = _useState2[1];

  var handleError = (0, _react.useCallback)(function (error) {
    console.error('botframework-webchat: Uncaught exception', {
      error: error
    });
    onTelemetry && onTelemetry((0, _createCustomEvent.default)('exception', {
      error: error,
      fatal: true
    }));
    setError(error);
  }, [onTelemetry, setError]);
  var memoizedStore = (0, _react.useMemo)(function () {
    return store || (0, _botframeworkWebchatCore.createStore)();
  }, [store]);
  return error ? !!internalRenderErrorBox && internalRenderErrorBox({
    error: error,
    type: 'uncaught exception'
  }) : /*#__PURE__*/_react.default.createElement(_ErrorBoundary.default, {
    onError: handleError
  }, /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
    context: _WebChatReduxContext.default,
    store: memoizedStore
  }, /*#__PURE__*/_react.default.createElement(_ActivityKeyerComposer.default, null, /*#__PURE__*/_react.default.createElement(_ActivityAcknowledgementComposer.default, null, /*#__PURE__*/_react.default.createElement(ComposerCore, _extends({
    onTelemetry: onTelemetry
  }, props))))));
};

Composer.defaultProps = {
  internalRenderErrorBox: undefined,
  onTelemetry: undefined,
  store: undefined
};
Composer.propTypes = {
  internalRenderErrorBox: _propTypes.default.any,
  onTelemetry: _propTypes.default.func,
  store: _propTypes.default.any
};
var _default = Composer;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy9Db21wb3Nlci50c3giXSwibmFtZXMiOlsiRElTUEFUQ0hFUlMiLCJjbGVhclN1Z2dlc3RlZEFjdGlvbnMiLCJkaXNtaXNzTm90aWZpY2F0aW9uIiwiZW1pdFR5cGluZ0luZGljYXRvciIsIm1hcmtBY3Rpdml0eSIsInBvc3RBY3Rpdml0eSIsInNlbmRFdmVudCIsInNlbmRGaWxlcyIsInNlbmRNZXNzYWdlIiwic2VuZE1lc3NhZ2VCYWNrIiwic2VuZFBvc3RCYWNrIiwic2V0RGljdGF0ZUludGVyaW1zIiwic2V0RGljdGF0ZVN0YXRlIiwic2V0Tm90aWZpY2F0aW9uIiwic2V0U2VuZEJveCIsInNldFNlbmRUaW1lb3V0Iiwic3RhcnREaWN0YXRlIiwic3RhcnRTcGVha2luZ0FjdGl2aXR5Iiwic3RvcERpY3RhdGUiLCJzdG9wU3BlYWtpbmdBY3Rpdml0eSIsInN1Ym1pdFNlbmRCb3giLCJjcmVhdGVDYXJkQWN0aW9uQ29udGV4dCIsImNhcmRBY3Rpb25NaWRkbGV3YXJlIiwiZGlyZWN0TGluZSIsImRpc3BhdGNoIiwibWFya0FsbEFzQWNrbm93bGVkZ2VkIiwicnVuTWlkZGxld2FyZSIsImFwcGx5TWlkZGxld2FyZSIsIm9uQ2FyZEFjdGlvbiIsImNhcmRBY3Rpb24iLCJ0YXJnZXQiLCJnZXRTaWduSW5VcmwiLCJ0eXBlIiwidmFsdWUiLCJnZXRTZXNzaW9uSWQiLCJ0aGVuIiwic2Vzc2lvbklkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29uc29sZSIsIndhcm4iLCJjcmVhdGVHcm91cEFjdGl2aXRpZXNDb250ZXh0IiwiZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSIsImdyb3VwVGltZXN0YW1wIiwiZ3JvdXBBY3Rpdml0aWVzIiwibWVyZ2VTdHJpbmdzT3ZlcnJpZGVzIiwibG9jYWxpemVkU3RyaW5ncyIsImxhbmd1YWdlIiwib3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzIiwibWVyZ2VkIiwiRXJyb3IiLCJDb21wb3NlckNvcmUiLCJhY3Rpdml0eU1pZGRsZXdhcmUiLCJhY3Rpdml0eVJlbmRlcmVyIiwiYWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlIiwiYWN0aXZpdHlTdGF0dXNSZW5kZXJlciIsImF0dGFjaG1lbnRNaWRkbGV3YXJlIiwiYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUiLCJhdHRhY2htZW50UmVuZGVyZXIiLCJhdmF0YXJNaWRkbGV3YXJlIiwiYXZhdGFyUmVuZGVyZXIiLCJjaGlsZHJlbiIsImRpciIsImRpc2FibGVkIiwiZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkwiLCJncmFtbWFycyIsImludGVybmFsRXJyb3JCb3hDbGFzcyIsImxvY2FsZSIsIm9uVGVsZW1ldHJ5IiwicmVuZGVyTWFya2Rvd24iLCJzY3JvbGxUb0VuZEJ1dHRvbk1pZGRsZXdhcmUiLCJzZWxlY3RWb2ljZSIsInNlbmRUaW1lb3V0Iiwic2VuZFR5cGluZ0luZGljYXRvciIsInN0eWxlT3B0aW9ucyIsInRvYXN0TWlkZGxld2FyZSIsInRvYXN0UmVuZGVyZXIiLCJ0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlIiwidHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIiLCJ1c2VySUQiLCJ1c2VybmFtZSIsInRlbGVtZXRyeURpbWVuc2lvbnNSZWYiLCJwYXRjaGVkRGlyIiwicGF0Y2hlZEdyYW1tYXJzIiwicGF0Y2hlZFN0eWxlT3B0aW9ucyIsImNhcmRBY3Rpb25Db250ZXh0IiwicGF0Y2hlZFNlbGVjdFZvaWNlIiwiZGVmYXVsdFNlbGVjdFZvaWNlIiwiYmluZCIsImdyb3VwQWN0aXZpdGllc0NvbnRleHQiLCJob2lzdGVkRGlzcGF0Y2hlcnMiLCJkaXNwYXRjaGVyIiwicGF0Y2hlZExvY2FsaXplZFN0cmluZ3MiLCJsb2NhbGl6ZWRHbG9iYWxpemUiLCJHTE9CQUxJWkUiLCJHTE9CQUxJWkVfTEFOR1VBR0UiLCJ0cmFja0RpbWVuc2lvbiIsIm5hbWUiLCJkYXRhIiwiY3VycmVudCIsInBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyIiwiYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIiLCJzdHJpY3QiLCJhY3Rpdml0eSIsInBhdGNoZWRBY3Rpdml0eVN0YXR1c1JlbmRlcmVyIiwicGF0Y2hlZEF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJSZW5kZXJlciIsImF0dGFjaG1lbnQiLCJjb250ZW50VHlwZSIsInBhdGNoZWRBdHRhY2htZW50UmVuZGVyZXIiLCJhcHBseU1pZGRsZXdhcmVGb3JMZWdhY3lSZW5kZXJlciIsInBhdGNoZWRBdmF0YXJSZW5kZXJlciIsInBhdGNoZWRUb2FzdFJlbmRlcmVyIiwibm90aWZpY2F0aW9uIiwicGF0Y2hlZFR5cGluZ0luZGljYXRvclJlbmRlcmVyIiwic2Nyb2xsVG9FbmRCdXR0b25SZW5kZXJlciIsImNvbnRleHQiLCJhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXIiLCJsb2NhbGl6ZWRHbG9iYWxpemVTdGF0ZSIsImRlZmF1bHRQcm9wcyIsInVuZGVmaW5lZCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9uZU9mVHlwZSIsImFycmF5T2YiLCJmdW5jIiwiYW55Iiwib25lT2YiLCJzaGFwZSIsImFjdGl2aXR5JCIsInN1YnNjcmliZSIsImlzUmVxdWlyZWQiLCJjb25uZWN0aW9uU3RhdHVzJCIsImVuZCIsInJlZmVyZW5jZUdyYW1tYXJJRCIsInN0cmluZyIsInRva2VuIiwiYm9vbCIsIm51bWJlciIsIkNvbXBvc2VyIiwiaW50ZXJuYWxSZW5kZXJFcnJvckJveCIsInN0b3JlIiwicHJvcHMiLCJlcnJvciIsInNldEVycm9yIiwiaGFuZGxlRXJyb3IiLCJmYXRhbCIsIm1lbW9pemVkU3RvcmUiLCJXZWJDaGF0UmVkdXhDb250ZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBZ0NBOztBQUNBOztBQUNBOztBQU9BOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUNB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QUFELHFCQUNFLDZCQUFDLFlBQUQ7QUFBYyxJQUFBLFdBQVcsRUFBRWhGO0FBQTNCLEtBQTRDMkUsS0FBNUMsRUFERixDQURGLENBREYsQ0FERixDQUhGO0FBYUQsQ0E3QkQ7O0FBK0JBSCxRQUFRLENBQUN0QixZQUFULEdBQXdCO0FBQ3RCdUIsRUFBQUEsc0JBQXNCLEVBQUV0QixTQURGO0FBRXRCbkQsRUFBQUEsV0FBVyxFQUFFbUQsU0FGUztBQUd0QnVCLEVBQUFBLEtBQUssRUFBRXZCO0FBSGUsQ0FBeEI7QUFNQXFCLFFBQVEsQ0FBQ2xCLFNBQVQsR0FBcUI7QUFDbkJtQixFQUFBQSxzQkFBc0IsRUFBRWxCLG1CQUFVSSxHQURmO0FBRW5CM0QsRUFBQUEsV0FBVyxFQUFFdUQsbUJBQVVHLElBRko7QUFHbkJnQixFQUFBQSxLQUFLLEVBQUVuQixtQkFBVUk7QUFIRSxDQUFyQjtlQU1lYSxRIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgRkMsIFJlYWN0Tm9kZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1cGRhdGVJbiBmcm9tICdzaW1wbGUtdXBkYXRlLWluJztcblxuaW1wb3J0IHtcbiAgY2xlYXJTdWdnZXN0ZWRBY3Rpb25zLFxuICBjb25uZWN0IGFzIGNyZWF0ZUNvbm5lY3RBY3Rpb24sXG4gIGNyZWF0ZVN0b3JlLFxuICBEaXJlY3RMaW5lQWN0aXZpdHksXG4gIERpcmVjdExpbmVKU0JvdENvbm5lY3Rpb24sXG4gIGRpc2Nvbm5lY3QsXG4gIGRpc21pc3NOb3RpZmljYXRpb24sXG4gIGVtaXRUeXBpbmdJbmRpY2F0b3IsXG4gIG1hcmtBY3Rpdml0eSxcbiAgT25lT3JNYW55LFxuICBwb3N0QWN0aXZpdHksXG4gIHNlbmRFdmVudCxcbiAgc2VuZEZpbGVzLFxuICBzZW5kTWVzc2FnZSxcbiAgc2VuZE1lc3NhZ2VCYWNrLFxuICBzZW5kUG9zdEJhY2ssXG4gIHNldERpY3RhdGVJbnRlcmltcyxcbiAgc2V0RGljdGF0ZVN0YXRlLFxuICBzZXRMYW5ndWFnZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc2V0U2VuZFR5cGluZ0luZGljYXRvcixcbiAgc2luZ2xlVG9BcnJheSxcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcblxuaW1wb3J0IHsgZGVmYXVsdCBhcyBXZWJDaGF0QVBJQ29udGV4dCB9IGZyb20gJy4vaW50ZXJuYWwvV2ViQ2hhdEFQSUNvbnRleHQnO1xuaW1wb3J0IEFjdGl2aXR5QWNrbm93bGVkZ2VtZW50Q29tcG9zZXIgZnJvbSAnLi4vcHJvdmlkZXJzL0FjdGl2aXR5QWNrbm93bGVkZ2VtZW50L0FjdGl2aXR5QWNrbm93bGVkZ2VtZW50Q29tcG9zZXInO1xuaW1wb3J0IEFjdGl2aXR5S2V5ZXJDb21wb3NlciBmcm9tICcuLi9wcm92aWRlcnMvQWN0aXZpdHlLZXllci9BY3Rpdml0eUtleWVyQ29tcG9zZXInO1xuaW1wb3J0IEFjdGl2aXR5TWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9BY3Rpdml0eU1pZGRsZXdhcmUnO1xuaW1wb3J0IEFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9BY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUnO1xuaW1wb3J0IEF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlIGZyb20gJy4uL3R5cGVzL0F0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlJztcbmltcG9ydCBBdHRhY2htZW50TWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9BdHRhY2htZW50TWlkZGxld2FyZSc7XG5pbXBvcnQgQXZhdGFyTWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9BdmF0YXJNaWRkbGV3YXJlJztcbmltcG9ydCBDYXJkQWN0aW9uTWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9DYXJkQWN0aW9uTWlkZGxld2FyZSc7XG5pbXBvcnQgY3JlYXRlQ3VzdG9tRXZlbnQgZnJvbSAnLi4vdXRpbHMvY3JlYXRlQ3VzdG9tRXZlbnQnO1xuaW1wb3J0IGNyZWF0ZURlZmF1bHRDYXJkQWN0aW9uTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdENhcmRBY3Rpb25NaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVEZWZhdWx0R3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdEdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUnO1xuaW1wb3J0IGRlZmF1bHRTZWxlY3RWb2ljZSBmcm9tICcuL2ludGVybmFsL2RlZmF1bHRTZWxlY3RWb2ljZSc7XG5pbXBvcnQgRXJyb3JCb3VuZGFyeSBmcm9tICcuL3V0aWxzL0Vycm9yQm91bmRhcnknO1xuaW1wb3J0IGdldEFsbExvY2FsaXplZFN0cmluZ3MgZnJvbSAnLi4vbG9jYWxpemF0aW9uL2dldEFsbExvY2FsaXplZFN0cmluZ3MnO1xuaW1wb3J0IEdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUgZnJvbSAnLi4vdHlwZXMvR3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vdXRpbHMvaXNPYmplY3QnO1xuaW1wb3J0IExvY2FsaXplZFN0cmluZ3MgZnJvbSAnLi4vdHlwZXMvTG9jYWxpemVkU3RyaW5ncyc7XG5pbXBvcnQgbWFwTWFwIGZyb20gJy4uL3V0aWxzL21hcE1hcCc7XG5pbXBvcnQgbm9ybWFsaXplTGFuZ3VhZ2UgZnJvbSAnLi4vdXRpbHMvbm9ybWFsaXplTGFuZ3VhZ2UnO1xuaW1wb3J0IG5vcm1hbGl6ZVN0eWxlT3B0aW9ucyBmcm9tICcuLi9ub3JtYWxpemVTdHlsZU9wdGlvbnMnO1xuaW1wb3J0IG9ic2VydmFibGVUb1Byb21pc2UgZnJvbSAnLi91dGlscy9vYnNlcnZhYmxlVG9Qcm9taXNlJztcbmltcG9ydCBwYXRjaFN0eWxlT3B0aW9uc0Zyb21EZXByZWNhdGVkUHJvcHMgZnJvbSAnLi4vcGF0Y2hTdHlsZU9wdGlvbnNGcm9tRGVwcmVjYXRlZFByb3BzJztcbmltcG9ydCBQcmVjb21waWxlZEdsb2JhbGl6ZVR5cGUgZnJvbSAnLi4vdHlwZXMvUHJlY29tcGlsZWRHbG9iYWxpemUnO1xuaW1wb3J0IFNjcm9sbFRvRW5kQnV0dG9uTWlkZGxld2FyZSwgeyBTY3JvbGxUb0VuZEJ1dHRvbkNvbXBvbmVudEZhY3RvcnkgfSBmcm9tICcuLi90eXBlcy9TY3JvbGxUb0VuZEJ1dHRvbk1pZGRsZXdhcmUnO1xuaW1wb3J0IFN0eWxlT3B0aW9ucyBmcm9tICcuLi9TdHlsZU9wdGlvbnMnO1xuaW1wb3J0IFRlbGVtZXRyeU1lYXN1cmVtZW50RXZlbnQsIHsgVGVsZW1ldHJ5RXhjZXB0aW9uTWVhc3VyZW1lbnRFdmVudCB9IGZyb20gJy4uL3R5cGVzL1RlbGVtZXRyeU1lYXN1cmVtZW50RXZlbnQnO1xuaW1wb3J0IFRvYXN0TWlkZGxld2FyZSBmcm9tICcuLi90eXBlcy9Ub2FzdE1pZGRsZXdhcmUnO1xuaW1wb3J0IFRyYWNrZXIgZnJvbSAnLi9pbnRlcm5hbC9UcmFja2VyJztcbmltcG9ydCBUeXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlIGZyb20gJy4uL3R5cGVzL1R5cGluZ0luZGljYXRvck1pZGRsZXdhcmUnO1xuaW1wb3J0IHVzZU1hcmtBbGxBc0Fja25vd2xlZGdlZCBmcm9tICcuL3VzZU1hcmtBbGxBc0Fja25vd2xlZGdlZCc7XG5pbXBvcnQgV2ViQ2hhdFJlZHV4Q29udGV4dCwgeyB1c2VEaXNwYXRjaCB9IGZyb20gJy4vaW50ZXJuYWwvV2ViQ2hhdFJlZHV4Q29udGV4dCc7XG5cbmltcG9ydCBhcHBseU1pZGRsZXdhcmUsIHtcbiAgZm9yTGVnYWN5UmVuZGVyZXIgYXMgYXBwbHlNaWRkbGV3YXJlRm9yTGVnYWN5UmVuZGVyZXIsXG4gIGZvclJlbmRlcmVyIGFzIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyXG59IGZyb20gJy4vbWlkZGxld2FyZS9hcHBseU1pZGRsZXdhcmUnO1xuXG4vLyBQcmVjb21waWxlR2xvYmFsaXplIGlzIGEgZ2VuZXJhdGVkIGZpbGUgYW5kIGlzIG5vdCBFUyBtb2R1bGUuIFR5cGVTY3JpcHQgZG9uJ3Qgd29yayB3aXRoIFVNRC5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBQcmVjb21waWxlZEdsb2JhbGl6ZSBmcm9tICcuLi9leHRlcm5hbC9QcmVjb21waWxlZEdsb2JhbGl6ZSc7XG5cbi8vIExpc3Qgb2YgUmVkdXggYWN0aW9ucyBmYWN0b3J5IHdlIGFyZSBob2lzdGluZyBhcyBXZWIgQ2hhdCBmdW5jdGlvbnNcbmNvbnN0IERJU1BBVENIRVJTID0ge1xuICBjbGVhclN1Z2dlc3RlZEFjdGlvbnMsXG4gIGRpc21pc3NOb3RpZmljYXRpb24sXG4gIGVtaXRUeXBpbmdJbmRpY2F0b3IsXG4gIG1hcmtBY3Rpdml0eSxcbiAgcG9zdEFjdGl2aXR5LFxuICBzZW5kRXZlbnQsXG4gIHNlbmRGaWxlcyxcbiAgc2VuZE1lc3NhZ2UsXG4gIHNlbmRNZXNzYWdlQmFjayxcbiAgc2VuZFBvc3RCYWNrLFxuICBzZXREaWN0YXRlSW50ZXJpbXMsXG4gIHNldERpY3RhdGVTdGF0ZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZEFjdGlvbkNvbnRleHQoeyBjYXJkQWN0aW9uTWlkZGxld2FyZSwgZGlyZWN0TGluZSwgZGlzcGF0Y2gsIG1hcmtBbGxBc0Fja25vd2xlZGdlZCB9KSB7XG4gIGNvbnN0IHJ1bk1pZGRsZXdhcmUgPSBhcHBseU1pZGRsZXdhcmUoXG4gICAgJ2NhcmQgYWN0aW9uJyxcbiAgICAuLi5zaW5nbGVUb0FycmF5KGNhcmRBY3Rpb25NaWRkbGV3YXJlKSxcbiAgICBjcmVhdGVEZWZhdWx0Q2FyZEFjdGlvbk1pZGRsZXdhcmUoKVxuICApKHsgZGlzcGF0Y2ggfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbkNhcmRBY3Rpb246IChjYXJkQWN0aW9uLCB7IHRhcmdldCB9OiB7IHRhcmdldD86IGFueSB9ID0ge30pID0+IHtcbiAgICAgIG1hcmtBbGxBc0Fja25vd2xlZGdlZCgpO1xuXG4gICAgICByZXR1cm4gcnVuTWlkZGxld2FyZSh7XG4gICAgICAgIGNhcmRBY3Rpb24sXG4gICAgICAgIGdldFNpZ25JblVybDpcbiAgICAgICAgICBjYXJkQWN0aW9uLnR5cGUgPT09ICdzaWduaW4nXG4gICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBjYXJkQWN0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdExpbmUuZ2V0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAqIEB0b2RvIFRPRE86IFtQM10gV2Ugc2hvdWxkIGNoYW5nZSB0aGlzIG9uZSB0byBhc3luYy9hd2FpdC5cbiAgICAgICAgICAgICAgICAgICAqICAgICAgIFRoaXMgaXMgdGhlIGZpcnN0IHBsYWNlIGluIHRoaXMgcHJvamVjdCB0byB1c2UgYXN5bmMuXG4gICAgICAgICAgICAgICAgICAgKiAgICAgICBUaHVzLCB3ZSBuZWVkIHRvIGFkZCBAYmFiZWwvcGx1Z2luLXRyYW5zZm9ybS1ydW50aW1lIGFuZCBAYmFiZWwvcnVudGltZS5cbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVUb1Byb21pc2UoZGlyZWN0TGluZS5nZXRTZXNzaW9uSWQoKSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkID0+IGAke3ZhbHVlfSR7ZW5jb2RlVVJJQ29tcG9uZW50KGAmY29kZV9jaGFsbGVuZ2U9JHtzZXNzaW9uSWR9YCl9YFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBPQXV0aCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgRGlyZWN0IExpbmUgYWRhcHRlci4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB0YXJnZXRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JvdXBBY3Rpdml0aWVzQ29udGV4dCh7IGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUsIGdyb3VwVGltZXN0YW1wIH0pIHtcbiAgY29uc3QgcnVuTWlkZGxld2FyZSA9IGFwcGx5TWlkZGxld2FyZShcbiAgICAnZ3JvdXAgYWN0aXZpdGllcycsXG4gICAgLi4uc2luZ2xlVG9BcnJheShncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlKSxcbiAgICBjcmVhdGVEZWZhdWx0R3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSh7IGdyb3VwVGltZXN0YW1wIH0pXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBncm91cEFjdGl2aXRpZXM6IHJ1bk1pZGRsZXdhcmUoe30pXG4gIH07XG59XG5cbmZ1bmN0aW9uIG1lcmdlU3RyaW5nc092ZXJyaWRlcyhsb2NhbGl6ZWRTdHJpbmdzLCBsYW5ndWFnZSwgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzKSB7XG4gIGlmICghb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplZFN0cmluZ3M7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IG1lcmdlZCA9IG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyhsb2NhbGl6ZWRTdHJpbmdzLCBsYW5ndWFnZSk7XG5cbiAgICBpZiAoIWlzT2JqZWN0KG1lcmdlZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyBmdW5jdGlvbiBtdXN0IHJldHVybiBhbiBvYmplY3QuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lcmdlZDtcbiAgfVxuXG4gIGlmICghaXNPYmplY3Qob3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyBtdXN0IGJlIGVpdGhlciBhIGZ1bmN0aW9uLCBhbiBvYmplY3QsIG9yIGZhbHN5LicpO1xuICB9XG5cbiAgcmV0dXJuIHsgLi4ubG9jYWxpemVkU3RyaW5ncywgLi4ub3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzIH07XG59XG5cbi8vIEl0IHNlZW1zIFwicmVhY3QvcmVxdWlyZS1kZWZhdWx0LXByb3BzXCIgZGlkIG5vdCBwaWNrIHVwIGBDb21wb3NlckNvcmUuZGVmYXVsdFByb3BzYC5cbi8vIEFuZCBpdCBmYWxzZWx5IGNvbXBsYWludCBgb3B0aW9uYWw/OiBzdHJpbmdgIG11c3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYENvbXBvc2VyQ29yZS5kZWZhdWx0UHJvcHMub3B0aW9uYWwgPSB1bmRlZmluZWRgLCBldmVuIHdlIGFscmVhZHkgc2V0IGl0IGJlbG93LlxuLy8gU2luY2Ugd2Ugc2V0IGJvdGggVHlwZVNjcmlwdCBgUHJvcHNgIGNsYXNzIGFuZCBgQ29tcG9zZXJDb3JlLnByb3BUeXBlc2AsIHRoaXMgY2hlY2sgd2lsbCBiZSBkb25lIHRoZXJlIGFzIHdlbGwuXG4vLyBJZ25vcmluZyBpdCBpbiBUeXBlU2NyaXB0IHZlcnNpb24gc2hvdWxkIGJlIHNhZmUsIGFzIHdlIGhhdmUgYHByb3BUeXBlc2AgdmVyc2lvbiB0byBwcm90ZWN0IHVzLlxuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9yZXF1aXJlLWRlZmF1bHQtcHJvcHMgKi9cbnR5cGUgQ29tcG9zZXJDb3JlUHJvcHMgPSB7XG4gIGFjdGl2aXR5TWlkZGxld2FyZT86IE9uZU9yTWFueTxBY3Rpdml0eU1pZGRsZXdhcmU+O1xuICBhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmU/OiBPbmVPck1hbnk8QWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlPjtcbiAgYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmU/OiBPbmVPck1hbnk8QXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmU+O1xuICBhdHRhY2htZW50TWlkZGxld2FyZT86IE9uZU9yTWFueTxBdHRhY2htZW50TWlkZGxld2FyZT47XG4gIGF2YXRhck1pZGRsZXdhcmU/OiBPbmVPck1hbnk8QXZhdGFyTWlkZGxld2FyZT47XG4gIGNhcmRBY3Rpb25NaWRkbGV3YXJlPzogT25lT3JNYW55PENhcmRBY3Rpb25NaWRkbGV3YXJlPjtcbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIGRpcj86IHN0cmluZztcbiAgZGlyZWN0TGluZTogRGlyZWN0TGluZUpTQm90Q29ubmVjdGlvbjtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTD86IChibG9iOiBCbG9iLCBtYXhXaWR0aDogbnVtYmVyLCBtYXhIZWlnaHQ6IG51bWJlciwgdHlwZTogc3RyaW5nLCBxdWFsaXR5OiBudW1iZXIpID0+IHN0cmluZztcbiAgZ3JhbW1hcnM/OiBhbnk7XG4gIGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmU/OiBPbmVPck1hbnk8R3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZT47XG4gIGludGVybmFsRXJyb3JCb3hDbGFzcz86IFJlYWN0LkNvbXBvbmVudCB8IEZ1bmN0aW9uO1xuICBsb2NhbGU/OiBzdHJpbmc7XG4gIG9uVGVsZW1ldHJ5PzogKGV2ZW50OiBUZWxlbWV0cnlNZWFzdXJlbWVudEV2ZW50KSA9PiB2b2lkO1xuICBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3M/OiBMb2NhbGl6ZWRTdHJpbmdzIHwgKChzdHJpbmdzOiBMb2NhbGl6ZWRTdHJpbmdzLCBsYW5ndWFnZTogc3RyaW5nKSA9PiBMb2NhbGl6ZWRTdHJpbmdzKTtcbiAgcmVuZGVyTWFya2Rvd24/OiAobWFya2Rvd246IHN0cmluZywgeyBtYXJrZG93blJlc3BlY3RDUkxGOiBib29sZWFuIH0sIHsgZXh0ZXJuYWxMaW5rQWx0OiBzdHJpbmcgfSkgPT4gc3RyaW5nO1xuICBzY3JvbGxUb0VuZEJ1dHRvbk1pZGRsZXdhcmU/OiBPbmVPck1hbnk8U2Nyb2xsVG9FbmRCdXR0b25NaWRkbGV3YXJlPjtcbiAgc2VsZWN0Vm9pY2U/OiAodm9pY2VzOiB0eXBlb2Ygd2luZG93LlNwZWVjaFN5bnRoZXNpc1ZvaWNlW10sIGFjdGl2aXR5OiBEaXJlY3RMaW5lQWN0aXZpdHkpID0+IHZvaWQ7XG4gIHNlbmRUeXBpbmdJbmRpY2F0b3I/OiBib29sZWFuO1xuICBzdHlsZU9wdGlvbnM/OiBTdHlsZU9wdGlvbnM7XG4gIHRvYXN0TWlkZGxld2FyZT86IE9uZU9yTWFueTxUb2FzdE1pZGRsZXdhcmU+O1xuICB0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlPzogT25lT3JNYW55PFR5cGluZ0luZGljYXRvck1pZGRsZXdhcmU+O1xuICB1c2VySUQ/OiBzdHJpbmc7XG4gIHVzZXJuYW1lPzogc3RyaW5nO1xuXG4gIC8qKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIFwiYWN0aXZpdHlNaWRkbGV3YXJlXCIgaW5zdGVhZC4gKi9cbiAgYWN0aXZpdHlSZW5kZXJlcj86IGFueTsgLy8gVE9ETzogW1A0XSBSZW1vdmUgb24gb3IgYWZ0ZXIgMjAyMi0wNi0xNS5cbiAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgXCJhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmVcIiBpbnN0ZWFkLiAqL1xuICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyPzogYW55OyAvLyBUT0RPOiBbUDRdIFJlbW92ZSBvbiBvciBhZnRlciAyMDIyLTA2LTE1LlxuICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBcImF0dGFjaG1lbnRNaWRkbGV3YXJlXCIgaW5zdGVhZC4gKi9cbiAgYXR0YWNobWVudFJlbmRlcmVyPzogYW55OyAvLyBUT0RPOiBbUDRdIFJlbW92ZSBvbiBvciBhZnRlciAyMDIyLTA2LTE1LlxuICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBcImF2YXRhck1pZGRsZXdhcmVcIiBpbnN0ZWFkLiAqL1xuICBhdmF0YXJSZW5kZXJlcj86IGFueTsgLy8gVE9ETzogW1A0XSBSZW1vdmUgb24gb3IgYWZ0ZXIgMjAyMi0wNi0xNS5cbiAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgXCJzdHlsZU9wdGlvbnMuZ3JvdXBUaW1lc3RhbXBcIiBpbnN0ZWFkLiAqL1xuICBncm91cFRpbWVzdGFtcD86IGJvb2xlYW4gfCBudW1iZXI7IC8vIFRPRE86IFtQNF0gUmVtb3ZlIG9uIG9yIGFmdGVyIDIwMjItMDEtMDFcbiAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgXCJzdHlsZU9wdGlvbnMuc2VuZFRpbWVvdXRcIiBpbnN0ZWFkLiAqL1xuICBzZW5kVGltZW91dD86IG51bWJlcjsgLy8gVE9ETzogW1A0XSBSZW1vdmUgb24gb3IgYWZ0ZXIgMjAyMi0wMS0wMS5cbiAgLyoqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgXCJ0b2FzdE1pZGRsZXdhcmVcIiBpbnN0ZWFkLiAqL1xuICB0b2FzdFJlbmRlcmVyPzogYW55OyAvLyBUT0RPOiBbUDRdIFJlbW92ZSBvbiBvciBhZnRlciAyMDIyLTA2LTE1LlxuICAvKiogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBcInR5cGluZ0luZGljYXRvclJlbmRlcmVyXCIgaW5zdGVhZC4gKi9cbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI/OiBhbnk7IC8vIFRPRE86IFtQNF0gUmVtb3ZlIG9uIG9yIGFmdGVyIDIwMjItMDYtMTUuXG59O1xuLyogZXNsaW50LWVuYWJsZSByZWFjdC9yZXF1aXJlLWRlZmF1bHQtcHJvcHMgKi9cblxuY29uc3QgQ29tcG9zZXJDb3JlOiBGQzxDb21wb3NlckNvcmVQcm9wcz4gPSAoe1xuICBhY3Rpdml0eU1pZGRsZXdhcmUsXG4gIGFjdGl2aXR5UmVuZGVyZXIsXG4gIGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSxcbiAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcixcbiAgYXR0YWNobWVudE1pZGRsZXdhcmUsXG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlLFxuICBhdHRhY2htZW50UmVuZGVyZXIsXG4gIGF2YXRhck1pZGRsZXdhcmUsXG4gIGF2YXRhclJlbmRlcmVyLFxuICBjYXJkQWN0aW9uTWlkZGxld2FyZSxcbiAgY2hpbGRyZW4sXG4gIGRpcixcbiAgZGlyZWN0TGluZSxcbiAgZGlzYWJsZWQsXG4gIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMLFxuICBncmFtbWFycyxcbiAgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSxcbiAgZ3JvdXBUaW1lc3RhbXAsXG4gIGludGVybmFsRXJyb3JCb3hDbGFzcyxcbiAgbG9jYWxlLFxuICBvblRlbGVtZXRyeSxcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzLFxuICByZW5kZXJNYXJrZG93bixcbiAgc2Nyb2xsVG9FbmRCdXR0b25NaWRkbGV3YXJlLFxuICBzZWxlY3RWb2ljZSxcbiAgc2VuZFRpbWVvdXQsXG4gIHNlbmRUeXBpbmdJbmRpY2F0b3IsXG4gIHN0eWxlT3B0aW9ucyxcbiAgdG9hc3RNaWRkbGV3YXJlLFxuICB0b2FzdFJlbmRlcmVyLFxuICB0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlLFxuICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcixcbiAgdXNlcklELFxuICB1c2VybmFtZVxufSkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHRlbGVtZXRyeURpbWVuc2lvbnNSZWYgPSB1c2VSZWYoe30pO1xuXG4gIGNvbnN0IHBhdGNoZWREaXIgPSB1c2VNZW1vKCgpID0+IChkaXIgPT09ICdsdHInIHx8IGRpciA9PT0gJ3J0bCcgPyBkaXIgOiAnYXV0bycpLCBbZGlyXSk7XG4gIGNvbnN0IHBhdGNoZWRHcmFtbWFycyA9IHVzZU1lbW8oKCkgPT4gZ3JhbW1hcnMgfHwgW10sIFtncmFtbWFyc10pO1xuICBjb25zdCBwYXRjaGVkU3R5bGVPcHRpb25zID0gdXNlTWVtbyhcbiAgICAoKSA9PiBub3JtYWxpemVTdHlsZU9wdGlvbnMocGF0Y2hTdHlsZU9wdGlvbnNGcm9tRGVwcmVjYXRlZFByb3BzKHN0eWxlT3B0aW9ucywgeyBncm91cFRpbWVzdGFtcCwgc2VuZFRpbWVvdXQgfSkpLFxuICAgIFtncm91cFRpbWVzdGFtcCwgc2VuZFRpbWVvdXQsIHN0eWxlT3B0aW9uc11cbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHNldExhbmd1YWdlKGxvY2FsZSkpO1xuICB9LCBbZGlzcGF0Y2gsIGxvY2FsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHlwZW9mIHNlbmRUaW1lb3V0ID09PSAnbnVtYmVyJyAmJiBkaXNwYXRjaChzZXRTZW5kVGltZW91dChzZW5kVGltZW91dCkpO1xuICB9LCBbZGlzcGF0Y2gsIHNlbmRUaW1lb3V0XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaChzZXRTZW5kVHlwaW5nSW5kaWNhdG9yKCEhc2VuZFR5cGluZ0luZGljYXRvcikpO1xuICB9LCBbZGlzcGF0Y2gsIHNlbmRUeXBpbmdJbmRpY2F0b3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKFxuICAgICAgY3JlYXRlQ29ubmVjdEFjdGlvbih7XG4gICAgICAgIGRpcmVjdExpbmUsXG4gICAgICAgIHVzZXJJRCxcbiAgICAgICAgdXNlcm5hbWVcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIEB0b2RvIFRPRE86IFtQM10gZGlzY29ubmVjdCgpIGlzIGFuIGFzeW5jIGNhbGwgKHBlbmRpbmcgLT4gZnVsZmlsbGVkKSwgd2UgbmVlZCB0byB3YWl0LCBvciBjaGFuZ2UgaXQgdG8gcmVjb25uZWN0KClcbiAgICAgICAqL1xuICAgICAgZGlzcGF0Y2goZGlzY29ubmVjdCgpKTtcbiAgICB9O1xuICB9LCBbZGlzcGF0Y2gsIGRpcmVjdExpbmUsIHVzZXJJRCwgdXNlcm5hbWVdKTtcblxuICBjb25zdCBtYXJrQWxsQXNBY2tub3dsZWRnZWQgPSB1c2VNYXJrQWxsQXNBY2tub3dsZWRnZWQoKTtcblxuICBjb25zdCBjYXJkQWN0aW9uQ29udGV4dCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gY3JlYXRlQ2FyZEFjdGlvbkNvbnRleHQoeyBjYXJkQWN0aW9uTWlkZGxld2FyZSwgZGlyZWN0TGluZSwgZGlzcGF0Y2gsIG1hcmtBbGxBc0Fja25vd2xlZGdlZCB9KSxcbiAgICBbY2FyZEFjdGlvbk1pZGRsZXdhcmUsIGRpcmVjdExpbmUsIGRpc3BhdGNoLCBtYXJrQWxsQXNBY2tub3dsZWRnZWRdXG4gICk7XG5cbiAgY29uc3QgcGF0Y2hlZFNlbGVjdFZvaWNlID0gdXNlTWVtbyhcbiAgICAoKSA9PiBzZWxlY3RWb2ljZSB8fCBkZWZhdWx0U2VsZWN0Vm9pY2UuYmluZChudWxsLCB7IGxhbmd1YWdlOiBsb2NhbGUgfSksXG4gICAgW2xvY2FsZSwgc2VsZWN0Vm9pY2VdXG4gICk7XG5cbiAgY29uc3QgZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIGNyZWF0ZUdyb3VwQWN0aXZpdGllc0NvbnRleHQoe1xuICAgICAgICBncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlLFxuICAgICAgICBncm91cFRpbWVzdGFtcDogcGF0Y2hlZFN0eWxlT3B0aW9ucy5ncm91cFRpbWVzdGFtcFxuICAgICAgfSksXG4gICAgW2dyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUsIHBhdGNoZWRTdHlsZU9wdGlvbnMuZ3JvdXBUaW1lc3RhbXBdXG4gICk7XG5cbiAgY29uc3QgaG9pc3RlZERpc3BhdGNoZXJzID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgbWFwTWFwKFxuICAgICAgICBESVNQQVRDSEVSUyxcbiAgICAgICAgZGlzcGF0Y2hlciA9PlxuICAgICAgICAgICguLi5hcmdzKSA9PlxuICAgICAgICAgICAgZGlzcGF0Y2goZGlzcGF0Y2hlciguLi5hcmdzKSlcbiAgICAgICksXG4gICAgW2Rpc3BhdGNoXVxuICApO1xuXG4gIGNvbnN0IHBhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzID0gdXNlTWVtbyhcbiAgICAoKSA9PiBtZXJnZVN0cmluZ3NPdmVycmlkZXMoZ2V0QWxsTG9jYWxpemVkU3RyaW5ncygpW25vcm1hbGl6ZUxhbmd1YWdlKGxvY2FsZSldLCBsb2NhbGUsIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyksXG4gICAgW2xvY2FsZSwgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzXVxuICApO1xuXG4gIGNvbnN0IGxvY2FsaXplZEdsb2JhbGl6ZSA9IHVzZU1lbW88UHJlY29tcGlsZWRHbG9iYWxpemVUeXBlPigoKSA9PiB7XG4gICAgY29uc3QgeyBHTE9CQUxJWkUsIEdMT0JBTElaRV9MQU5HVUFHRSB9ID0gcGF0Y2hlZExvY2FsaXplZFN0cmluZ3MgfHwge307XG5cbiAgICByZXR1cm4gR0xPQkFMSVpFIHx8IChHTE9CQUxJWkVfTEFOR1VBR0UgJiYgUHJlY29tcGlsZWRHbG9iYWxpemUoR0xPQkFMSVpFX0xBTkdVQUdFKSkgfHwgUHJlY29tcGlsZWRHbG9iYWxpemUoJ2VuJyk7XG4gIH0sIFtwYXRjaGVkTG9jYWxpemVkU3RyaW5nc10pO1xuXG4gIGNvbnN0IHRyYWNrRGltZW5zaW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKG5hbWU6IHN0cmluZywgZGF0YTogYW55KSA9PiB7XG4gICAgICBpZiAoIW5hbWUgfHwgdHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBUZWxlbWV0cnkgZGltZW5zaW9uIG5hbWUgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiBkYXRhO1xuXG4gICAgICBpZiAodHlwZSAhPT0gJ3N0cmluZycgJiYgdHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybignYm90ZnJhbWV3b3JrLXdlYmNoYXQ6IFRlbGVtZXRyeSBkaW1lbnNpb24gZGF0YSBtdXN0IGJlIGEgc3RyaW5nIG9yIHVuZGVmaW5lZC4nKTtcbiAgICAgIH1cblxuICAgICAgdGVsZW1ldHJ5RGltZW5zaW9uc1JlZi5jdXJyZW50ID0gdXBkYXRlSW4oXG4gICAgICAgIHRlbGVtZXRyeURpbWVuc2lvbnNSZWYuY3VycmVudCxcbiAgICAgICAgW25hbWVdLFxuICAgICAgICB0eXBlID09PSAndW5kZWZpbmVkJyA/IGRhdGEgOiAoKSA9PiBkYXRhXG4gICAgICApO1xuICAgIH0sXG4gICAgW3RlbGVtZXRyeURpbWVuc2lvbnNSZWZdXG4gICk7XG5cbiAgY29uc3QgcGF0Y2hlZEFjdGl2aXR5UmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBhY3Rpdml0eVJlbmRlcmVyICYmXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdXZWIgQ2hhdDogXCJhY3Rpdml0eVJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJhY3Rpdml0eU1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgYWN0aXZpdHlSZW5kZXJlciB8fFxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICdhY3Rpdml0eScsXG4gICAgICAgIHsgc3RyaWN0OiBmYWxzZSB9LFxuICAgICAgICAuLi5zaW5nbGVUb0FycmF5KGFjdGl2aXR5TWlkZGxld2FyZSksXG4gICAgICAgICgpID0+XG4gICAgICAgICAgKCkgPT5cbiAgICAgICAgICAoeyBhY3Rpdml0eSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoYWN0aXZpdHkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3IgYWN0aXZpdHkgb2YgdHlwZSBcIiR7YWN0aXZpdHkudHlwZX1cImApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY3Rpdml0eSB0byByZW5kZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthY3Rpdml0eU1pZGRsZXdhcmUsIGFjdGl2aXR5UmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQWN0aXZpdHlTdGF0dXNSZW5kZXJlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXIgJiZcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcImFjdGl2aXR5U3RhdHVzUmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcImFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyIHx8XG4gICAgICBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlcihcbiAgICAgICAgJ2FjdGl2aXR5IHN0YXR1cycsXG4gICAgICAgIHsgc3RyaWN0OiBmYWxzZSB9LFxuICAgICAgICAuLi5zaW5nbGVUb0FycmF5KGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICgpID0+IGZhbHNlXG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUsIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICdhdHRhY2htZW50IGZvciBzY3JlZW4gcmVhZGVyJyxcbiAgICAgICAgeyBzdHJpY3Q6IHRydWUgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheShhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+XG4gICAgICAgICAgKCkgPT5cbiAgICAgICAgICAoeyBhdHRhY2htZW50IH0pID0+IHtcbiAgICAgICAgICAgIGlmIChhdHRhY2htZW50KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihgTm8gcmVuZGVyZXIgZm9yIGF0dGFjaG1lbnQgZm9yIHNjcmVlbiByZWFkZXIgb2YgdHlwZSBcIiR7YXR0YWNobWVudC5jb250ZW50VHlwZX1cImApO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgKiBAdG9kbyBUT0RPOiBbUDRdIE1pZ2h0IGJlIGFibGUgdG8gdGhyb3cgd2l0aG91dCByZXR1cm5pbmcgYSBmdW5jdGlvbiAtLSBpbnZlc3RpZ2F0ZSBhbmQgcG9zc2libHkgZml4XG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGF0dGFjaG1lbnQgdG8gcmVuZGVyJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICkoe30pLFxuICAgIFthdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZV1cbiAgKTtcblxuICBjb25zdCBwYXRjaGVkQXR0YWNobWVudFJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnRSZW5kZXJlcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwiYXR0YWNobWVudFJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJhdHRhY2htZW50TWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGF0dGFjaG1lbnRSZW5kZXJlcjtcbiAgICB9XG5cbiAgICAvLyBBdHRhY2htZW50IHJlbmRlcmVyXG4gICAgcmV0dXJuIGFwcGx5TWlkZGxld2FyZUZvckxlZ2FjeVJlbmRlcmVyKFxuICAgICAgJ2F0dGFjaG1lbnQnLFxuICAgICAgLi4uc2luZ2xlVG9BcnJheShhdHRhY2htZW50TWlkZGxld2FyZSksXG4gICAgICAoKSA9PlxuICAgICAgICAoKSA9PlxuICAgICAgICAoeyBhdHRhY2htZW50IH0pID0+IHtcbiAgICAgICAgICBpZiAoYXR0YWNobWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3IgYXR0YWNobWVudCBvZiB0eXBlIFwiJHthdHRhY2htZW50LmNvbnRlbnRUeXBlfVwiYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYXR0YWNobWVudCB0byByZW5kZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApKHt9KTtcbiAgfSwgW2F0dGFjaG1lbnRNaWRkbGV3YXJlLCBhdHRhY2htZW50UmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQXZhdGFyUmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBhdmF0YXJSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwiYXZhdGFyUmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcImF2YXRhck1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgYXZhdGFyUmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAnYXZhdGFyJyxcbiAgICAgICAgeyBzdHJpY3Q6IGZhbHNlIH0sXG4gICAgICAgIC4uLnNpbmdsZVRvQXJyYXkoYXZhdGFyTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICgpID0+IGZhbHNlXG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthdmF0YXJNaWRkbGV3YXJlLCBhdmF0YXJSZW5kZXJlcl0pO1xuXG4gIGNvbnN0IHBhdGNoZWRUb2FzdFJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdG9hc3RSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwidG9hc3RSZW5kZXJlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiAyMDIyLTA2LTE1LCBwbGVhc2UgdXNlIFwidG9hc3RNaWRkbGV3YXJlXCIgaW5zdGVhZC4nXG4gICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRvYXN0UmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAndG9hc3QnLFxuICAgICAgICB7IHN0cmljdDogZmFsc2UgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheSh0b2FzdE1pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PlxuICAgICAgICAgICgpID0+XG4gICAgICAgICAgKHsgbm90aWZpY2F0aW9uIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3Igbm90aWZpY2F0aW9uIG9mIHR5cGUgXCIke25vdGlmaWNhdGlvbi5jb250ZW50VHlwZX1cImApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBub3RpZmljYXRpb24gdG8gcmVuZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgKSh7fSlcbiAgICApO1xuICB9LCBbdG9hc3RNaWRkbGV3YXJlLCB0b2FzdFJlbmRlcmVyXSk7XG5cbiAgY29uc3QgcGF0Y2hlZFR5cGluZ0luZGljYXRvclJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIgJiZcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcInR5cGluZ0luZGljYXRvclJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJ0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlXCIgaW5zdGVhZC4nXG4gICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGluZ0luZGljYXRvclJlbmRlcmVyIHx8XG4gICAgICBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlcihcbiAgICAgICAgJ3R5cGluZyBpbmRpY2F0b3InLFxuICAgICAgICB7IHN0cmljdDogZmFsc2UgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheSh0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlKSxcbiAgICAgICAgKCkgPT4gKCkgPT4gKCkgPT4gZmFsc2VcbiAgICAgICkoe30pXG4gICAgKTtcbiAgfSwgW3R5cGluZ0luZGljYXRvck1pZGRsZXdhcmUsIHR5cGluZ0luZGljYXRvclJlbmRlcmVyXSk7XG5cbiAgY29uc3Qgc2Nyb2xsVG9FbmRCdXR0b25SZW5kZXJlcjogU2Nyb2xsVG9FbmRCdXR0b25Db21wb25lbnRGYWN0b3J5ID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICdzY3JvbGwgdG8gZW5kIGJ1dHRvbicsXG4gICAgICAgIHsgc3RyaWN0OiB0cnVlIH0sXG4gICAgICAgIC4uLnNpbmdsZVRvQXJyYXkoc2Nyb2xsVG9FbmRCdXR0b25NaWRkbGV3YXJlKSxcbiAgICAgICAgKCkgPT4gKCkgPT4gKCkgPT4gZmFsc2VcbiAgICAgICkoKSBhcyBhbnksXG4gICAgW3Njcm9sbFRvRW5kQnV0dG9uTWlkZGxld2FyZV1cbiAgKTtcblxuICAvKipcbiAgICogVGhpcyBpcyBhIGhlYXZ5IGZ1bmN0aW9uLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gYmUgb25seSBjYWxsZWQgd2hlbiB0aGVyZSBpcyBhIG5lZWQgdG8gcmVjcmVhdGUgYnVzaW5lc3MgbG9naWMsIGUuZy5cbiAgICogLSBVc2VyIElEIGNoYW5nZWQsIGNhdXNpbmcgYWxsIHNlbmQqIGZ1bmN0aW9ucyB0byBiZSB1cGRhdGVkXG4gICAqIC0gc2VuZFxuICAgKiBAdG9kbyBUT0RPOiBbUDNdIFdlIHNob3VsZCB0aGluayBhYm91dCBpZiB3ZSBhbGxvdyB0aGUgdXNlciB0byBjaGFuZ2Ugb25TZW5kQm94VmFsdWVDaGFuZ2VkL3NlbmRCb3hWYWx1ZSwgZS5nLlxuICAgKiAxLiBUdXJucyB0ZXh0IGludG8gVVBQRVJDQVNFXG4gICAqIDIuIEZpbHRlciBvdXQgcHJvZmFuaXR5XG4gICAqIEB0b2RvIFRPRE86IFtQNF0gUmV2aXNpdCBhbGwgbWVtYmVycyBvZiBjb250ZXh0XG4gICAqICAgICAgIFRoaXMgY29udGV4dCBzaG91bGQgY29uc2lzdCBvZiBtZW1iZXJzIHRoYXQgYXJlIG5vdCBpbiB0aGUgUmVkdXggc3RvcmVcbiAgICogICAgICAgaS5lLiBtZW1iZXJzIHRoYXQgYXJlIG5vdCBpbnRlcmVzdGVkIGluIG90aGVyIHR5cGVzIG9mIFVJc1xuICAgKi9cbiAgY29uc3QgY29udGV4dCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIC4uLmNhcmRBY3Rpb25Db250ZXh0LFxuICAgICAgLi4uZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCxcbiAgICAgIC4uLmhvaXN0ZWREaXNwYXRjaGVycyxcbiAgICAgIGFjdGl2aXR5UmVuZGVyZXI6IHBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyLFxuICAgICAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcjogcGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIsXG4gICAgICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXI6IHBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXIsXG4gICAgICBhdHRhY2htZW50UmVuZGVyZXI6IHBhdGNoZWRBdHRhY2htZW50UmVuZGVyZXIsXG4gICAgICBhdmF0YXJSZW5kZXJlcjogcGF0Y2hlZEF2YXRhclJlbmRlcmVyLFxuICAgICAgZGlyOiBwYXRjaGVkRGlyLFxuICAgICAgZGlyZWN0TGluZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkwsXG4gICAgICBncmFtbWFyczogcGF0Y2hlZEdyYW1tYXJzLFxuICAgICAgaW50ZXJuYWxFcnJvckJveENsYXNzLFxuICAgICAgbGFuZ3VhZ2U6IGxvY2FsZSxcbiAgICAgIGxvY2FsaXplZEdsb2JhbGl6ZVN0YXRlOiBbbG9jYWxpemVkR2xvYmFsaXplXSxcbiAgICAgIGxvY2FsaXplZFN0cmluZ3M6IHBhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzLFxuICAgICAgb25UZWxlbWV0cnksXG4gICAgICByZW5kZXJNYXJrZG93bixcbiAgICAgIHNjcm9sbFRvRW5kQnV0dG9uUmVuZGVyZXIsXG4gICAgICBzZWxlY3RWb2ljZTogcGF0Y2hlZFNlbGVjdFZvaWNlLFxuICAgICAgc2VuZFR5cGluZ0luZGljYXRvcixcbiAgICAgIHN0eWxlT3B0aW9uczogcGF0Y2hlZFN0eWxlT3B0aW9ucyxcbiAgICAgIHRlbGVtZXRyeURpbWVuc2lvbnNSZWYsXG4gICAgICB0b2FzdFJlbmRlcmVyOiBwYXRjaGVkVG9hc3RSZW5kZXJlcixcbiAgICAgIHRyYWNrRGltZW5zaW9uLFxuICAgICAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI6IHBhdGNoZWRUeXBpbmdJbmRpY2F0b3JSZW5kZXJlcixcbiAgICAgIHVzZXJJRCxcbiAgICAgIHVzZXJuYW1lXG4gICAgfSksXG4gICAgW1xuICAgICAgY2FyZEFjdGlvbkNvbnRleHQsXG4gICAgICBkaXJlY3RMaW5lLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTCxcbiAgICAgIGdyb3VwQWN0aXZpdGllc0NvbnRleHQsXG4gICAgICBob2lzdGVkRGlzcGF0Y2hlcnMsXG4gICAgICBpbnRlcm5hbEVycm9yQm94Q2xhc3MsXG4gICAgICBsb2NhbGUsXG4gICAgICBsb2NhbGl6ZWRHbG9iYWxpemUsXG4gICAgICBvblRlbGVtZXRyeSxcbiAgICAgIHBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIsXG4gICAgICBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZEF0dGFjaG1lbnRSZW5kZXJlcixcbiAgICAgIHBhdGNoZWRBdmF0YXJSZW5kZXJlcixcbiAgICAgIHBhdGNoZWREaXIsXG4gICAgICBwYXRjaGVkR3JhbW1hcnMsXG4gICAgICBwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyxcbiAgICAgIHBhdGNoZWRTZWxlY3RWb2ljZSxcbiAgICAgIHBhdGNoZWRTdHlsZU9wdGlvbnMsXG4gICAgICBwYXRjaGVkVG9hc3RSZW5kZXJlcixcbiAgICAgIHBhdGNoZWRUeXBpbmdJbmRpY2F0b3JSZW5kZXJlcixcbiAgICAgIHJlbmRlck1hcmtkb3duLFxuICAgICAgc2Nyb2xsVG9FbmRCdXR0b25SZW5kZXJlcixcbiAgICAgIHNlbmRUeXBpbmdJbmRpY2F0b3IsXG4gICAgICB0ZWxlbWV0cnlEaW1lbnNpb25zUmVmLFxuICAgICAgdHJhY2tEaW1lbnNpb24sXG4gICAgICB1c2VySUQsXG4gICAgICB1c2VybmFtZVxuICAgIF1cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxXZWJDaGF0QVBJQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17Y29udGV4dH0+XG4gICAgICB7dHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oY29udGV4dCkgOiBjaGlsZHJlbn1cbiAgICAgIHtvblRlbGVtZXRyeSAmJiA8VHJhY2tlciAvPn1cbiAgICA8L1dlYkNoYXRBUElDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcblxuLyoqXG4gKiBAdG9kbyBUT0RPOiBbUDNdIFdlIHNob3VsZCBjb25zaWRlciBtb3Zpbmcgc29tZSBkYXRhIGZyb20gUmVkdXggc3RvcmUgdG8gcHJvcHNcbiAqICAgICAgIEFsdGhvdWdoIHdlIHVzZSBgY29ubmVjdFRvV2ViQ2hhdGAgdG8gaGlkZSB0aGUgZGV0YWlscyBvZiBhY2Nlc3NvciBvZiBSZWR1eCBzdG9yZSxcbiAqICAgICAgIHdlIHNob3VsZCBjbGVhbiB1cCB0aGUgcmVzcG9uc2liaWxpdHkgYmV0d2VlbiBDb250ZXh0IGFuZCBSZWR1eCBzdG9yZVxuICogICAgICAgV2Ugc2hvdWxkIGRlY2lkZSB3aGljaCBkYXRhIGlzIG5lZWRlZCBmb3IgUmVhY3QgYnV0IG5vdCBpbiBvdGhlciBlbnZpcm9ubWVudCBzdWNoIGFzIENMSS9WU0NvZGVcbiAqL1xuQ29tcG9zZXJDb3JlLmRlZmF1bHRQcm9wcyA9IHtcbiAgYWN0aXZpdHlNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGFjdGl2aXR5UmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgYWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgYXR0YWNobWVudE1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgYXR0YWNobWVudFJlbmRlcmVyOiB1bmRlZmluZWQsXG4gIGF2YXRhck1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgYXZhdGFyUmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgY2FyZEFjdGlvbk1pZGRsZXdhcmU6IHVuZGVmaW5lZCxcbiAgY2hpbGRyZW46IHVuZGVmaW5lZCxcbiAgZGlyOiAnYXV0bycsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkw6IHVuZGVmaW5lZCxcbiAgZ3JhbW1hcnM6IFtdLFxuICBncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGdyb3VwVGltZXN0YW1wOiB1bmRlZmluZWQsXG4gIGludGVybmFsRXJyb3JCb3hDbGFzczogdW5kZWZpbmVkLFxuICBsb2NhbGU6IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJ2VuLVVTJyxcbiAgb25UZWxlbWV0cnk6IHVuZGVmaW5lZCxcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzOiB1bmRlZmluZWQsXG4gIHJlbmRlck1hcmtkb3duOiB1bmRlZmluZWQsXG4gIHNjcm9sbFRvRW5kQnV0dG9uTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBzZWxlY3RWb2ljZTogdW5kZWZpbmVkLFxuICBzZW5kVGltZW91dDogdW5kZWZpbmVkLFxuICBzZW5kVHlwaW5nSW5kaWNhdG9yOiBmYWxzZSxcbiAgc3R5bGVPcHRpb25zOiB7fSxcbiAgdG9hc3RNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIHRvYXN0UmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcjogdW5kZWZpbmVkLFxuICB1c2VySUQ6ICcnLFxuICB1c2VybmFtZTogJydcbn07XG5cbkNvbXBvc2VyQ29yZS5wcm9wVHlwZXMgPSB7XG4gIGFjdGl2aXR5TWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhY3Rpdml0eVJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgYWN0aXZpdHlTdGF0dXNNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhdHRhY2htZW50TWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBhdHRhY2htZW50UmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBhdmF0YXJNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGF2YXRhclJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgY2FyZEFjdGlvbk1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIGRpcjogUHJvcFR5cGVzLm9uZU9mKFsnYXV0bycsICdsdHInLCAncnRsJ10pLFxuICBkaXJlY3RMaW5lOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIGFjdGl2aXR5JDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHN1YnNjcmliZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgY29ubmVjdGlvblN0YXR1cyQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICBzdWJzY3JpYmU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICB9KS5pc1JlcXVpcmVkLFxuICAgIGVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZ2V0U2Vzc2lvbklkOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBwb3N0QWN0aXZpdHk6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgcmVmZXJlbmNlR3JhbW1hcklEOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRva2VuOiBQcm9wVHlwZXMuc3RyaW5nXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkw6IFByb3BUeXBlcy5mdW5jLFxuICBncmFtbWFyczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gIGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgZ3JvdXBUaW1lc3RhbXA6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIGludGVybmFsRXJyb3JCb3hDbGFzczogUHJvcFR5cGVzLmZ1bmMsIC8vIFRoaXMgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5LiBXZSBkb24ndCBhbGxvdyBjdXN0b21pemF0aW9uIG9mIGVycm9yIGJveC5cbiAgbG9jYWxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBvblRlbGVtZXRyeTogUHJvcFR5cGVzLmZ1bmMsXG4gIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5nczogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFueSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgcmVuZGVyTWFya2Rvd246IFByb3BUeXBlcy5mdW5jLFxuICBzY3JvbGxUb0VuZEJ1dHRvbk1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgc2VsZWN0Vm9pY2U6IFByb3BUeXBlcy5mdW5jLFxuICBzZW5kVGltZW91dDogUHJvcFR5cGVzLm51bWJlcixcbiAgc2VuZFR5cGluZ0luZGljYXRvcjogUHJvcFR5cGVzLmJvb2wsXG4gIHN0eWxlT3B0aW9uczogUHJvcFR5cGVzLmFueSxcbiAgdG9hc3RNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIHRvYXN0UmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICB0eXBpbmdJbmRpY2F0b3JNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIHR5cGluZ0luZGljYXRvclJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgdXNlcklEOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB1c2VybmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudHlwZSBDb21wb3NlclByb3BzID0gQ29tcG9zZXJDb3JlUHJvcHMgJiB7XG4gIGludGVybmFsUmVuZGVyRXJyb3JCb3g/OiBhbnk7XG4gIHN0b3JlPzogYW55O1xufTtcblxuLy8gV2Ugd2lsbCBjcmVhdGUgYSBSZWR1eCBzdG9yZSBpZiBpdCB3YXMgbm90IHBhc3NlZCBpblxuY29uc3QgQ29tcG9zZXI6IEZDPENvbXBvc2VyUHJvcHM+ID0gKHsgaW50ZXJuYWxSZW5kZXJFcnJvckJveCwgb25UZWxlbWV0cnksIHN0b3JlLCAuLi5wcm9wcyB9KSA9PiB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcblxuICBjb25zdCBoYW5kbGVFcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBVbmNhdWdodCBleGNlcHRpb24nLCB7IGVycm9yIH0pO1xuXG4gICAgICBvblRlbGVtZXRyeSAmJlxuICAgICAgICBvblRlbGVtZXRyeShjcmVhdGVDdXN0b21FdmVudCgnZXhjZXB0aW9uJywgeyBlcnJvciwgZmF0YWw6IHRydWUgfSkgYXMgVGVsZW1ldHJ5RXhjZXB0aW9uTWVhc3VyZW1lbnRFdmVudCk7XG4gICAgICBzZXRFcnJvcihlcnJvcik7XG4gICAgfSxcbiAgICBbb25UZWxlbWV0cnksIHNldEVycm9yXVxuICApO1xuXG4gIGNvbnN0IG1lbW9pemVkU3RvcmUgPSB1c2VNZW1vKCgpID0+IHN0b3JlIHx8IGNyZWF0ZVN0b3JlKCksIFtzdG9yZV0pO1xuXG4gIHJldHVybiBlcnJvciA/IChcbiAgICAhIWludGVybmFsUmVuZGVyRXJyb3JCb3ggJiYgaW50ZXJuYWxSZW5kZXJFcnJvckJveCh7IGVycm9yLCB0eXBlOiAndW5jYXVnaHQgZXhjZXB0aW9uJyB9KVxuICApIDogKFxuICAgIDxFcnJvckJvdW5kYXJ5IG9uRXJyb3I9e2hhbmRsZUVycm9yfT5cbiAgICAgIDxQcm92aWRlciBjb250ZXh0PXtXZWJDaGF0UmVkdXhDb250ZXh0fSBzdG9yZT17bWVtb2l6ZWRTdG9yZX0+XG4gICAgICAgIDxBY3Rpdml0eUtleWVyQ29tcG9zZXI+XG4gICAgICAgICAgPEFjdGl2aXR5QWNrbm93bGVkZ2VtZW50Q29tcG9zZXI+XG4gICAgICAgICAgICA8Q29tcG9zZXJDb3JlIG9uVGVsZW1ldHJ5PXtvblRlbGVtZXRyeX0gey4uLnByb3BzfSAvPlxuICAgICAgICAgIDwvQWN0aXZpdHlBY2tub3dsZWRnZW1lbnRDb21wb3Nlcj5cbiAgICAgICAgPC9BY3Rpdml0eUtleWVyQ29tcG9zZXI+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgKTtcbn07XG5cbkNvbXBvc2VyLmRlZmF1bHRQcm9wcyA9IHtcbiAgaW50ZXJuYWxSZW5kZXJFcnJvckJveDogdW5kZWZpbmVkLFxuICBvblRlbGVtZXRyeTogdW5kZWZpbmVkLFxuICBzdG9yZTogdW5kZWZpbmVkXG59O1xuXG5Db21wb3Nlci5wcm9wVHlwZXMgPSB7XG4gIGludGVybmFsUmVuZGVyRXJyb3JCb3g6IFByb3BUeXBlcy5hbnksXG4gIG9uVGVsZW1ldHJ5OiBQcm9wVHlwZXMuZnVuYyxcbiAgc3RvcmU6IFByb3BUeXBlcy5hbnlcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvc2VyO1xuXG5leHBvcnQgdHlwZSB7IENvbXBvc2VyUHJvcHMgfTtcbiJdfQ==