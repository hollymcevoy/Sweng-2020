"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = observableToPromise;

function observableToPromise(observable) {
  return new Promise(function (resolve, reject) {
    var subscription = observable.subscribe(function (sessionId) {
      resolve(sessionId); // HACK: Sometimes, the call complete asynchronously and we cannot unsubscribe
      //       Need to wait some short time here to make sure the subscription variable has setup

      setTimeout(function () {
        return subscription.unsubscribe();
      }, 0);
    }, function (error) {
      reject(error);
      setTimeout(function () {
        return subscription.unsubscribe();
      }, 0);
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ob29rcy91dGlscy9vYnNlcnZhYmxlVG9Qcm9taXNlLnRzIl0sIm5hbWVzIjpbIm9ic2VydmFibGVUb1Byb21pc2UiLCJvYnNlcnZhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpYmUiLCJzZXNzaW9uSWQiLCJzZXRUaW1lb3V0IiwidW5zdWJzY3JpYmUiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVlLFNBQVNBLG1CQUFULENBQWdDQyxVQUFoQyxFQUF1RTtBQUNwRixTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDdEMsUUFBTUMsWUFBWSxHQUFHSixVQUFVLENBQUNLLFNBQVgsQ0FDbkIsVUFBQ0MsU0FBRCxFQUFrQjtBQUNoQkosTUFBQUEsT0FBTyxDQUFDSSxTQUFELENBQVAsQ0FEZ0IsQ0FHaEI7QUFDQTs7QUFDQUMsTUFBQUEsVUFBVSxDQUFDO0FBQUEsZUFBTUgsWUFBWSxDQUFDSSxXQUFiLEVBQU47QUFBQSxPQUFELEVBQW1DLENBQW5DLENBQVY7QUFDRCxLQVBrQixFQVFuQixVQUFDQyxLQUFELEVBQWtCO0FBQ2hCTixNQUFBQSxNQUFNLENBQUNNLEtBQUQsQ0FBTjtBQUNBRixNQUFBQSxVQUFVLENBQUM7QUFBQSxlQUFNSCxZQUFZLENBQUNJLFdBQWIsRUFBTjtBQUFBLE9BQUQsRUFBbUMsQ0FBbkMsQ0FBVjtBQUNELEtBWGtCLENBQXJCO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiY29tcG9uZW50Oi8vLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPYnNlcnZhYmxlIGZyb20gJ2NvcmUtanMvZmVhdHVyZXMvb2JzZXJ2YWJsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9ic2VydmFibGVUb1Byb21pc2U8VD4ob2JzZXJ2YWJsZTogT2JzZXJ2YWJsZTxUPik6IFByb21pc2U8VD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKFxuICAgICAgKHNlc3Npb25JZDogVCkgPT4ge1xuICAgICAgICByZXNvbHZlKHNlc3Npb25JZCk7XG5cbiAgICAgICAgLy8gSEFDSzogU29tZXRpbWVzLCB0aGUgY2FsbCBjb21wbGV0ZSBhc3luY2hyb25vdXNseSBhbmQgd2UgY2Fubm90IHVuc3Vic2NyaWJlXG4gICAgICAgIC8vICAgICAgIE5lZWQgdG8gd2FpdCBzb21lIHNob3J0IHRpbWUgaGVyZSB0byBtYWtlIHN1cmUgdGhlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZSBoYXMgc2V0dXBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSwgMCk7XG4gICAgICB9LFxuICAgICAgKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpLCAwKTtcbiAgICAgIH1cbiAgICApO1xuICB9KTtcbn1cbiJdfQ==