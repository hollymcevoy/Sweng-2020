"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useSendFiles;

var _react = require("react");

var _useTrackEvent = _interopRequireDefault(require("./useTrackEvent"));

var _useWebChatAPIContext2 = _interopRequireDefault(require("./internal/useWebChatAPIContext"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint no-magic-numbers: ["error", { "ignore": [0, 1024] }] */
function useSendFiles() {
  var _useWebChatAPIContext = (0, _useWebChatAPIContext2.default)(),
      sendFiles = _useWebChatAPIContext.sendFiles;

  var trackEvent = (0, _useTrackEvent.default)();
  return (0, _react.useCallback)(function (files) {
    if (files && files.length) {
      sendFiles(files);
      trackEvent('sendFiles', {
        numFiles: files.length,
        sumSizeInKB: Math.round(files.reduce(function (total, _ref) {
          var size = _ref.size;
          return total + size;
        }, 0) / 1024)
      });
    }
  }, [sendFiles, trackEvent]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy91c2VTZW5kRmlsZXMudHMiXSwibmFtZXMiOlsidXNlU2VuZEZpbGVzIiwic2VuZEZpbGVzIiwidHJhY2tFdmVudCIsImZpbGVzIiwibGVuZ3RoIiwibnVtRmlsZXMiLCJzdW1TaXplSW5LQiIsIk1hdGgiLCJyb3VuZCIsInJlZHVjZSIsInRvdGFsIiwic2l6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUVBOztBQUVBOztBQUNBOzs7O0FBTEE7QUFPZSxTQUFTQSxZQUFULEdBQWlEO0FBQzlELDhCQUFzQixxQ0FBdEI7QUFBQSxNQUFRQyxTQUFSLHlCQUFRQSxTQUFSOztBQUNBLE1BQU1DLFVBQVUsR0FBRyw2QkFBbkI7QUFFQSxTQUFPLHdCQUNMLFVBQUFDLEtBQUssRUFBSTtBQUNQLFFBQUlBLEtBQUssSUFBSUEsS0FBSyxDQUFDQyxNQUFuQixFQUEyQjtBQUN6QkgsTUFBQUEsU0FBUyxDQUFDRSxLQUFELENBQVQ7QUFFQUQsTUFBQUEsVUFBVSxDQUFDLFdBQUQsRUFBYztBQUN0QkcsUUFBQUEsUUFBUSxFQUFFRixLQUFLLENBQUNDLE1BRE07QUFFdEJFLFFBQUFBLFdBQVcsRUFBRUMsSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssQ0FBQ00sTUFBTixDQUFhLFVBQUNDLEtBQUQ7QUFBQSxjQUFVQyxJQUFWLFFBQVVBLElBQVY7QUFBQSxpQkFBcUJELEtBQUssR0FBR0MsSUFBN0I7QUFBQSxTQUFiLEVBQWdELENBQWhELElBQXFELElBQWhFO0FBRlMsT0FBZCxDQUFWO0FBSUQ7QUFDRixHQVZJLEVBV0wsQ0FBQ1YsU0FBRCxFQUFZQyxVQUFaLENBWEssQ0FBUDtBQWFEIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tbWFnaWMtbnVtYmVyczogW1wiZXJyb3JcIiwgeyBcImlnbm9yZVwiOiBbMCwgMTAyNF0gfV0gKi9cblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB1c2VUcmFja0V2ZW50IGZyb20gJy4vdXNlVHJhY2tFdmVudCc7XG5pbXBvcnQgdXNlV2ViQ2hhdEFQSUNvbnRleHQgZnJvbSAnLi9pbnRlcm5hbC91c2VXZWJDaGF0QVBJQ29udGV4dCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVNlbmRGaWxlcygpOiAoZmlsZXM6IEZpbGVbXSkgPT4gdm9pZCB7XG4gIGNvbnN0IHsgc2VuZEZpbGVzIH0gPSB1c2VXZWJDaGF0QVBJQ29udGV4dCgpO1xuICBjb25zdCB0cmFja0V2ZW50ID0gdXNlVHJhY2tFdmVudCgpO1xuXG4gIHJldHVybiB1c2VDYWxsYmFjayhcbiAgICBmaWxlcyA9PiB7XG4gICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgIHNlbmRGaWxlcyhmaWxlcyk7XG5cbiAgICAgICAgdHJhY2tFdmVudCgnc2VuZEZpbGVzJywge1xuICAgICAgICAgIG51bUZpbGVzOiBmaWxlcy5sZW5ndGgsXG4gICAgICAgICAgc3VtU2l6ZUluS0I6IE1hdGgucm91bmQoZmlsZXMucmVkdWNlKCh0b3RhbCwgeyBzaXplIH0pID0+IHRvdGFsICsgc2l6ZSwgMCkgLyAxMDI0KVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzZW5kRmlsZXMsIHRyYWNrRXZlbnRdXG4gICk7XG59XG4iXX0=