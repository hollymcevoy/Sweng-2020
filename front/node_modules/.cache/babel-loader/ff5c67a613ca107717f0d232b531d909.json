{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _FocusRedirector = _interopRequireDefault(require(\"../Utils/FocusRedirector\"));\n\nvar _tabbableElements = _interopRequireDefault(require(\"../Utils/tabbableElements\"));\n\nvar _useValueRef = _interopRequireDefault(require(\"../hooks/internal/useValueRef\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar FocusTrap = function FocusTrap(_ref) {\n  var children = _ref.children,\n      onFocus = _ref.onFocus,\n      onLeave = _ref.onLeave;\n  var bodyRef = (0, _react.useRef)();\n  var onLeaveRef = (0, _useValueRef.default)(onLeave);\n  var handleBodyKeyDown = (0, _react.useCallback)(function (event) {\n    if (event.key === 'Escape') {\n      var _onLeaveRef$current;\n\n      event.preventDefault();\n      event.stopPropagation();\n      (_onLeaveRef$current = onLeaveRef.current) === null || _onLeaveRef$current === void 0 ? void 0 : _onLeaveRef$current.call(onLeaveRef);\n    }\n  }, [onLeaveRef]);\n  var handleFirstSentinelFocus = (0, _react.useCallback)(function () {\n    var _focusables;\n\n    var focusables = (0, _tabbableElements.default)(bodyRef.current);\n    (_focusables = focusables[focusables.length - 1]) === null || _focusables === void 0 ? void 0 : _focusables.focus();\n  }, [bodyRef]);\n  var handleLastSentinelFocus = (0, _react.useCallback)(function () {\n    var _tabbableElements$;\n\n    return (_tabbableElements$ = (0, _tabbableElements.default)(bodyRef.current)[0]) === null || _tabbableElements$ === void 0 ? void 0 : _tabbableElements$.focus();\n  }, [bodyRef]);\n  return /*#__PURE__*/_react.default.createElement(_react.Fragment, null, /*#__PURE__*/_react.default.createElement(_FocusRedirector.default, {\n    onFocus: handleFirstSentinelFocus\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    onFocus: onFocus,\n    onKeyDown: handleBodyKeyDown,\n    ref: bodyRef\n  }, children), /*#__PURE__*/_react.default.createElement(_FocusRedirector.default, {\n    onFocus: handleLastSentinelFocus\n  }));\n};\n\nFocusTrap.defaultProps = {\n  children: undefined,\n  onFocus: undefined\n};\nFocusTrap.propTypes = {\n  children: _propTypes.default.any,\n  onFocus: _propTypes.default.func,\n  onLeave: _propTypes.default.func.isRequired\n};\nvar _default = FocusTrap;\nexports.default = _default;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAIA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAMA,SAA6B,GAAG,SAAhCA,SAAgC,OAAoC;AAAA,MAAjCC,QAAiC,QAAjCA,QAAiC;AAAA,MAAvBC,OAAuB,QAAvBA,OAAuB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AACxE,MAAMC,OAAO,GAAG,oBAAhB;AACA,MAAMC,UAAU,GAAG,0BAAwBF,OAAxB,CAAnB;AAEA,MAAMG,iBAAuC,GAAG,wBAC9C,iBAAS;AACP,QAAIC,KAAK,CAACC,GAAND,KAAc,QAAlB,EAA4B;AAAA;;AAC1BA,WAAK,CAACE,cAANF;AACAA,WAAK,CAACG,eAANH;AAEA,uCAAU,CAACI,OAAX;AACD;AAP2C,KAS9C,CAACN,UAAD,CAT8C,CAAhD;AAYA,MAAMO,wBAAoC,GAAG,wBAAY,YAAM;AAAA;;AAC7D,QAAMC,UAAU,GAAG,+BAAiBT,OAAO,CAACO,OAAzB,CAAnB;AAEA,6BAAU,CAACE,UAAU,CAACC,MAAXD,GAAoB,CAArB,CAAV,4DAAmCE,KAAnC;AAH2C,KAI1C,CAACX,OAAD,CAJ0C,CAA7C;AAMA,MAAMY,uBAAmC,GAAG,wBAC1C;AAAA;;AAAA,iCAAM,+BAAiBZ,OAAO,CAACO,OAAzB,EAAkC,CAAlC,CAAN,uDAAMM,mBAAsCF,KAAtC,EAAN;AAD0C,KAE1C,CAACX,OAAD,CAF0C,CAA5C;AAKA,sBACEc,6BAACA,eAAD,qBACEA,6BAACC,wBAAD;AAAiBjB,WAAO,EAAEU;AAA1B,IADF,eAEEM;AAAKhB,WAAO,EAAEA,OAAd;AAAuBkB,aAAS,EAAEd,iBAAlC;AAAqDe,OAAG,EAAEjB;AAA1D,KACGH,QADH,CAFF,eAKEiB,6BAACC,wBAAD;AAAiBjB,WAAO,EAAEc;AAA1B,IALF,CADF;AA3BF;;AAsCAhB,SAAS,CAACsB,YAAVtB,GAAyB;AACvBC,UAAQ,EAAEsB,SADa;AAEvBrB,SAAO,EAAEqB;AAFc,CAAzBvB;AAKAA,SAAS,CAACwB,SAAVxB,GAAsB;AACpBC,UAAQ,EAAEwB,mBAAUC,GADA;AAEpBxB,SAAO,EAAEuB,mBAAUE,IAFC;AAGpBxB,SAAO,EAAEsB,mBAAUE,IAAVF,CAAeG;AAHJ,CAAtB5B;eAMeA","names":["FocusTrap","children","onFocus","onLeave","bodyRef","onLeaveRef","handleBodyKeyDown","event","key","preventDefault","stopPropagation","current","handleFirstSentinelFocus","focusables","length","focus","handleLastSentinelFocus","_tabbableElements$","_react","_FocusRedirector","onKeyDown","ref","defaultProps","undefined","propTypes","PropTypes","any","func","isRequired"],"sources":["/Users/dylanmurray/Sweng-2022/front/node_modules/botframework-webchat-component/lib/src/Transcript/FocusTrap.tsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Fragment, useCallback, useRef } from 'react';\n\nimport type { FC, KeyboardEventHandler, PropsWithChildren } from 'react';\n\nimport FocusRedirector from '../Utils/FocusRedirector';\nimport tabbableElements from '../Utils/tabbableElements';\nimport useValueRef from '../hooks/internal/useValueRef';\n\ntype FocusTrapProps = PropsWithChildren<{\n  onFocus: () => void;\n  onLeave: () => void;\n}>;\n\nconst FocusTrap: FC<FocusTrapProps> = ({ children, onFocus, onLeave }) => {\n  const bodyRef = useRef<HTMLDivElement>();\n  const onLeaveRef = useValueRef<() => void>(onLeave);\n\n  const handleBodyKeyDown: KeyboardEventHandler = useCallback(\n    event => {\n      if (event.key === 'Escape') {\n        event.preventDefault();\n        event.stopPropagation();\n\n        onLeaveRef.current?.();\n      }\n    },\n    [onLeaveRef]\n  );\n\n  const handleFirstSentinelFocus: () => void = useCallback(() => {\n    const focusables = tabbableElements(bodyRef.current);\n\n    focusables[focusables.length - 1]?.focus();\n  }, [bodyRef]);\n\n  const handleLastSentinelFocus: () => void = useCallback(\n    () => tabbableElements(bodyRef.current)[0]?.focus(),\n    [bodyRef]\n  );\n\n  return (\n    <Fragment>\n      <FocusRedirector onFocus={handleFirstSentinelFocus} />\n      <div onFocus={onFocus} onKeyDown={handleBodyKeyDown} ref={bodyRef}>\n        {children}\n      </div>\n      <FocusRedirector onFocus={handleLastSentinelFocus} />\n    </Fragment>\n  );\n};\n\nFocusTrap.defaultProps = {\n  children: undefined,\n  onFocus: undefined\n};\n\nFocusTrap.propTypes = {\n  children: PropTypes.any,\n  onFocus: PropTypes.func,\n  onLeave: PropTypes.func.isRequired\n};\n\nexport default FocusTrap;\n"]},"metadata":{},"sourceType":"script"}