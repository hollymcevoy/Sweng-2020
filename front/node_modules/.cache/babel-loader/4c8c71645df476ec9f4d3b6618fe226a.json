{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _botframeworkWebchatApi = require(\"botframework-webchat-api\");\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _CollapseIcon = _interopRequireDefault(require(\"./Toast/CollapseIcon\"));\n\nvar _ExpandIcon = _interopRequireDefault(require(\"./Toast/ExpandIcon\"));\n\nvar _NotificationIcon = _interopRequireDefault(require(\"./Toast/NotificationIcon\"));\n\nvar _randomId = _interopRequireDefault(require(\"./Utils/randomId\"));\n\nvar _useStyleSet3 = _interopRequireDefault(require(\"./hooks/useStyleSet\"));\n\nvar _useStyleToEmotionObject = _interopRequireDefault(require(\"./hooks/internal/useStyleToEmotionObject\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar useDebouncedNotifications = _botframeworkWebchatApi.hooks.useDebouncedNotifications,\n    useLocalizer = _botframeworkWebchatApi.hooks.useLocalizer,\n    useRenderToast = _botframeworkWebchatApi.hooks.useRenderToast;\nvar ROOT_STYLE = {\n  display: 'flex',\n  flexDirection: 'column',\n  '& .webchat__toaster__header': {\n    display: 'flex',\n    flexShrink: 0\n  },\n  '& .webchat__toaster__expandText': {\n    flex: 1\n  },\n  '& .webchat__toaster__list': {\n    display: 'block',\n    listStyleType: 'none'\n  }\n};\nvar LEVEL_AS_NUMBER = {\n  error: 1,\n  warn: 2,\n  info: 3,\n  success: 4\n};\nvar LEVEL_AS_NUMBER_KEYS = Object.keys(LEVEL_AS_NUMBER);\n\nfunction getLevelAsNumber(level) {\n  // Mitigated through allowlisting.\n  // eslint-disable-next-line security/detect-object-injection\n  return LEVEL_AS_NUMBER_KEYS.includes(level) ? LEVEL_AS_NUMBER[level] : 5;\n}\n\nfunction compareLevel(x, y) {\n  return getLevelAsNumber(x) - getLevelAsNumber(y);\n}\n\nfunction sortNotifications(map) {\n  return Object.values(map) // We want the order reversed, most recent on top.\n  .sort(function (_ref, _ref2) {\n    var x = _ref.timestamp;\n    var y = _ref2.timestamp;\n    return y - x;\n  });\n}\n\nvar PASSTHRU_FN = function PASSTHRU_FN(value) {\n  return value;\n};\n\nvar TOAST_ACCORDION_IDS = {\n  two: 'TOAST_ACCORDION_TWO',\n  few: 'TOAST_ACCORDION_FEW',\n  many: 'TOAST_ACCORDION_MANY',\n  other: 'TOAST_ACCORDION_OTHER'\n};\n\nvar BasicToaster = function BasicToaster() {\n  var instanceId = (0, _react.useMemo)(_randomId.default, []);\n\n  var _useStyleSet = (0, _useStyleSet3.default)(),\n      _useStyleSet2 = _slicedToArray(_useStyleSet, 1),\n      toasterStyleSet = _useStyleSet2[0].toaster;\n\n  var _useDebouncedNotifica = useDebouncedNotifications(),\n      _useDebouncedNotifica2 = _slicedToArray(_useDebouncedNotifica, 1),\n      debouncedNotifications = _useDebouncedNotifica2[0];\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var localizeWithPlural = useLocalizer({\n    plural: true\n  });\n  var renderToast = useRenderToast();\n  var rootClassName = (0, _useStyleToEmotionObject.default)()(ROOT_STYLE) + '';\n  var handleToggleExpand = (0, _react.useCallback)(function () {\n    return setExpanded(!expanded);\n  }, [expanded, setExpanded]);\n  var sortedNotifications = (0, _react.useMemo)(function () {\n    return sortNotifications(debouncedNotifications);\n  }, [debouncedNotifications]);\n  var sortedNotificationsWithChildren = (0, _react.useMemo)(function () {\n    return sortedNotifications.map(function (notification) {\n      var children = renderToast({\n        notification: notification\n      });\n      return children && {\n        children: children,\n        notification: notification\n      };\n    }).filter(PASSTHRU_FN);\n  }, [renderToast, sortedNotifications]);\n  var expandable = sortedNotificationsWithChildren.length > 1;\n\n  var _sortedNotificationsW = sortedNotificationsWithChildren.map(function (_ref3) {\n    var level = _ref3.notification.level;\n    return level;\n  }).sort(compareLevel),\n      _sortedNotificationsW2 = _slicedToArray(_sortedNotificationsW, 1),\n      highestLevel = _sortedNotificationsW2[0];\n\n  var expandableElementId = (0, _react.useMemo)(function () {\n    return !expandable || expanded ? \"webchat__toaster__list__\".concat(instanceId) : undefined;\n  }, [expandable, expanded, instanceId]);\n  var headerElementId = (0, _react.useMemo)(function () {\n    return expandable ? \"webchat__toaster__header__\".concat(instanceId) : undefined;\n  }, [expandable, instanceId]);\n  (0, _react.useEffect)(function () {\n    !expandable && setExpanded(false);\n  }, [expandable]);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-labelledby\": headerElementId,\n    \"aria-live\": \"polite\",\n    \"aria-relevant\": \"all\",\n    className: (0, _classnames.default)('webchat__toaster', {\n      'webchat__toaster--expandable': expandable,\n      'webchat__toaster--expanded': expanded,\n      'webchat__toaster--error': highestLevel === 'error',\n      'webchat__toaster--info': highestLevel === 'info',\n      'webchat__toaster--success': highestLevel === 'success',\n      'webchat__toaster--warn': highestLevel === 'warn'\n    }, rootClassName, toasterStyleSet + ''),\n    role: \"log\"\n  }, expandable && /*#__PURE__*/_react.default.createElement(\"button\", {\n    \"aria-controls\": expandableElementId,\n    \"aria-expanded\": expanded,\n    className: \"webchat__toaster__header\",\n    id: headerElementId,\n    onClick: handleToggleExpand,\n    type: \"button\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"webchat__toaster__expandLevelIconBox\"\n  }, /*#__PURE__*/_react.default.createElement(_NotificationIcon.default, {\n    className: \"webchat__toaster__expandLevelIcon\",\n    level: highestLevel\n  })), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"webchat__toaster__expandText\"\n  }, localizeWithPlural(TOAST_ACCORDION_IDS, sortedNotificationsWithChildren.length)), /*#__PURE__*/_react.default.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: \"webchat__toaster__expandIcon\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"webchat__toaster__expandIconFocus\"\n  }, expanded ? /*#__PURE__*/_react.default.createElement(_CollapseIcon.default, null) : /*#__PURE__*/_react.default.createElement(_ExpandIcon.default, null)))), (!expandable || expanded) && /*#__PURE__*/_react.default.createElement(\"ul\", {\n    \"aria-labelledby\": headerElementId,\n    className: \"webchat__toaster__list\",\n    id: expandableElementId,\n    role: \"region\"\n  }, sortedNotificationsWithChildren.map(function (_ref4) {\n    var children = _ref4.children,\n        id = _ref4.notification.id;\n    return /*#__PURE__*/_react.default.createElement(\"li\", {\n      \"aria-atomic\": true,\n      className: \"webchat__toaster__listItem\",\n      key: id,\n      role: \"none\"\n    }, children);\n  })));\n};\n\nvar _default = BasicToaster;\nexports.default = _default;","map":{"version":3,"mappings":"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","names":["useDebouncedNotifications","hooks","useLocalizer","useRenderToast","ROOT_STYLE","display","flexDirection","flexShrink","flex","listStyleType","LEVEL_AS_NUMBER","error","warn","info","success","LEVEL_AS_NUMBER_KEYS","Object","keys","getLevelAsNumber","level","includes","compareLevel","x","y","sortNotifications","map","values","sort","timestamp","PASSTHRU_FN","value","TOAST_ACCORDION_IDS","two","few","many","other","BasicToaster","instanceId","randomId","toasterStyleSet","toaster","debouncedNotifications","expanded","setExpanded","localizeWithPlural","plural","renderToast","rootClassName","handleToggleExpand","sortedNotifications","sortedNotificationsWithChildren","children","notification","filter","expandable","length","highestLevel","expandableElementId","undefined","headerElementId","_react","className","role","id","onClick","type","_NotificationIcon","_CollapseIcon","_ExpandIcon","key"],"sources":["/Users/dylanmurray/Sweng-2022/front/node_modules/botframework-webchat-component/lib/src/BasicToaster.js"],"sourcesContent":["/* eslint no-magic-numbers: [\"error\", { \"ignore\": [0, 1, 2, 3, 4, 5] }] */\n/* eslint react/forbid-dom-props: \"off\" */\n\nimport { hooks } from 'botframework-webchat-api';\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport CollapseIcon from './Toast/CollapseIcon';\nimport ExpandIcon from './Toast/ExpandIcon';\nimport NotificationIcon from './Toast/NotificationIcon';\nimport randomId from './Utils/randomId';\nimport useStyleSet from './hooks/useStyleSet';\nimport useStyleToEmotionObject from './hooks/internal/useStyleToEmotionObject';\n\nconst { useDebouncedNotifications, useLocalizer, useRenderToast } = hooks;\n\nconst ROOT_STYLE = {\n  display: 'flex',\n  flexDirection: 'column',\n\n  '& .webchat__toaster__header': {\n    display: 'flex',\n    flexShrink: 0\n  },\n\n  '& .webchat__toaster__expandText': {\n    flex: 1\n  },\n\n  '& .webchat__toaster__list': {\n    display: 'block',\n    listStyleType: 'none'\n  }\n};\n\nconst LEVEL_AS_NUMBER = {\n  error: 1,\n  warn: 2,\n  info: 3,\n  success: 4\n};\n\nconst LEVEL_AS_NUMBER_KEYS = Object.keys(LEVEL_AS_NUMBER);\n\nfunction getLevelAsNumber(level) {\n  // Mitigated through allowlisting.\n  // eslint-disable-next-line security/detect-object-injection\n  return LEVEL_AS_NUMBER_KEYS.includes(level) ? LEVEL_AS_NUMBER[level] : 5;\n}\n\nfunction compareLevel(x, y) {\n  return getLevelAsNumber(x) - getLevelAsNumber(y);\n}\n\nfunction sortNotifications(map) {\n  return (\n    Object.values(map)\n      // We want the order reversed, most recent on top.\n      .sort(({ timestamp: x }, { timestamp: y }) => y - x)\n  );\n}\n\nconst PASSTHRU_FN = value => value;\nconst TOAST_ACCORDION_IDS = {\n  two: 'TOAST_ACCORDION_TWO',\n  few: 'TOAST_ACCORDION_FEW',\n  many: 'TOAST_ACCORDION_MANY',\n  other: 'TOAST_ACCORDION_OTHER'\n};\n\nconst BasicToaster = () => {\n  const instanceId = useMemo(randomId, []);\n  const [{ toaster: toasterStyleSet }] = useStyleSet();\n  const [debouncedNotifications] = useDebouncedNotifications();\n  const [expanded, setExpanded] = useState(false);\n  const localizeWithPlural = useLocalizer({ plural: true });\n  const renderToast = useRenderToast();\n  const rootClassName = useStyleToEmotionObject()(ROOT_STYLE) + '';\n\n  const handleToggleExpand = useCallback(() => setExpanded(!expanded), [expanded, setExpanded]);\n  const sortedNotifications = useMemo(() => sortNotifications(debouncedNotifications), [debouncedNotifications]);\n  const sortedNotificationsWithChildren = useMemo(\n    () =>\n      sortedNotifications\n        .map(notification => {\n          const children = renderToast({ notification });\n\n          return children && { children, notification };\n        })\n        .filter(PASSTHRU_FN),\n    [renderToast, sortedNotifications]\n  );\n\n  const expandable = sortedNotificationsWithChildren.length > 1;\n  const [highestLevel] = sortedNotificationsWithChildren.map(({ notification: { level } }) => level).sort(compareLevel);\n\n  const expandableElementId = useMemo(\n    () => (!expandable || expanded ? `webchat__toaster__list__${instanceId}` : undefined),\n    [expandable, expanded, instanceId]\n  );\n  const headerElementId = useMemo(\n    () => (expandable ? `webchat__toaster__header__${instanceId}` : undefined),\n    [expandable, instanceId]\n  );\n\n  useEffect(() => {\n    !expandable && setExpanded(false);\n  }, [expandable]);\n\n  return (\n    <div\n      aria-labelledby={headerElementId}\n      aria-live=\"polite\"\n      aria-relevant=\"all\"\n      className={classNames(\n        'webchat__toaster',\n        {\n          'webchat__toaster--expandable': expandable,\n          'webchat__toaster--expanded': expanded,\n          'webchat__toaster--error': highestLevel === 'error',\n          'webchat__toaster--info': highestLevel === 'info',\n          'webchat__toaster--success': highestLevel === 'success',\n          'webchat__toaster--warn': highestLevel === 'warn'\n        },\n        rootClassName,\n        toasterStyleSet + ''\n      )}\n      role=\"log\"\n    >\n      {expandable && (\n        <button\n          aria-controls={expandableElementId}\n          aria-expanded={expanded}\n          className=\"webchat__toaster__header\"\n          id={headerElementId}\n          onClick={handleToggleExpand}\n          type=\"button\"\n        >\n          <div aria-hidden={true} className=\"webchat__toaster__expandLevelIconBox\">\n            <NotificationIcon className=\"webchat__toaster__expandLevelIcon\" level={highestLevel} />\n          </div>\n          <div className=\"webchat__toaster__expandText\">\n            {localizeWithPlural(TOAST_ACCORDION_IDS, sortedNotificationsWithChildren.length)}\n          </div>\n          <div aria-hidden={true} className=\"webchat__toaster__expandIcon\">\n            <div className=\"webchat__toaster__expandIconFocus\">{expanded ? <CollapseIcon /> : <ExpandIcon />}</div>\n          </div>\n        </button>\n      )}\n      {(!expandable || expanded) && (\n        <ul aria-labelledby={headerElementId} className=\"webchat__toaster__list\" id={expandableElementId} role=\"region\">\n          {sortedNotificationsWithChildren.map(({ children, notification: { id } }) => (\n            <li aria-atomic={true} className=\"webchat__toaster__listItem\" key={id} role=\"none\">\n              {children}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default BasicToaster;\n"]},"metadata":{},"sourceType":"script"}