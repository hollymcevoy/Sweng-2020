{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createCoreMiddleware;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _AudioAttachment = _interopRequireDefault(require(\"../../Attachment/AudioAttachment\"));\n\nvar _FileAttachment = _interopRequireDefault(require(\"../../Attachment/FileAttachment\"));\n\nvar _ImageAttachment = _interopRequireDefault(require(\"../../Attachment/ImageAttachment\"));\n\nvar _TextAttachment = _interopRequireDefault(require(\"../../Attachment/TextAttachment\"));\n\nvar _VideoAttachment = _interopRequireDefault(require(\"../../Attachment/VideoAttachment\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now\n\n\nfunction createCoreMiddleware() {\n  return [function () {\n    return function (next) {\n      return function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var _args$ = args[0],\n            _args$$activity = _args$.activity,\n            activity = _args$$activity === void 0 ? {} : _args$$activity,\n            _args$$activity2 = _args$.activity;\n        _args$$activity2 = _args$$activity2 === void 0 ? {} : _args$$activity2;\n        var _args$$activity2$from = _args$$activity2.from;\n        _args$$activity2$from = _args$$activity2$from === void 0 ? {} : _args$$activity2$from;\n        var _args$$activity2$from2 = _args$$activity2$from.role,\n            role = _args$$activity2$from2 === void 0 ? undefined : _args$$activity2$from2,\n            attachment = _args$.attachment,\n            _args$$attachment = _args$.attachment;\n        _args$$attachment = _args$$attachment === void 0 ? {} : _args$$attachment;\n        var _args$$attachment$con = _args$$attachment.contentType,\n            contentType = _args$$attachment$con === void 0 ? undefined : _args$$attachment$con,\n            _args$$attachment$con2 = _args$$attachment.contentUrl,\n            contentUrl = _args$$attachment$con2 === void 0 ? undefined : _args$$attachment$con2,\n            _args$$attachment$thu = _args$$attachment.thumbnailUrl,\n            thumbnailUrl = _args$$attachment$thu === void 0 ? undefined : _args$$attachment$thu;\n        var isText = /^text\\//.test(contentType);\n        return (isText ? !attachment.content : role === 'user' && !thumbnailUrl) ? /*#__PURE__*/_react.default.createElement(_FileAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : /^audio\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_AudioAttachment.default, {\n          attachment: attachment\n        }) : /^image\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_ImageAttachment.default, {\n          attachment: attachment\n        }) : /^video\\//.test(contentType) ? /*#__PURE__*/_react.default.createElement(_VideoAttachment.default, {\n          attachment: attachment\n        }) : contentUrl || contentType === 'application/octet-stream' ? /*#__PURE__*/_react.default.createElement(_FileAttachment.default, {\n          activity: activity,\n          attachment: attachment\n        }) : isText ? /*#__PURE__*/_react.default.createElement(_TextAttachment.default, {\n          attachment: attachment\n        }) : next.apply(void 0, args);\n      };\n    };\n  }];\n}","map":{"version":3,"mappings":";;;;;;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;;;EAEA;;;AACe,SAASA,oBAAT,GAAwD;AACrE,SAAO,CACL;AAAA,WACE,gBAAI;AAAA,aACJ,YAAa;AAAA,0CAATC,IAAS;AAATA,cAAS,MAATA,GAASC,eAATD;AAAS;;AACX,qBAOIA,IAPJ;AAAA,qCAEIE,QAFJ;AAAA,YAEIA,QAFJ,gCAEe,EAFf;AAAA,sCAGIA,QAHJ;AAAAC,yDAGoD,EAHpD;AAAA,qDAGgBC,IAHhB;AAAAC,mEAG6C,EAH7C;AAAA,2DAGwBC,IAHxB;AAAA,YAGwBA,IAHxB,uCAG+BC,SAH/B;AAAA,YAIIC,UAJJ,UAIIA,UAJJ;AAAA,uCAKIA,UALJ;AAAAC,2DAKgG,EALhG;AAAA,sDAKkBC,WALlB;AAAA,YAKkBA,WALlB,sCAKgCH,SALhC;AAAA,uDAK2CI,UAL3C;AAAA,YAK2CA,UAL3C,uCAKwDJ,SALxD;AAAA,sDAKmEK,YALnE;AAAA,YAKmEA,YALnE,sCAKkFL,SALlF;AASA,YAAMM,MAAM,GAAG,UAAWC,IAAX,CAAgBJ,WAAhB,CAAf;AAEA,eAAO,CAACG,MAAM,GAAG,CAACL,UAAU,CAACO,OAAf,GAAyBT,IAAI,KAAK,MAATA,IAAmB,CAACM,YAApD,iBACLI,6BAACC,uBAAD;AAAgBf,kBAAQ,EAAEA,QAA1B;AAAoCM,oBAAU,EAAEA;AAAhD,UADK,GAEH,WAAYM,IAAZ,CAAiBJ,WAAjB,iBACFM,6BAACE,wBAAD;AAAiBV,oBAAU,EAAEA;AAA7B,UADE,GAEA,WAAYM,IAAZ,CAAiBJ,WAAjB,iBACFM,6BAACG,wBAAD;AAAiBX,oBAAU,EAAEA;AAA7B,UADE,GAEA,WAAYM,IAAZ,CAAiBJ,WAAjB,iBACFM,6BAACI,wBAAD;AAAiBZ,oBAAU,EAAEA;AAA7B,UADE,GAEAG,UAAU,IAAID,WAAW,KAAK,0BAA9BC,gBACFK,6BAACC,uBAAD;AAAgBf,kBAAQ,EAAEA,QAA1B;AAAoCM,oBAAU,EAAEA;AAAhD,UADEG,GAEAE,MAAM,gBACRG,6BAACK,uBAAD;AAAgBb,oBAAU,EAAEA;AAA5B,UADQ,GAGRc,IAAI,MAAJA,SAAQtB,IAARsB,CAbF;AAbE;AADN;AADK,IAAP;AAgCD","names":["createCoreMiddleware","args","arguments","activity","_args$$activity2","from","_args$$activity2$from","role","undefined","attachment","_args$$attachment","contentType","contentUrl","thumbnailUrl","isText","test","content","_react","_FileAttachment","_AudioAttachment","_ImageAttachment","_VideoAttachment","_TextAttachment","next"],"sources":["/Users/dylanmurray/Sweng-2022/front/node_modules/botframework-webchat-component/lib/src/Middleware/Attachment/createCoreMiddleware.tsx"],"sourcesContent":["import { AttachmentMiddleware } from 'botframework-webchat-api';\nimport React from 'react';\n\nimport AudioAttachment from '../../Attachment/AudioAttachment';\nimport FileAttachment from '../../Attachment/FileAttachment';\nimport ImageAttachment from '../../Attachment/ImageAttachment';\nimport TextAttachment from '../../Attachment/TextAttachment';\nimport VideoAttachment from '../../Attachment/VideoAttachment';\n\n// TODO: [P4] Rename this file or the whole middleware, it looks either too simple or too comprehensive now\nexport default function createCoreMiddleware(): AttachmentMiddleware[] {\n  return [\n    () =>\n      next =>\n      (...args) => {\n        const [\n          {\n            activity = {},\n            activity: { from: { role = undefined } = {} } = {},\n            attachment,\n            attachment: { contentType = undefined, contentUrl = undefined, thumbnailUrl = undefined } = {}\n          }\n        ] = args;\n\n        const isText = /^text\\//u.test(contentType);\n\n        return (isText ? !attachment.content : role === 'user' && !thumbnailUrl) ? (\n          <FileAttachment activity={activity} attachment={attachment} />\n        ) : /^audio\\//u.test(contentType) ? (\n          <AudioAttachment attachment={attachment} />\n        ) : /^image\\//u.test(contentType) ? (\n          <ImageAttachment attachment={attachment} />\n        ) : /^video\\//u.test(contentType) ? (\n          <VideoAttachment attachment={attachment} />\n        ) : contentUrl || contentType === 'application/octet-stream' ? (\n          <FileAttachment activity={activity} attachment={attachment} />\n        ) : isText ? (\n          <TextAttachment attachment={attachment} />\n        ) : (\n          next(...args)\n        );\n      }\n  ];\n}\n"]},"metadata":{},"sourceType":"script"}