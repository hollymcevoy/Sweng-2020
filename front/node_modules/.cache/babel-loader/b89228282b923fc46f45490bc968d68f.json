{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\nimport { CancellationDetailsBase, CancellationErrorCode, CancellationReason, PropertyCollection, ResultReason } from \"./Exports\";\n/**\n * Output format\n * @class VoiceProfileEnrollmentResult\n */\n\nexport class VoiceProfileEnrollmentResult {\n  constructor(reason, json, statusText) {\n    this.privReason = reason;\n    this.privProperties = new PropertyCollection();\n\n    if (this.privReason !== ResultReason.Canceled) {\n      if (!!json) {\n        this.privDetails = JSON.parse(json);\n\n        if (this.privDetails.enrollmentStatus.toLowerCase() === \"enrolling\") {\n          this.privReason = ResultReason.EnrollingVoiceProfile;\n        }\n      }\n    } else {\n      this.privErrorDetails = statusText;\n      this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\n    }\n  }\n\n  static FromIdentificationProfileList(json) {\n    const results = [];\n\n    for (const item of json.profiles) {\n      const reason = item.enrollmentStatus.toLowerCase() === \"enrolling\" ? ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === \"enrolled\" ? ResultReason.EnrolledVoiceProfile : ResultReason.Canceled;\n      const result = new VoiceProfileEnrollmentResult(reason, null, null);\n      result.privDetails = this.getIdentificationDetails(item);\n      results.push(result);\n    }\n\n    return results;\n  }\n\n  static FromVerificationProfileList(json) {\n    const results = [];\n\n    for (const item of json.profiles) {\n      const reason = item.enrollmentStatus.toLowerCase() === \"enrolling\" ? ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === \"enrolled\" ? ResultReason.EnrolledVoiceProfile : ResultReason.Canceled;\n      const result = new VoiceProfileEnrollmentResult(reason, null, null);\n      result.privDetails = this.getVerificationDetails(item);\n      results.push(result);\n    }\n\n    return results;\n  }\n\n  get reason() {\n    return this.privReason;\n  }\n\n  get enrollmentsCount() {\n    return this.privDetails.enrollmentsCount;\n  }\n\n  get enrollmentsLength() {\n    return this.privDetails.enrollmentsLength;\n  }\n\n  get properties() {\n    return this.privProperties;\n  }\n\n  get enrollmentResultDetails() {\n    return this.privDetails;\n  }\n\n  get errorDetails() {\n    return this.privErrorDetails;\n  }\n\n  static getIdentificationDetails(json) {\n    return {\n      audioSpeechLength: json.speechTime ? parseFloat(json.speechTime) : 0,\n      enrollmentStatus: json.enrollmentStatus,\n      enrollmentsLength: json.enrollmentSpeechTime ? parseFloat(json.enrollmentSpeechTime) : 0,\n      profileId: json.profileId || json.identificationProfileId,\n      remainingEnrollmentSpeechLength: json.remainingEnrollmentSpeechTime ? parseFloat(json.remainingEnrollmentSpeechTime) : 0\n    };\n  }\n\n  static getVerificationDetails(json) {\n    return {\n      enrollmentStatus: json.enrollmentStatus,\n      enrollmentsCount: json.enrollmentsCount,\n      profileId: json.profileId || json.verificationProfileId,\n      remainingEnrollmentSpeechLength: json.remainingEnrollmentSpeechLength ? parseFloat(json.remainingEnrollmentSpeechLength) : 0,\n      remainingEnrollmentsCount: json.remainingEnrollments || json.remainingEnrollmentsCount\n    };\n  }\n\n}\n/**\n * @class VoiceProfileEnrollmentCancellationDetails\n */\n// tslint:disable-next-line:max-classes-per-file\n\nexport class VoiceProfileEnrollmentCancellationDetails extends CancellationDetailsBase {\n  constructor(reason, errorDetails, errorCode) {\n    super(reason, errorDetails, errorCode);\n  }\n  /**\n   * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.\n   * @member VoiceProfileEnrollmentCancellationDetails.fromResult\n   * @function\n   * @public\n   * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.\n   * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.\n   */\n\n\n  static fromResult(result) {\n    const reason = CancellationReason.Error;\n    let errorCode = CancellationErrorCode.NoError;\n\n    if (!!result.properties) {\n      errorCode = CancellationErrorCode[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\n    }\n\n    return new VoiceProfileEnrollmentCancellationDetails(reason, result.errorDetails, errorCode);\n  }\n\n}","map":{"version":3,"mappings":"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","names":["CancellationErrorCodePropertyName","CancellationDetailsBase","CancellationErrorCode","CancellationReason","PropertyCollection","ResultReason","VoiceProfileEnrollmentResult","constructor","reason","json","statusText","privReason","privProperties","Canceled","privDetails","JSON","parse","enrollmentStatus","toLowerCase","EnrollingVoiceProfile","privErrorDetails","setProperty","ServiceError","FromIdentificationProfileList","results","item","profiles","EnrolledVoiceProfile","result","getIdentificationDetails","push","FromVerificationProfileList","getVerificationDetails","enrollmentsCount","enrollmentsLength","properties","enrollmentResultDetails","errorDetails","audioSpeechLength","speechTime","parseFloat","enrollmentSpeechTime","profileId","identificationProfileId","remainingEnrollmentSpeechLength","remainingEnrollmentSpeechTime","verificationProfileId","remainingEnrollmentsCount","remainingEnrollments","VoiceProfileEnrollmentCancellationDetails","errorCode","fromResult","Error","NoError","getProperty"],"sources":["/Users/dylanmurray/Sweng-2022/front/node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/src/sdk/VoiceProfileEnrollmentResult.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license.\r\n\r\nimport { CancellationErrorCodePropertyName } from \"../common.speech/Exports\";\r\nimport { Contracts } from \"./Contracts\";\r\nimport {\r\n    CancellationDetailsBase,\r\n    CancellationErrorCode,\r\n    CancellationReason,\r\n    PropertyCollection,\r\n    ResultReason,\r\n} from \"./Exports\";\r\n\r\nexport interface EnrollmentResultDetails {\r\n    profileId: string;\r\n    enrollmentsCount: number;\r\n    enrollmentsLength: number;\r\n    enrollmentsSpeechLength: number;\r\n    remainingEnrollmentsCount: number;\r\n    remainingEnrollmentsSpeechLength: number;\r\n    audioLength: number;\r\n    audioSpeechLength: number;\r\n    enrollmentStatus: string;\r\n}\r\n\r\n/**\r\n * Output format\r\n * @class VoiceProfileEnrollmentResult\r\n */\r\nexport class VoiceProfileEnrollmentResult {\r\n    private privReason: ResultReason;\r\n    private privDetails: EnrollmentResultDetails;\r\n    private privProperties: PropertyCollection;\r\n    private privErrorDetails: string;\r\n\r\n    public constructor(reason: ResultReason, json: string, statusText: string) {\r\n        this.privReason = reason;\r\n        this.privProperties = new PropertyCollection();\r\n        if (this.privReason !== ResultReason.Canceled) {\r\n            if (!!json) {\r\n                this.privDetails = JSON.parse(json);\r\n                if (this.privDetails.enrollmentStatus.toLowerCase() === \"enrolling\") {\r\n                    this.privReason = ResultReason.EnrollingVoiceProfile;\r\n                }\r\n            }\r\n        } else {\r\n            this.privErrorDetails = statusText;\r\n            this.privProperties.setProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.ServiceError]);\r\n        }\r\n    }\r\n\r\n    public static FromIdentificationProfileList(json: { profiles: any[] }): VoiceProfileEnrollmentResult[] {\r\n        const results: VoiceProfileEnrollmentResult[] = [];\r\n        for (const item of json.profiles) {\r\n            const reason: ResultReason = item.enrollmentStatus.toLowerCase() === \"enrolling\" ?\r\n                ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === \"enrolled\" ?\r\n                ResultReason.EnrolledVoiceProfile : ResultReason.Canceled;\r\n            const result = new VoiceProfileEnrollmentResult(reason, null, null);\r\n            result.privDetails = this.getIdentificationDetails(item);\r\n            results.push(result);\r\n        }\r\n        return results;\r\n    }\r\n\r\n    public static FromVerificationProfileList(json: { profiles: any[] }): VoiceProfileEnrollmentResult[] {\r\n        const results: VoiceProfileEnrollmentResult[] = [];\r\n        for (const item of json.profiles) {\r\n            const reason: ResultReason = item.enrollmentStatus.toLowerCase() === \"enrolling\" ?\r\n                ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === \"enrolled\" ?\r\n                ResultReason.EnrolledVoiceProfile : ResultReason.Canceled;\r\n            const result = new VoiceProfileEnrollmentResult(reason, null, null);\r\n            result.privDetails = this.getVerificationDetails(item);\r\n            results.push(result);\r\n        }\r\n        return results;\r\n    }\r\n\r\n    public get reason(): ResultReason {\r\n        return this.privReason;\r\n    }\r\n\r\n    public get enrollmentsCount(): number {\r\n        return this.privDetails.enrollmentsCount;\r\n    }\r\n\r\n    public get enrollmentsLength(): number {\r\n        return this.privDetails.enrollmentsLength;\r\n    }\r\n\r\n    public get properties(): PropertyCollection {\r\n        return this.privProperties;\r\n    }\r\n\r\n    public get enrollmentResultDetails(): EnrollmentResultDetails {\r\n        return this.privDetails;\r\n    }\r\n\r\n    public get errorDetails(): string {\r\n        return this.privErrorDetails;\r\n    }\r\n\r\n    private static getIdentificationDetails(json: any): any {\r\n        return {\r\n            audioSpeechLength: json.speechTime ? parseFloat(json.speechTime) : 0,\r\n            enrollmentStatus: json.enrollmentStatus,\r\n            enrollmentsLength: json.enrollmentSpeechTime ? parseFloat(json.enrollmentSpeechTime) : 0,\r\n            profileId: json.profileId || json.identificationProfileId,\r\n            remainingEnrollmentSpeechLength: json.remainingEnrollmentSpeechTime ? parseFloat(json.remainingEnrollmentSpeechTime) : 0\r\n        };\r\n    }\r\n\r\n    private static getVerificationDetails(json: any): any {\r\n        return {\r\n            enrollmentStatus: json.enrollmentStatus,\r\n            enrollmentsCount: json.enrollmentsCount,\r\n            profileId: json.profileId || json.verificationProfileId,\r\n            remainingEnrollmentSpeechLength: json.remainingEnrollmentSpeechLength ? parseFloat(json.remainingEnrollmentSpeechLength) : 0,\r\n            remainingEnrollmentsCount: json.remainingEnrollments || json.remainingEnrollmentsCount\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * @class VoiceProfileEnrollmentCancellationDetails\r\n */\r\n// tslint:disable-next-line:max-classes-per-file\r\nexport class VoiceProfileEnrollmentCancellationDetails extends CancellationDetailsBase {\r\n\r\n    private constructor(reason: CancellationReason, errorDetails: string, errorCode: CancellationErrorCode) {\r\n        super(reason, errorDetails, errorCode);\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.\r\n     * @member VoiceProfileEnrollmentCancellationDetails.fromResult\r\n     * @function\r\n     * @public\r\n     * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.\r\n     * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.\r\n     */\r\n    public static fromResult(result: VoiceProfileEnrollmentResult): VoiceProfileEnrollmentCancellationDetails {\r\n        const reason = CancellationReason.Error;\r\n        let errorCode: CancellationErrorCode = CancellationErrorCode.NoError;\r\n\r\n        if (!!result.properties) {\r\n            errorCode = (CancellationErrorCode as any)[result.properties.getProperty(CancellationErrorCodePropertyName, CancellationErrorCode[CancellationErrorCode.NoError])];\r\n        }\r\n\r\n        return new VoiceProfileEnrollmentCancellationDetails(reason, result.errorDetails, errorCode);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}